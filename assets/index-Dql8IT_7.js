(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function MA(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Zd={exports:{}},Hl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function PA(){if(h_)return Hl;h_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:f,ref:o!==void 0?o:null,props:u}}return Hl.Fragment=e,Hl.jsx=n,Hl.jsxs=n,Hl}var f_;function VA(){return f_||(f_=1,Zd.exports=PA()),Zd.exports}var p=VA(),Jd={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function kA(){if(d_)return Oe;d_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.iterator;function S(R){return R===null||typeof R!="object"?null:(R=I&&R[I]||R["@@iterator"],typeof R=="function"?R:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,X={};function H(R,W,ce){this.props=R,this.context=W,this.refs=X,this.updater=ce||P}H.prototype.isReactComponent={},H.prototype.setState=function(R,W){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,W,"setState")},H.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function ae(){}ae.prototype=H.prototype;function Q(R,W,ce){this.props=R,this.context=W,this.refs=X,this.updater=ce||P}var te=Q.prototype=new ae;te.constructor=Q,U(te,H.prototype),te.isPureReactComponent=!0;var Z=Array.isArray,ie={H:null,A:null,T:null,S:null,V:null},le=Object.prototype.hasOwnProperty;function O(R,W,ce,se,me,ge){return ce=ge.ref,{$$typeof:s,type:R,key:W,ref:ce!==void 0?ce:null,props:ge}}function x(R,W){return O(R.type,W,void 0,void 0,void 0,R.props)}function C(R){return typeof R=="object"&&R!==null&&R.$$typeof===s}function D(R){var W={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ce){return W[ce]})}var M=/\/+/g;function V(R,W){return typeof R=="object"&&R!==null&&R.key!=null?D(""+R.key):W.toString(36)}function A(){}function Ne(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(A,A):(R.status="pending",R.then(function(W){R.status==="pending"&&(R.status="fulfilled",R.value=W)},function(W){R.status==="pending"&&(R.status="rejected",R.reason=W)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function ve(R,W,ce,se,me){var ge=typeof R;(ge==="undefined"||ge==="boolean")&&(R=null);var _e=!1;if(R===null)_e=!0;else switch(ge){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(R.$$typeof){case s:case e:_e=!0;break;case E:return _e=R._init,ve(_e(R._payload),W,ce,se,me)}}if(_e)return me=me(R),_e=se===""?"."+V(R,0):se,Z(me)?(ce="",_e!=null&&(ce=_e.replace(M,"$&/")+"/"),ve(me,W,ce,"",function(ut){return ut})):me!=null&&(C(me)&&(me=x(me,ce+(me.key==null||R&&R.key===me.key?"":(""+me.key).replace(M,"$&/")+"/")+_e)),W.push(me)),1;_e=0;var Qe=se===""?".":se+":";if(Z(R))for(var Ve=0;Ve<R.length;Ve++)se=R[Ve],ge=Qe+V(se,Ve),_e+=ve(se,W,ce,ge,me);else if(Ve=S(R),typeof Ve=="function")for(R=Ve.call(R),Ve=0;!(se=R.next()).done;)se=se.value,ge=Qe+V(se,Ve++),_e+=ve(se,W,ce,ge,me);else if(ge==="object"){if(typeof R.then=="function")return ve(Ne(R),W,ce,se,me);throw W=String(R),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return _e}function z(R,W,ce){if(R==null)return R;var se=[],me=0;return ve(R,se,"","",function(ge){return W.call(ce,ge,me++)}),se}function K(R){if(R._status===-1){var W=R._result;W=W(),W.then(function(ce){(R._status===0||R._status===-1)&&(R._status=1,R._result=ce)},function(ce){(R._status===0||R._status===-1)&&(R._status=2,R._result=ce)}),R._status===-1&&(R._status=0,R._result=W)}if(R._status===1)return R._result.default;throw R._result}var he=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function de(){}return Oe.Children={map:z,forEach:function(R,W,ce){z(R,function(){W.apply(this,arguments)},ce)},count:function(R){var W=0;return z(R,function(){W++}),W},toArray:function(R){return z(R,function(W){return W})||[]},only:function(R){if(!C(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Oe.Component=H,Oe.Fragment=n,Oe.Profiler=o,Oe.PureComponent=Q,Oe.StrictMode=r,Oe.Suspense=y,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ie,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(R){return ie.H.useMemoCache(R)}},Oe.cache=function(R){return function(){return R.apply(null,arguments)}},Oe.cloneElement=function(R,W,ce){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var se=U({},R.props),me=R.key,ge=void 0;if(W!=null)for(_e in W.ref!==void 0&&(ge=void 0),W.key!==void 0&&(me=""+W.key),W)!le.call(W,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&W.ref===void 0||(se[_e]=W[_e]);var _e=arguments.length-2;if(_e===1)se.children=ce;else if(1<_e){for(var Qe=Array(_e),Ve=0;Ve<_e;Ve++)Qe[Ve]=arguments[Ve+2];se.children=Qe}return O(R.type,me,void 0,void 0,ge,se)},Oe.createContext=function(R){return R={$$typeof:f,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:u,_context:R},R},Oe.createElement=function(R,W,ce){var se,me={},ge=null;if(W!=null)for(se in W.key!==void 0&&(ge=""+W.key),W)le.call(W,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(me[se]=W[se]);var _e=arguments.length-2;if(_e===1)me.children=ce;else if(1<_e){for(var Qe=Array(_e),Ve=0;Ve<_e;Ve++)Qe[Ve]=arguments[Ve+2];me.children=Qe}if(R&&R.defaultProps)for(se in _e=R.defaultProps,_e)me[se]===void 0&&(me[se]=_e[se]);return O(R,ge,void 0,void 0,null,me)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(R){return{$$typeof:m,render:R}},Oe.isValidElement=C,Oe.lazy=function(R){return{$$typeof:E,_payload:{_status:-1,_result:R},_init:K}},Oe.memo=function(R,W){return{$$typeof:_,type:R,compare:W===void 0?null:W}},Oe.startTransition=function(R){var W=ie.T,ce={};ie.T=ce;try{var se=R(),me=ie.S;me!==null&&me(ce,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(de,he)}catch(ge){he(ge)}finally{ie.T=W}},Oe.unstable_useCacheRefresh=function(){return ie.H.useCacheRefresh()},Oe.use=function(R){return ie.H.use(R)},Oe.useActionState=function(R,W,ce){return ie.H.useActionState(R,W,ce)},Oe.useCallback=function(R,W){return ie.H.useCallback(R,W)},Oe.useContext=function(R){return ie.H.useContext(R)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(R,W){return ie.H.useDeferredValue(R,W)},Oe.useEffect=function(R,W,ce){var se=ie.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(R,W)},Oe.useId=function(){return ie.H.useId()},Oe.useImperativeHandle=function(R,W,ce){return ie.H.useImperativeHandle(R,W,ce)},Oe.useInsertionEffect=function(R,W){return ie.H.useInsertionEffect(R,W)},Oe.useLayoutEffect=function(R,W){return ie.H.useLayoutEffect(R,W)},Oe.useMemo=function(R,W){return ie.H.useMemo(R,W)},Oe.useOptimistic=function(R,W){return ie.H.useOptimistic(R,W)},Oe.useReducer=function(R,W,ce){return ie.H.useReducer(R,W,ce)},Oe.useRef=function(R){return ie.H.useRef(R)},Oe.useState=function(R){return ie.H.useState(R)},Oe.useSyncExternalStore=function(R,W,ce){return ie.H.useSyncExternalStore(R,W,ce)},Oe.useTransition=function(){return ie.H.useTransition()},Oe.version="19.1.0",Oe}var m_;function Jm(){return m_||(m_=1,Jd.exports=kA()),Jd.exports}var oe=Jm();const LA=MA(oe);var em={exports:{}},Wl={},tm={exports:{}},nm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function jA(){return p_||(p_=1,function(s){function e(z,K){var he=z.length;z.push(K);e:for(;0<he;){var de=he-1>>>1,R=z[de];if(0<o(R,K))z[de]=K,z[he]=R,he=de;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var K=z[0],he=z.pop();if(he!==K){z[0]=he;e:for(var de=0,R=z.length,W=R>>>1;de<W;){var ce=2*(de+1)-1,se=z[ce],me=ce+1,ge=z[me];if(0>o(se,he))me<R&&0>o(ge,se)?(z[de]=ge,z[me]=he,de=me):(z[de]=se,z[ce]=he,de=ce);else if(me<R&&0>o(ge,he))z[de]=ge,z[me]=he,de=me;else break e}}return K}function o(z,K){var he=z.sortIndex-K.sortIndex;return he!==0?he:z.id-K.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var y=[],_=[],E=1,I=null,S=3,P=!1,U=!1,X=!1,H=!1,ae=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function Z(z){for(var K=n(_);K!==null;){if(K.callback===null)r(_);else if(K.startTime<=z)r(_),K.sortIndex=K.expirationTime,e(y,K);else break;K=n(_)}}function ie(z){if(X=!1,Z(z),!U)if(n(y)!==null)U=!0,le||(le=!0,V());else{var K=n(_);K!==null&&ve(ie,K.startTime-z)}}var le=!1,O=-1,x=5,C=-1;function D(){return H?!0:!(s.unstable_now()-C<x)}function M(){if(H=!1,le){var z=s.unstable_now();C=z;var K=!0;try{e:{U=!1,X&&(X=!1,Q(O),O=-1),P=!0;var he=S;try{t:{for(Z(z),I=n(y);I!==null&&!(I.expirationTime>z&&D());){var de=I.callback;if(typeof de=="function"){I.callback=null,S=I.priorityLevel;var R=de(I.expirationTime<=z);if(z=s.unstable_now(),typeof R=="function"){I.callback=R,Z(z),K=!0;break t}I===n(y)&&r(y),Z(z)}else r(y);I=n(y)}if(I!==null)K=!0;else{var W=n(_);W!==null&&ve(ie,W.startTime-z),K=!1}}break e}finally{I=null,S=he,P=!1}K=void 0}}finally{K?V():le=!1}}}var V;if(typeof te=="function")V=function(){te(M)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,Ne=A.port2;A.port1.onmessage=M,V=function(){Ne.postMessage(null)}}else V=function(){ae(M,0)};function ve(z,K){O=ae(function(){z(s.unstable_now())},K)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(z){z.callback=null},s.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<z?Math.floor(1e3/z):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(z){switch(S){case 1:case 2:case 3:var K=3;break;default:K=S}var he=S;S=K;try{return z()}finally{S=he}},s.unstable_requestPaint=function(){H=!0},s.unstable_runWithPriority=function(z,K){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var he=S;S=z;try{return K()}finally{S=he}},s.unstable_scheduleCallback=function(z,K,he){var de=s.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?de+he:de):he=de,z){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=he+R,z={id:E++,callback:K,priorityLevel:z,startTime:he,expirationTime:R,sortIndex:-1},he>de?(z.sortIndex=he,e(_,z),n(y)===null&&z===n(_)&&(X?(Q(O),O=-1):X=!0,ve(ie,he-de))):(z.sortIndex=R,e(y,z),U||P||(U=!0,le||(le=!0,V()))),z},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(z){var K=S;return function(){var he=S;S=K;try{return z.apply(this,arguments)}finally{S=he}}}}(nm)),nm}var g_;function UA(){return g_||(g_=1,tm.exports=jA()),tm.exports}var im={exports:{}},un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_;function FA(){if(y_)return un;y_=1;var s=Jm();function e(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)_+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,_,E){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:I==null?null:""+I,children:y,containerInfo:_,implementation:E}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,un.createPortal=function(y,_){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return u(y,_,null,E)},un.flushSync=function(y){var _=f.T,E=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=_,r.p=E,r.d.f()}},un.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(y,_))},un.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},un.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var E=_.as,I=m(E,_.crossOrigin),S=typeof _.integrity=="string"?_.integrity:void 0,P=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;E==="style"?r.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:I,integrity:S,fetchPriority:P}):E==="script"&&r.d.X(y,{crossOrigin:I,integrity:S,fetchPriority:P,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},un.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var E=m(_.as,_.crossOrigin);r.d.M(y,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(y)},un.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var E=_.as,I=m(E,_.crossOrigin);r.d.L(y,E,{crossOrigin:I,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},un.preloadModule=function(y,_){if(typeof y=="string")if(_){var E=m(_.as,_.crossOrigin);r.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(y)},un.requestFormReset=function(y){r.d.r(y)},un.unstable_batchedUpdates=function(y,_){return y(_)},un.useFormState=function(y,_,E){return f.H.useFormState(y,_,E)},un.useFormStatus=function(){return f.H.useHostTransitionStatus()},un.version="19.1.0",un}var __;function BA(){if(__)return im.exports;__=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),im.exports=FA(),im.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function zA(){if(v_)return Wl;v_=1;var s=UA(),e=Jm(),n=BA();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(r(188))}function y(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),t;if(d===l)return m(h),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var T=!1,b=h.child;b;){if(b===a){T=!0,a=h,l=d;break}if(b===l){T=!0,l=h,a=d;break}b=b.sibling}if(!T){for(b=d.child;b;){if(b===a){T=!0,a=d,l=h;break}if(b===l){T=!0,l=d,a=h;break}b=b.sibling}if(!T)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function _(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=_(t),i!==null)return i;t=t.sibling}return null}var E=Object.assign,I=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),ae=Symbol.for("react.provider"),Q=Symbol.for("react.consumer"),te=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var A=Symbol.for("react.client.reference");function Ne(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===A?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case U:return"Fragment";case H:return"Profiler";case X:return"StrictMode";case ie:return"Suspense";case le:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case P:return"Portal";case te:return(t.displayName||"Context")+".Provider";case Q:return(t._context.displayName||"Context")+".Consumer";case Z:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O:return i=t.displayName||null,i!==null?i:Ne(t.type)||"Memo";case x:i=t._payload,t=t._init;try{return Ne(t(i))}catch{}}return null}var ve=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},de=[],R=-1;function W(t){return{current:t}}function ce(t){0>R||(t.current=de[R],de[R]=null,R--)}function se(t,i){R++,de[R]=t.current,t.current=i}var me=W(null),ge=W(null),_e=W(null),Qe=W(null);function Ve(t,i){switch(se(_e,i),se(ge,t),se(me,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?U0(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=U0(i),t=F0(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ce(me),se(me,t)}function ut(){ce(me),ce(ge),ce(_e)}function ct(t){t.memoizedState!==null&&se(Qe,t);var i=me.current,a=F0(i,t.type);i!==a&&(se(ge,t),se(me,a))}function Tt(t){ge.current===t&&(ce(me),ce(ge)),Qe.current===t&&(ce(Qe),Fl._currentValue=he)}var pn=Object.prototype.hasOwnProperty,on=s.unstable_scheduleCallback,qn=s.unstable_cancelCallback,bi=s.unstable_shouldYield,Ia=s.unstable_requestPaint,gn=s.unstable_now,Ra=s.unstable_getCurrentPriorityLevel,Ds=s.unstable_ImmediatePriority,Os=s.unstable_UserBlockingPriority,wi=s.unstable_NormalPriority,Ho=s.unstable_LowPriority,Qi=s.unstable_IdlePriority,Nr=s.log,Dr=s.unstable_setDisableYieldValue,mt=null,$e=null;function yn(t){if(typeof Nr=="function"&&Dr(t),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(mt,t)}catch{}}var jt=Math.clz32?Math.clz32:Yi,Or=Math.log,Ca=Math.LN2;function Yi(t){return t>>>=0,t===0?32:31-(Or(t)/Ca|0)|0}var Ai=256,Xi=4194304;function bn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Si(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?h=bn(l):(T&=b,T!==0?h=bn(T):a||(a=b&~t,a!==0&&(h=bn(a))))):(b=l&~d,b!==0?h=bn(b):T!==0?h=bn(T):a||(a=l&~t,a!==0&&(h=bn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Zi(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Ji(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mr(){var t=Ai;return Ai<<=1,(Ai&4194048)===0&&(Ai=256),t}function Pr(){var t=Xi;return Xi<<=1,(Xi&62914560)===0&&(Xi=4194304),t}function Mn(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function ci(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function es(t,i,a,l,h,d){var T=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,N=t.expirationTimes,B=t.hiddenUpdates;for(a=T&~a;0<a;){var Y=31-jt(a),ne=1<<Y;b[Y]=0,N[Y]=-1;var G=B[Y];if(G!==null)for(B[Y]=null,Y=0;Y<G.length;Y++){var q=G[Y];q!==null&&(q.lane&=-536870913)}a&=~ne}l!==0&&Hn(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(T&~i))}function Hn(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-jt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Ms(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-jt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function Wn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ps(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Xe(){var t=K.p;return t!==0?t:(t=window.event,t===void 0?32:r_(t.type))}function Na(t,i){var a=K.p;try{return K.p=t,i()}finally{K.p=a}}var ht=Math.random().toString(36).slice(2),_t="__reactFiber$"+ht,St="__reactProps$"+ht,wn="__reactContainer$"+ht,Vr="__reactEvents$"+ht,Wo="__reactListeners$"+ht,xi="__reactHandles$"+ht,Da="__reactResources$"+ht,ts="__reactMarker$"+ht;function $n(t){delete t[_t],delete t[St],delete t[Vr],delete t[Wo],delete t[xi]}function hi(t){var i=t[_t];if(i)return i;for(var a=t.parentNode;a;){if(i=a[wn]||a[_t]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=q0(t);t!==null;){if(a=t[_t])return a;t=q0(t)}return i}t=a,a=t.parentNode}return null}function Kn(t){if(t=t[_t]||t[wn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function Qn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function Yt(t){var i=t[Da];return i||(i=t[Da]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Et(t){t[ts]=!0}var kr=new Set,Vs={};function Xt(t,i){ue(t,i),ue(t+"Capture",i)}function ue(t,i){for(Vs[t]=i,t=0;t<i.length;t++)kr.add(i[t])}var De=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ke={},ze={};function et(t){return pn.call(ze,t)?!0:pn.call(ke,t)?!1:De.test(t)?ze[t]=!0:(ke[t]=!0,!1)}function it(t,i,a){if(et(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Zt(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function pt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var An,Oa;function ns(t){if(An===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);An=i&&i[1]||"",Oa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+An+t+Oa}var Ma=!1;function Pa(t,i){if(!t||Ma)return"";Ma=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(q){var G=q}Reflect.construct(t,[],ne)}else{try{ne.call()}catch(q){G=q}t.call(ne.prototype)}}else{try{throw Error()}catch(q){G=q}(ne=t())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(q){if(q&&G&&typeof q.stack=="string")return[q.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),T=d[0],b=d[1];if(T&&b){var N=T.split(`
`),B=b.split(`
`);for(h=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(l===N.length||h===B.length)for(l=N.length-1,h=B.length-1;1<=l&&0<=h&&N[l]!==B[h];)h--;for(;1<=l&&0<=h;l--,h--)if(N[l]!==B[h]){if(l!==1||h!==1)do if(l--,h--,0>h||N[l]!==B[h]){var Y=`
`+N[l].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=l&&0<=h);break}}}finally{Ma=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ns(a):""}function $o(t){switch(t.tag){case 26:case 27:case 5:return ns(t.type);case 16:return ns("Lazy");case 13:return ns("Suspense");case 19:return ns("SuspenseList");case 0:case 15:return Pa(t.type,!1);case 11:return Pa(t.type.render,!1);case 1:return Pa(t.type,!0);case 31:return ns("Activity");default:return""}}function Va(t){try{var i="";do i+=$o(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function _n(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ko(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function tf(t){var i=Ko(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(T){l=""+T,d.call(this,T)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ka(t){t._valueTracker||(t._valueTracker=tf(t))}function Qo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Ko(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Lr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var nf=/[\n"\\]/g;function Dt(t){return t.replace(nf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Pn(t,i,a,l,h,d,T,b){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),i!=null?T==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+_n(i)):t.value!==""+_n(i)&&(t.value=""+_n(i)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),i!=null?ks(t,T,_n(i)):a!=null?ks(t,T,_n(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+_n(b):t.removeAttribute("name")}function jr(t,i,a,l,h,d,T,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+_n(a):"",i=i!=null?""+_n(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T)}function ks(t,i,a){i==="number"&&Lr(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function is(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+_n(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function st(t,i,a){if(i!=null&&(i=""+_n(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+_n(a):""}function Ur(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(ve(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=_n(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Yn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Fr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cu(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Fr.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Yo(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Cu(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Cu(t,d,i[d])}function Xo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function La(t){return rf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var ss=null;function Xn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rs=null,as=null;function Zo(t){var i=Kn(t);if(i&&(t=i.stateNode)){var a=t[St]||null;e:switch(t=i.stateNode,i.type){case"input":if(Pn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Dt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[St]||null;if(!h)throw Error(r(90));Pn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Qo(l)}break e;case"textarea":st(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&is(t,!!a.multiple,i,!1)}}}var Ii=!1;function Nu(t,i,a){if(Ii)return t(i,a);Ii=!0;try{var l=t(i);return l}finally{if(Ii=!1,(rs!==null||as!==null)&&(wc(),rs&&(i=rs,t=as,as=rs=null,Zo(i),t)))for(i=0;i<t.length;i++)Zo(t[i])}}function Br(t,i){var a=t.stateNode;if(a===null)return null;var l=a[St]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zn=!1;if(fi)try{var zr={};Object.defineProperty(zr,"passive",{get:function(){Zn=!0}}),window.addEventListener("test",zr,zr),window.removeEventListener("test",zr,zr)}catch{Zn=!1}var Ri=null,Ls=null,os=null;function Jo(){if(os)return os;var t,i=Ls,a=i.length,l,h="value"in Ri?Ri.value:Ri.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var T=a-t;for(l=1;l<=T&&i[a-l]===h[d-l];l++);return os=h.slice(t,1<l?1-l:void 0)}function Ci(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Ni(){return!0}function el(){return!1}function qt(t){function i(a,l,h,d,T){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=T,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ni:el,this.isPropagationStopped=el,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ni)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ni)},persist:function(){},isPersistent:Ni}),i}var Ze={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ja=qt(Ze),Gr=E({},Ze,{view:0,detail:0}),Du=qt(Gr),Ua,Fa,Di,qr=E({},Gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$r,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Di&&(Di&&t.type==="mousemove"?(Ua=t.screenX-Di.screenX,Fa=t.screenY-Di.screenY):Fa=Ua=0,Di=t),Ua)},movementY:function(t){return"movementY"in t?t.movementY:Fa}}),Jn=qt(qr),Ou=E({},qr,{dataTransfer:0}),af=qt(Ou),Hr=E({},Gr,{relatedTarget:0}),Ba=qt(Hr),tl=E({},Ze,{animationName:0,elapsedTime:0,pseudoElement:0}),za=qt(tl),Mu=E({},Ze,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ga=qt(Mu),of=E({},Ze,{data:0}),nl=qt(of),Wr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function il(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Vu[t])?!!i[t]:!1}function $r(){return il}var ku=E({},Gr,{key:function(t){if(t.key){var i=Wr[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Ci(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Pu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$r,charCode:function(t){return t.type==="keypress"?Ci(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ci(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qa=qt(ku),Lu=E({},qr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sl=qt(Lu),ls=E({},Gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$r}),ju=qt(ls),Uu=E({},Ze,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fu=qt(Uu),Bu=E({},qr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ha=qt(Bu),vn=E({},Ze,{newState:0,oldState:0}),zu=qt(vn),Gu=[9,13,27,32],Oi=fi&&"CompositionEvent"in window,c=null;fi&&"documentMode"in document&&(c=document.documentMode);var g=fi&&"TextEvent"in window&&!c,v=fi&&(!Oi||c&&8<c&&11>=c),w=" ",j=!1;function $(t,i){switch(t){case"keyup":return Gu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fe(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ge=!1;function Ut(t,i){switch(t){case"compositionend":return fe(i);case"keypress":return i.which!==32?null:(j=!0,w);case"textInput":return t=i.data,t===w&&j?null:t;default:return null}}function qe(t,i){if(Ge)return t==="compositionend"||!Oi&&$(t,i)?(t=Jo(),os=Ls=Ri=null,Ge=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var Ht={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ft(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ht[t.type]:i==="textarea"}function us(t,i,a,l){rs?as?as.push(l):as=[l]:rs=l,i=Cc(i,"onChange"),0<i.length&&(a=new ja("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Jt=null,Mi=null;function rl(t){P0(t,0)}function qu(t){var i=Qn(t);if(Qo(i))return t}function tg(t,i){if(t==="change")return i}var ng=!1;if(fi){var lf;if(fi){var uf="oninput"in document;if(!uf){var ig=document.createElement("div");ig.setAttribute("oninput","return;"),uf=typeof ig.oninput=="function"}lf=uf}else lf=!1;ng=lf&&(!document.documentMode||9<document.documentMode)}function sg(){Jt&&(Jt.detachEvent("onpropertychange",rg),Mi=Jt=null)}function rg(t){if(t.propertyName==="value"&&qu(Mi)){var i=[];us(i,Mi,t,Xn(t)),Nu(rl,i)}}function uw(t,i,a){t==="focusin"?(sg(),Jt=i,Mi=a,Jt.attachEvent("onpropertychange",rg)):t==="focusout"&&sg()}function cw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qu(Mi)}function hw(t,i){if(t==="click")return qu(i)}function fw(t,i){if(t==="input"||t==="change")return qu(i)}function dw(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Vn=typeof Object.is=="function"?Object.is:dw;function al(t,i){if(Vn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!pn.call(i,h)||!Vn(t[h],i[h]))return!1}return!0}function ag(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function og(t,i){var a=ag(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ag(a)}}function lg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?lg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function ug(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Lr(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Lr(t.document)}return i}function cf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var mw=fi&&"documentMode"in document&&11>=document.documentMode,Wa=null,hf=null,ol=null,ff=!1;function cg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ff||Wa==null||Wa!==Lr(l)||(l=Wa,"selectionStart"in l&&cf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ol&&al(ol,l)||(ol=l,l=Cc(hf,"onSelect"),0<l.length&&(i=new ja("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Wa)))}function Kr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var $a={animationend:Kr("Animation","AnimationEnd"),animationiteration:Kr("Animation","AnimationIteration"),animationstart:Kr("Animation","AnimationStart"),transitionrun:Kr("Transition","TransitionRun"),transitionstart:Kr("Transition","TransitionStart"),transitioncancel:Kr("Transition","TransitionCancel"),transitionend:Kr("Transition","TransitionEnd")},df={},hg={};fi&&(hg=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function Qr(t){if(df[t])return df[t];if(!$a[t])return t;var i=$a[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in hg)return df[t]=i[a];return t}var fg=Qr("animationend"),dg=Qr("animationiteration"),mg=Qr("animationstart"),pw=Qr("transitionrun"),gw=Qr("transitionstart"),yw=Qr("transitioncancel"),pg=Qr("transitionend"),gg=new Map,mf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mf.push("scrollEnd");function di(t,i){gg.set(t,i),Xt(i,[t])}var yg=new WeakMap;function ei(t,i){if(typeof t=="object"&&t!==null){var a=yg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Va(i)},yg.set(t,i),i)}return{value:t,source:i,stack:Va(i)}}var ti=[],Ka=0,pf=0;function Hu(){for(var t=Ka,i=pf=Ka=0;i<t;){var a=ti[i];ti[i++]=null;var l=ti[i];ti[i++]=null;var h=ti[i];ti[i++]=null;var d=ti[i];if(ti[i++]=null,l!==null&&h!==null){var T=l.pending;T===null?h.next=h:(h.next=T.next,T.next=h),l.pending=h}d!==0&&_g(a,h,d)}}function Wu(t,i,a,l){ti[Ka++]=t,ti[Ka++]=i,ti[Ka++]=a,ti[Ka++]=l,pf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function gf(t,i,a,l){return Wu(t,i,a,l),$u(t)}function Qa(t,i){return Wu(t,null,null,i),$u(t)}function _g(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-jt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function $u(t){if(50<Ol)throw Ol=0,bd=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ya={};function _w(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(t,i,a,l){return new _w(t,i,a,l)}function yf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cs(t,i){var a=t.alternate;return a===null?(a=kn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function vg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Ku(t,i,a,l,h,d){var T=0;if(l=t,typeof t=="function")yf(t)&&(T=1);else if(typeof t=="string")T=TA(t,a,me.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=kn(31,a,i,h),t.elementType=C,t.lanes=d,t;case U:return Yr(a.children,h,d,i);case X:T=8,h|=24;break;case H:return t=kn(12,a,i,h|2),t.elementType=H,t.lanes=d,t;case ie:return t=kn(13,a,i,h),t.elementType=ie,t.lanes=d,t;case le:return t=kn(19,a,i,h),t.elementType=le,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ae:case te:T=10;break e;case Q:T=9;break e;case Z:T=11;break e;case O:T=14;break e;case x:T=16,l=null;break e}T=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return i=kn(T,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Yr(t,i,a,l){return t=kn(7,t,l,i),t.lanes=a,t}function _f(t,i,a){return t=kn(6,t,null,i),t.lanes=a,t}function vf(t,i,a){return i=kn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Xa=[],Za=0,Qu=null,Yu=0,ni=[],ii=0,Xr=null,hs=1,fs="";function Zr(t,i){Xa[Za++]=Yu,Xa[Za++]=Qu,Qu=t,Yu=i}function Tg(t,i,a){ni[ii++]=hs,ni[ii++]=fs,ni[ii++]=Xr,Xr=t;var l=hs;t=fs;var h=32-jt(l)-1;l&=~(1<<h),a+=1;var d=32-jt(i)+h;if(30<d){var T=h-h%5;d=(l&(1<<T)-1).toString(32),l>>=T,h-=T,hs=1<<32-jt(i)+h|a<<h|l,fs=d+t}else hs=1<<d|a<<h|l,fs=t}function Tf(t){t.return!==null&&(Zr(t,1),Tg(t,1,0))}function Ef(t){for(;t===Qu;)Qu=Xa[--Za],Xa[Za]=null,Yu=Xa[--Za],Xa[Za]=null;for(;t===Xr;)Xr=ni[--ii],ni[ii]=null,fs=ni[--ii],ni[ii]=null,hs=ni[--ii],ni[ii]=null}var Tn=null,xt=null,Ye=!1,Jr=null,Pi=!1,bf=Error(r(519));function ea(t){var i=Error(r(418,""));throw cl(ei(i,t)),bf}function Eg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[_t]=t,i[St]=l,a){case"dialog":je("cancel",i),je("close",i);break;case"iframe":case"object":case"embed":je("load",i);break;case"video":case"audio":for(a=0;a<Pl.length;a++)je(Pl[a],i);break;case"source":je("error",i);break;case"img":case"image":case"link":je("error",i),je("load",i);break;case"details":je("toggle",i);break;case"input":je("invalid",i),jr(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ka(i);break;case"select":je("invalid",i);break;case"textarea":je("invalid",i),Ur(i,l.value,l.defaultValue,l.children),ka(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||j0(i.textContent,a)?(l.popover!=null&&(je("beforetoggle",i),je("toggle",i)),l.onScroll!=null&&je("scroll",i),l.onScrollEnd!=null&&je("scrollend",i),l.onClick!=null&&(i.onclick=Nc),i=!0):i=!1,i||ea(t)}function bg(t){for(Tn=t.return;Tn;)switch(Tn.tag){case 5:case 13:Pi=!1;return;case 27:case 3:Pi=!0;return;default:Tn=Tn.return}}function ll(t){if(t!==Tn)return!1;if(!Ye)return bg(t),Ye=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||jd(t.type,t.memoizedProps)),a=!a),a&&xt&&ea(t),bg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){xt=pi(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}xt=null}}else i===27?(i=xt,Js(t.type)?(t=zd,zd=null,xt=t):xt=i):xt=Tn?pi(t.stateNode.nextSibling):null;return!0}function ul(){xt=Tn=null,Ye=!1}function wg(){var t=Jr;return t!==null&&(In===null?In=t:In.push.apply(In,t),Jr=null),t}function cl(t){Jr===null?Jr=[t]:Jr.push(t)}var wf=W(null),ta=null,ds=null;function js(t,i,a){se(wf,i._currentValue),i._currentValue=a}function ms(t){t._currentValue=wf.current,ce(wf)}function Af(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Sf(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var T=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var N=0;N<i.length;N++)if(b.context===i[N]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Af(d.return,a,t),l||(T=null);break e}d=b.next}}else if(h.tag===18){if(T=h.return,T===null)throw Error(r(341));T.lanes|=a,d=T.alternate,d!==null&&(d.lanes|=a),Af(T,a,t),T=null}else T=h.child;if(T!==null)T.return=h;else for(T=h;T!==null;){if(T===t){T=null;break}if(h=T.sibling,h!==null){h.return=T.return,T=h;break}T=T.return}h=T}}function hl(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var T=h.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var b=h.type;Vn(h.pendingProps.value,T.value)||(t!==null?t.push(b):t=[b])}}else if(h===Qe.current){if(T=h.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Fl):t=[Fl])}h=h.return}t!==null&&Sf(i,t,a,l),i.flags|=262144}function Xu(t){for(t=t.firstContext;t!==null;){if(!Vn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function na(t){ta=t,ds=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ln(t){return Ag(ta,t)}function Zu(t,i){return ta===null&&na(t),Ag(t,i)}function Ag(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ds===null){if(t===null)throw Error(r(308));ds=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else ds=ds.next=i;return a}var vw=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},Tw=s.unstable_scheduleCallback,Ew=s.unstable_NormalPriority,Bt={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xf(){return{controller:new vw,data:new Map,refCount:0}}function fl(t){t.refCount--,t.refCount===0&&Tw(Ew,function(){t.controller.abort()})}var dl=null,If=0,Ja=0,eo=null;function bw(t,i){if(dl===null){var a=dl=[];If=0,Ja=Cd(),eo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return If++,i.then(Sg,Sg),i}function Sg(){if(--If===0&&dl!==null){eo!==null&&(eo.status="fulfilled");var t=dl;dl=null,Ja=0,eo=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function ww(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var xg=z.S;z.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&bw(t,i),xg!==null&&xg(t,i)};var ia=W(null);function Rf(){var t=ia.current;return t!==null?t:ft.pooledCache}function Ju(t,i){i===null?se(ia,ia.current):se(ia,i.pool)}function Ig(){var t=Rf();return t===null?null:{parent:Bt._currentValue,pool:t}}var ml=Error(r(460)),Rg=Error(r(474)),ec=Error(r(542)),Cf={then:function(){}};function Cg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function tc(){}function Ng(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(tc,tc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Og(t),t;default:if(typeof i.status=="string")i.then(tc,tc);else{if(t=ft,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Og(t),t}throw pl=i,ml}}var pl=null;function Dg(){if(pl===null)throw Error(r(459));var t=pl;return pl=null,t}function Og(t){if(t===ml||t===ec)throw Error(r(483))}var Us=!1;function Nf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Df(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Fs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Bs(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(tt&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=$u(t),_g(t,null,a),i}return Wu(t,l,i,a),$u(t)}function gl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Ms(t,a)}}function Of(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=T:d=d.next=T,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Mf=!1;function yl(){if(Mf){var t=eo;if(t!==null)throw t}}function _l(t,i,a,l){Mf=!1;var h=t.updateQueue;Us=!1;var d=h.firstBaseUpdate,T=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var N=b,B=N.next;N.next=null,T===null?d=B:T.next=B,T=N;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,b=Y.lastBaseUpdate,b!==T&&(b===null?Y.firstBaseUpdate=B:b.next=B,Y.lastBaseUpdate=N))}if(d!==null){var ne=h.baseState;T=0,Y=B=N=null,b=d;do{var G=b.lane&-536870913,q=G!==b.lane;if(q?(He&G)===G:(l&G)===G){G!==0&&G===Ja&&(Mf=!0),Y!==null&&(Y=Y.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Ie=t,we=b;G=i;var ot=a;switch(we.tag){case 1:if(Ie=we.payload,typeof Ie=="function"){ne=Ie.call(ot,ne,G);break e}ne=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=we.payload,G=typeof Ie=="function"?Ie.call(ot,ne,G):Ie,G==null)break e;ne=E({},ne,G);break e;case 2:Us=!0}}G=b.callback,G!==null&&(t.flags|=64,q&&(t.flags|=8192),q=h.callbacks,q===null?h.callbacks=[G]:q.push(G))}else q={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Y===null?(B=Y=q,N=ne):Y=Y.next=q,T|=G;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;q=b,b=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);Y===null&&(N=ne),h.baseState=N,h.firstBaseUpdate=B,h.lastBaseUpdate=Y,d===null&&(h.shared.lanes=0),Qs|=T,t.lanes=T,t.memoizedState=ne}}function Mg(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function Pg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Mg(a[t],i)}var to=W(null),nc=W(0);function Vg(t,i){t=Es,se(nc,t),se(to,i),Es=t|i.baseLanes}function Pf(){se(nc,Es),se(to,to.current)}function Vf(){Es=nc.current,ce(to),ce(nc)}var zs=0,Me=null,rt=null,Ot=null,ic=!1,no=!1,sa=!1,sc=0,vl=0,io=null,Aw=0;function Rt(){throw Error(r(321))}function kf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Vn(t[a],i[a]))return!1;return!0}function Lf(t,i,a,l,h,d){return zs=d,Me=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,z.H=t===null||t.memoizedState===null?_y:vy,sa=!1,d=a(l,h),sa=!1,no&&(d=Lg(i,a,l,h)),kg(t),d}function kg(t){z.H=cc;var i=rt!==null&&rt.next!==null;if(zs=0,Ot=rt=Me=null,ic=!1,vl=0,io=null,i)throw Error(r(300));t===null||Wt||(t=t.dependencies,t!==null&&Xu(t)&&(Wt=!0))}function Lg(t,i,a,l){Me=t;var h=0;do{if(no&&(io=null),vl=0,no=!1,25<=h)throw Error(r(301));if(h+=1,Ot=rt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}z.H=Dw,d=i(a,l)}while(no);return d}function Sw(){var t=z.H,i=t.useState()[0];return i=typeof i.then=="function"?Tl(i):i,t=t.useState()[0],(rt!==null?rt.memoizedState:null)!==t&&(Me.flags|=1024),i}function jf(){var t=sc!==0;return sc=0,t}function Uf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Ff(t){if(ic){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}ic=!1}zs=0,Ot=rt=Me=null,no=!1,vl=sc=0,io=null}function Sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Me.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function Mt(){if(rt===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var i=Ot===null?Me.memoizedState:Ot.next;if(i!==null)Ot=i,rt=t;else{if(t===null)throw Me.alternate===null?Error(r(467)):Error(r(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Ot===null?Me.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function Bf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(t){var i=vl;return vl+=1,io===null&&(io=[]),t=Ng(io,t,i),i=Me,(Ot===null?i.memoizedState:Ot.next)===null&&(i=i.alternate,z.H=i===null||i.memoizedState===null?_y:vy),t}function rc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Tl(t);if(t.$$typeof===te)return ln(t)}throw Error(r(438,String(t)))}function zf(t){var i=null,a=Me.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Me.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Bf(),Me.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=D;return i.index++,a}function ps(t,i){return typeof i=="function"?i(t):i}function ac(t){var i=Mt();return Gf(i,rt,t)}function Gf(t,i,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var T=h.next;h.next=d.next,d.next=T}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var b=T=null,N=null,B=i,Y=!1;do{var ne=B.lane&-536870913;if(ne!==B.lane?(He&ne)===ne:(zs&ne)===ne){var G=B.revertLane;if(G===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),ne===Ja&&(Y=!0);else if((zs&G)===G){B=B.next,G===Ja&&(Y=!0);continue}else ne={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(b=N=ne,T=d):N=N.next=ne,Me.lanes|=G,Qs|=G;ne=B.action,sa&&a(d,ne),d=B.hasEagerState?B.eagerState:a(d,ne)}else G={lane:ne,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(b=N=G,T=d):N=N.next=G,Me.lanes|=ne,Qs|=ne;B=B.next}while(B!==null&&B!==i);if(N===null?T=d:N.next=b,!Vn(d,t.memoizedState)&&(Wt=!0,Y&&(a=eo,a!==null)))throw a;t.memoizedState=d,t.baseState=T,t.baseQueue=N,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function qf(t){var i=Mt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var T=h=h.next;do d=t(d,T.action),T=T.next;while(T!==h);Vn(d,i.memoizedState)||(Wt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function jg(t,i,a){var l=Me,h=Mt(),d=Ye;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var T=!Vn((rt||h).memoizedState,a);T&&(h.memoizedState=a,Wt=!0),h=h.queue;var b=Bg.bind(null,l,h,t);if(El(2048,8,b,[t]),h.getSnapshot!==i||T||Ot!==null&&Ot.memoizedState.tag&1){if(l.flags|=2048,so(9,oc(),Fg.bind(null,l,h,a,i),null),ft===null)throw Error(r(349));d||(zs&124)!==0||Ug(l,i,a)}return a}function Ug(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Me.updateQueue,i===null?(i=Bf(),Me.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Fg(t,i,a,l){i.value=a,i.getSnapshot=l,zg(i)&&Gg(t)}function Bg(t,i,a){return a(function(){zg(i)&&Gg(t)})}function zg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Vn(t,a)}catch{return!0}}function Gg(t){var i=Qa(t,2);i!==null&&Bn(i,t,2)}function Hf(t){var i=Sn();if(typeof t=="function"){var a=t;if(t=a(),sa){yn(!0);try{a()}finally{yn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:t},i}function qg(t,i,a,l){return t.baseState=a,Gf(t,rt,typeof l=="function"?l:ps)}function xw(t,i,a,l,h){if(uc(t))throw Error(r(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){d.listeners.push(T)}};z.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Hg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Hg(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=z.T,T={};z.T=T;try{var b=a(h,l),N=z.S;N!==null&&N(T,b),Wg(t,i,b)}catch(B){Wf(t,i,B)}finally{z.T=d}}else try{d=a(h,l),Wg(t,i,d)}catch(B){Wf(t,i,B)}}function Wg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){$g(t,i,l)},function(l){return Wf(t,i,l)}):$g(t,i,a)}function $g(t,i,a){i.status="fulfilled",i.value=a,Kg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Hg(t,a)))}function Wf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Kg(i),i=i.next;while(i!==l)}t.action=null}function Kg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Qg(t,i){return i}function Yg(t,i){if(Ye){var a=ft.formState;if(a!==null){e:{var l=Me;if(Ye){if(xt){t:{for(var h=xt,d=Pi;h.nodeType!==8;){if(!d){h=null;break t}if(h=pi(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){xt=pi(h.nextSibling),l=h.data==="F!";break e}}ea(l)}l=!1}l&&(i=a[0])}}return a=Sn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qg,lastRenderedState:i},a.queue=l,a=py.bind(null,Me,l),l.dispatch=a,l=Hf(!1),d=Xf.bind(null,Me,!1,l.queue),l=Sn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=xw.bind(null,Me,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function Xg(t){var i=Mt();return Zg(i,rt,t)}function Zg(t,i,a){if(i=Gf(t,i,Qg)[0],t=ac(ps)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Tl(i)}catch(T){throw T===ml?ec:T}else l=i;i=Mt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Me.flags|=2048,so(9,oc(),Iw.bind(null,h,a),null)),[l,d,t]}function Iw(t,i){t.action=i}function Jg(t){var i=Mt(),a=rt;if(a!==null)return Zg(i,a,t);Mt(),i=i.memoizedState,a=Mt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function so(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Me.updateQueue,i===null&&(i=Bf(),Me.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function oc(){return{destroy:void 0,resource:void 0}}function ey(){return Mt().memoizedState}function lc(t,i,a,l){var h=Sn();l=l===void 0?null:l,Me.flags|=t,h.memoizedState=so(1|i,oc(),a,l)}function El(t,i,a,l){var h=Mt();l=l===void 0?null:l;var d=h.memoizedState.inst;rt!==null&&l!==null&&kf(l,rt.memoizedState.deps)?h.memoizedState=so(i,d,a,l):(Me.flags|=t,h.memoizedState=so(1|i,d,a,l))}function ty(t,i){lc(8390656,8,t,i)}function ny(t,i){El(2048,8,t,i)}function iy(t,i){return El(4,2,t,i)}function sy(t,i){return El(4,4,t,i)}function ry(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function ay(t,i,a){a=a!=null?a.concat([t]):null,El(4,4,ry.bind(null,i,t),a)}function $f(){}function oy(t,i){var a=Mt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&kf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function ly(t,i){var a=Mt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&kf(i,l[1]))return l[0];if(l=t(),sa){yn(!0);try{t()}finally{yn(!1)}}return a.memoizedState=[l,i],l}function Kf(t,i,a){return a===void 0||(zs&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=h0(),Me.lanes|=t,Qs|=t,a)}function uy(t,i,a,l){return Vn(a,i)?a:to.current!==null?(t=Kf(t,a,l),Vn(t,i)||(Wt=!0),t):(zs&42)===0?(Wt=!0,t.memoizedState=a):(t=h0(),Me.lanes|=t,Qs|=t,i)}function cy(t,i,a,l,h){var d=K.p;K.p=d!==0&&8>d?d:8;var T=z.T,b={};z.T=b,Xf(t,!1,i,a);try{var N=h(),B=z.S;if(B!==null&&B(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Y=ww(N,l);bl(t,i,Y,Fn(t))}else bl(t,i,l,Fn(t))}catch(ne){bl(t,i,{then:function(){},status:"rejected",reason:ne},Fn())}finally{K.p=d,z.T=T}}function Rw(){}function Qf(t,i,a,l){if(t.tag!==5)throw Error(r(476));var h=hy(t).queue;cy(t,h,i,he,a===null?Rw:function(){return fy(t),a(l)})}function hy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:he},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function fy(t){var i=hy(t).next.queue;bl(t,i,{},Fn())}function Yf(){return ln(Fl)}function dy(){return Mt().memoizedState}function my(){return Mt().memoizedState}function Cw(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Fn();t=Fs(a);var l=Bs(i,t,a);l!==null&&(Bn(l,i,a),gl(l,i,a)),i={cache:xf()},t.payload=i;return}i=i.return}}function Nw(t,i,a){var l=Fn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},uc(t)?gy(i,a):(a=gf(t,i,a,l),a!==null&&(Bn(a,t,l),yy(a,i,l)))}function py(t,i,a){var l=Fn();bl(t,i,a,l)}function bl(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(uc(t))gy(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var T=i.lastRenderedState,b=d(T,a);if(h.hasEagerState=!0,h.eagerState=b,Vn(b,T))return Wu(t,i,h,0),ft===null&&Hu(),!1}catch{}finally{}if(a=gf(t,i,h,l),a!==null)return Bn(a,t,l),yy(a,i,l),!0}return!1}function Xf(t,i,a,l){if(l={lane:2,revertLane:Cd(),action:l,hasEagerState:!1,eagerState:null,next:null},uc(t)){if(i)throw Error(r(479))}else i=gf(t,a,l,2),i!==null&&Bn(i,t,2)}function uc(t){var i=t.alternate;return t===Me||i!==null&&i===Me}function gy(t,i){no=ic=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function yy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Ms(t,a)}}var cc={readContext:ln,use:rc,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},_y={readContext:ln,use:rc,useCallback:function(t,i){return Sn().memoizedState=[t,i===void 0?null:i],t},useContext:ln,useEffect:ty,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,lc(4194308,4,ry.bind(null,i,t),a)},useLayoutEffect:function(t,i){return lc(4194308,4,t,i)},useInsertionEffect:function(t,i){lc(4,2,t,i)},useMemo:function(t,i){var a=Sn();i=i===void 0?null:i;var l=t();if(sa){yn(!0);try{t()}finally{yn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=Sn();if(a!==void 0){var h=a(i);if(sa){yn(!0);try{a(i)}finally{yn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=Nw.bind(null,Me,t),[l.memoizedState,t]},useRef:function(t){var i=Sn();return t={current:t},i.memoizedState=t},useState:function(t){t=Hf(t);var i=t.queue,a=py.bind(null,Me,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:$f,useDeferredValue:function(t,i){var a=Sn();return Kf(a,t,i)},useTransition:function(){var t=Hf(!1);return t=cy.bind(null,Me,t.queue,!0,!1),Sn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Me,h=Sn();if(Ye){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ft===null)throw Error(r(349));(He&124)!==0||Ug(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,ty(Bg.bind(null,l,d,t),[t]),l.flags|=2048,so(9,oc(),Fg.bind(null,l,d,a,i),null),a},useId:function(){var t=Sn(),i=ft.identifierPrefix;if(Ye){var a=fs,l=hs;a=(l&~(1<<32-jt(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=sc++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=Aw++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:Yf,useFormState:Yg,useActionState:Yg,useOptimistic:function(t){var i=Sn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Xf.bind(null,Me,!0,a),a.dispatch=i,[t,i]},useMemoCache:zf,useCacheRefresh:function(){return Sn().memoizedState=Cw.bind(null,Me)}},vy={readContext:ln,use:rc,useCallback:oy,useContext:ln,useEffect:ny,useImperativeHandle:ay,useInsertionEffect:iy,useLayoutEffect:sy,useMemo:ly,useReducer:ac,useRef:ey,useState:function(){return ac(ps)},useDebugValue:$f,useDeferredValue:function(t,i){var a=Mt();return uy(a,rt.memoizedState,t,i)},useTransition:function(){var t=ac(ps)[0],i=Mt().memoizedState;return[typeof t=="boolean"?t:Tl(t),i]},useSyncExternalStore:jg,useId:dy,useHostTransitionStatus:Yf,useFormState:Xg,useActionState:Xg,useOptimistic:function(t,i){var a=Mt();return qg(a,rt,t,i)},useMemoCache:zf,useCacheRefresh:my},Dw={readContext:ln,use:rc,useCallback:oy,useContext:ln,useEffect:ny,useImperativeHandle:ay,useInsertionEffect:iy,useLayoutEffect:sy,useMemo:ly,useReducer:qf,useRef:ey,useState:function(){return qf(ps)},useDebugValue:$f,useDeferredValue:function(t,i){var a=Mt();return rt===null?Kf(a,t,i):uy(a,rt.memoizedState,t,i)},useTransition:function(){var t=qf(ps)[0],i=Mt().memoizedState;return[typeof t=="boolean"?t:Tl(t),i]},useSyncExternalStore:jg,useId:dy,useHostTransitionStatus:Yf,useFormState:Jg,useActionState:Jg,useOptimistic:function(t,i){var a=Mt();return rt!==null?qg(a,rt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:zf,useCacheRefresh:my},ro=null,wl=0;function hc(t){var i=wl;return wl+=1,ro===null&&(ro=[]),Ng(ro,t,i)}function Al(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function fc(t,i){throw i.$$typeof===I?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Ty(t){var i=t._init;return i(t._payload)}function Ey(t){function i(L,k){if(t){var F=L.deletions;F===null?(L.deletions=[k],L.flags|=16):F.push(k)}}function a(L,k){if(!t)return null;for(;k!==null;)i(L,k),k=k.sibling;return null}function l(L){for(var k=new Map;L!==null;)L.key!==null?k.set(L.key,L):k.set(L.index,L),L=L.sibling;return k}function h(L,k){return L=cs(L,k),L.index=0,L.sibling=null,L}function d(L,k,F){return L.index=F,t?(F=L.alternate,F!==null?(F=F.index,F<k?(L.flags|=67108866,k):F):(L.flags|=67108866,k)):(L.flags|=1048576,k)}function T(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function b(L,k,F,J){return k===null||k.tag!==6?(k=_f(F,L.mode,J),k.return=L,k):(k=h(k,F),k.return=L,k)}function N(L,k,F,J){var Te=F.type;return Te===U?Y(L,k,F.props.children,J,F.key):k!==null&&(k.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===x&&Ty(Te)===k.type)?(k=h(k,F.props),Al(k,F),k.return=L,k):(k=Ku(F.type,F.key,F.props,null,L.mode,J),Al(k,F),k.return=L,k)}function B(L,k,F,J){return k===null||k.tag!==4||k.stateNode.containerInfo!==F.containerInfo||k.stateNode.implementation!==F.implementation?(k=vf(F,L.mode,J),k.return=L,k):(k=h(k,F.children||[]),k.return=L,k)}function Y(L,k,F,J,Te){return k===null||k.tag!==7?(k=Yr(F,L.mode,J,Te),k.return=L,k):(k=h(k,F),k.return=L,k)}function ne(L,k,F){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=_f(""+k,L.mode,F),k.return=L,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case S:return F=Ku(k.type,k.key,k.props,null,L.mode,F),Al(F,k),F.return=L,F;case P:return k=vf(k,L.mode,F),k.return=L,k;case x:var J=k._init;return k=J(k._payload),ne(L,k,F)}if(ve(k)||V(k))return k=Yr(k,L.mode,F,null),k.return=L,k;if(typeof k.then=="function")return ne(L,hc(k),F);if(k.$$typeof===te)return ne(L,Zu(L,k),F);fc(L,k)}return null}function G(L,k,F,J){var Te=k!==null?k.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Te!==null?null:b(L,k,""+F,J);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case S:return F.key===Te?N(L,k,F,J):null;case P:return F.key===Te?B(L,k,F,J):null;case x:return Te=F._init,F=Te(F._payload),G(L,k,F,J)}if(ve(F)||V(F))return Te!==null?null:Y(L,k,F,J,null);if(typeof F.then=="function")return G(L,k,hc(F),J);if(F.$$typeof===te)return G(L,k,Zu(L,F),J);fc(L,F)}return null}function q(L,k,F,J,Te){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return L=L.get(F)||null,b(k,L,""+J,Te);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case S:return L=L.get(J.key===null?F:J.key)||null,N(k,L,J,Te);case P:return L=L.get(J.key===null?F:J.key)||null,B(k,L,J,Te);case x:var Pe=J._init;return J=Pe(J._payload),q(L,k,F,J,Te)}if(ve(J)||V(J))return L=L.get(F)||null,Y(k,L,J,Te,null);if(typeof J.then=="function")return q(L,k,F,hc(J),Te);if(J.$$typeof===te)return q(L,k,F,Zu(k,J),Te);fc(k,J)}return null}function Ie(L,k,F,J){for(var Te=null,Pe=null,Ee=k,Ae=k=0,Kt=null;Ee!==null&&Ae<F.length;Ae++){Ee.index>Ae?(Kt=Ee,Ee=null):Kt=Ee.sibling;var Ke=G(L,Ee,F[Ae],J);if(Ke===null){Ee===null&&(Ee=Kt);break}t&&Ee&&Ke.alternate===null&&i(L,Ee),k=d(Ke,k,Ae),Pe===null?Te=Ke:Pe.sibling=Ke,Pe=Ke,Ee=Kt}if(Ae===F.length)return a(L,Ee),Ye&&Zr(L,Ae),Te;if(Ee===null){for(;Ae<F.length;Ae++)Ee=ne(L,F[Ae],J),Ee!==null&&(k=d(Ee,k,Ae),Pe===null?Te=Ee:Pe.sibling=Ee,Pe=Ee);return Ye&&Zr(L,Ae),Te}for(Ee=l(Ee);Ae<F.length;Ae++)Kt=q(Ee,L,Ae,F[Ae],J),Kt!==null&&(t&&Kt.alternate!==null&&Ee.delete(Kt.key===null?Ae:Kt.key),k=d(Kt,k,Ae),Pe===null?Te=Kt:Pe.sibling=Kt,Pe=Kt);return t&&Ee.forEach(function(sr){return i(L,sr)}),Ye&&Zr(L,Ae),Te}function we(L,k,F,J){if(F==null)throw Error(r(151));for(var Te=null,Pe=null,Ee=k,Ae=k=0,Kt=null,Ke=F.next();Ee!==null&&!Ke.done;Ae++,Ke=F.next()){Ee.index>Ae?(Kt=Ee,Ee=null):Kt=Ee.sibling;var sr=G(L,Ee,Ke.value,J);if(sr===null){Ee===null&&(Ee=Kt);break}t&&Ee&&sr.alternate===null&&i(L,Ee),k=d(sr,k,Ae),Pe===null?Te=sr:Pe.sibling=sr,Pe=sr,Ee=Kt}if(Ke.done)return a(L,Ee),Ye&&Zr(L,Ae),Te;if(Ee===null){for(;!Ke.done;Ae++,Ke=F.next())Ke=ne(L,Ke.value,J),Ke!==null&&(k=d(Ke,k,Ae),Pe===null?Te=Ke:Pe.sibling=Ke,Pe=Ke);return Ye&&Zr(L,Ae),Te}for(Ee=l(Ee);!Ke.done;Ae++,Ke=F.next())Ke=q(Ee,L,Ae,Ke.value,J),Ke!==null&&(t&&Ke.alternate!==null&&Ee.delete(Ke.key===null?Ae:Ke.key),k=d(Ke,k,Ae),Pe===null?Te=Ke:Pe.sibling=Ke,Pe=Ke);return t&&Ee.forEach(function(OA){return i(L,OA)}),Ye&&Zr(L,Ae),Te}function ot(L,k,F,J){if(typeof F=="object"&&F!==null&&F.type===U&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case S:e:{for(var Te=F.key;k!==null;){if(k.key===Te){if(Te=F.type,Te===U){if(k.tag===7){a(L,k.sibling),J=h(k,F.props.children),J.return=L,L=J;break e}}else if(k.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===x&&Ty(Te)===k.type){a(L,k.sibling),J=h(k,F.props),Al(J,F),J.return=L,L=J;break e}a(L,k);break}else i(L,k);k=k.sibling}F.type===U?(J=Yr(F.props.children,L.mode,J,F.key),J.return=L,L=J):(J=Ku(F.type,F.key,F.props,null,L.mode,J),Al(J,F),J.return=L,L=J)}return T(L);case P:e:{for(Te=F.key;k!==null;){if(k.key===Te)if(k.tag===4&&k.stateNode.containerInfo===F.containerInfo&&k.stateNode.implementation===F.implementation){a(L,k.sibling),J=h(k,F.children||[]),J.return=L,L=J;break e}else{a(L,k);break}else i(L,k);k=k.sibling}J=vf(F,L.mode,J),J.return=L,L=J}return T(L);case x:return Te=F._init,F=Te(F._payload),ot(L,k,F,J)}if(ve(F))return Ie(L,k,F,J);if(V(F)){if(Te=V(F),typeof Te!="function")throw Error(r(150));return F=Te.call(F),we(L,k,F,J)}if(typeof F.then=="function")return ot(L,k,hc(F),J);if(F.$$typeof===te)return ot(L,k,Zu(L,F),J);fc(L,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,k!==null&&k.tag===6?(a(L,k.sibling),J=h(k,F),J.return=L,L=J):(a(L,k),J=_f(F,L.mode,J),J.return=L,L=J),T(L)):a(L,k)}return function(L,k,F,J){try{wl=0;var Te=ot(L,k,F,J);return ro=null,Te}catch(Ee){if(Ee===ml||Ee===ec)throw Ee;var Pe=kn(29,Ee,null,L.mode);return Pe.lanes=J,Pe.return=L,Pe}finally{}}}var ao=Ey(!0),by=Ey(!1),si=W(null),Vi=null;function Gs(t){var i=t.alternate;se(zt,zt.current&1),se(si,t),Vi===null&&(i===null||to.current!==null||i.memoizedState!==null)&&(Vi=t)}function wy(t){if(t.tag===22){if(se(zt,zt.current),se(si,t),Vi===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(Vi=t)}}else qs()}function qs(){se(zt,zt.current),se(si,si.current)}function gs(t){ce(si),Vi===t&&(Vi=null),ce(zt)}var zt=W(0);function dc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Bd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Zf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Jf={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Fn(),h=Fs(l);h.payload=i,a!=null&&(h.callback=a),i=Bs(t,h,l),i!==null&&(Bn(i,t,l),gl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Fn(),h=Fs(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Bs(t,h,l),i!==null&&(Bn(i,t,l),gl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Fn(),l=Fs(a);l.tag=2,i!=null&&(l.callback=i),i=Bs(t,l,a),i!==null&&(Bn(i,t,a),gl(i,t,a))}};function Ay(t,i,a,l,h,d,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,T):i.prototype&&i.prototype.isPureReactComponent?!al(a,l)||!al(h,d):!0}function Sy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Jf.enqueueReplaceState(i,i.state,null)}function ra(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var mc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function xy(t){mc(t)}function Iy(t){console.error(t)}function Ry(t){mc(t)}function pc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Cy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ed(t,i,a){return a=Fs(a),a.tag=3,a.payload={element:null},a.callback=function(){pc(t,i)},a}function Ny(t){return t=Fs(t),t.tag=3,t}function Dy(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){Cy(i,a,l)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Cy(i,a,l),typeof h!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function Ow(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&hl(i,a,h,!0),a=si.current,a!==null){switch(a.tag){case 13:return Vi===null?Ad():a.alternate===null&&It===0&&(It=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Cf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),xd(t,l,h)),!1;case 22:return a.flags|=65536,l===Cf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),xd(t,l,h)),!1}throw Error(r(435,a.tag))}return xd(t,l,h),Ad(),!1}if(Ye)return i=si.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==bf&&(t=Error(r(422),{cause:l}),cl(ei(t,a)))):(l!==bf&&(i=Error(r(423),{cause:l}),cl(ei(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=ei(l,a),h=ed(t.stateNode,l,h),Of(t,h),It!==4&&(It=2)),!1;var d=Error(r(520),{cause:l});if(d=ei(d,a),Dl===null?Dl=[d]:Dl.push(d),It!==4&&(It=2),i===null)return!0;l=ei(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=ed(a.stateNode,l,t),Of(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ys===null||!Ys.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Ny(h),Dy(h,t,a,l),Of(a,h),!1}a=a.return}while(a!==null);return!1}var Oy=Error(r(461)),Wt=!1;function en(t,i,a,l){i.child=t===null?by(i,null,a,l):ao(i,t.child,a,l)}function My(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var T={};for(var b in l)b!=="ref"&&(T[b]=l[b])}else T=l;return na(i),l=Lf(t,i,a,T,d,h),b=jf(),t!==null&&!Wt?(Uf(t,i,h),ys(t,i,h)):(Ye&&b&&Tf(i),i.flags|=1,en(t,i,l,h),i.child)}function Py(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!yf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Vy(t,i,d,l,h)):(t=Ku(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!ld(t,h)){var T=d.memoizedProps;if(a=a.compare,a=a!==null?a:al,a(T,l)&&t.ref===i.ref)return ys(t,i,h)}return i.flags|=1,t=cs(d,l),t.ref=i.ref,t.return=i,i.child=t}function Vy(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(al(d,l)&&t.ref===i.ref)if(Wt=!1,i.pendingProps=l=d,ld(t,h))(t.flags&131072)!==0&&(Wt=!0);else return i.lanes=t.lanes,ys(t,i,h)}return td(t,i,a,l,h)}function ky(t,i,a){var l=i.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return Ly(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ju(i,d!==null?d.cachePool:null),d!==null?Vg(i,d):Pf(),wy(i);else return i.lanes=i.childLanes=536870912,Ly(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Ju(i,d.cachePool),Vg(i,d),qs(),i.memoizedState=null):(t!==null&&Ju(i,null),Pf(),qs());return en(t,i,h,a),i.child}function Ly(t,i,a,l){var h=Rf();return h=h===null?null:{parent:Bt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&Ju(i,null),Pf(),wy(i),t!==null&&hl(t,i,l,!0),null}function gc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function td(t,i,a,l,h){return na(i),a=Lf(t,i,a,l,void 0,h),l=jf(),t!==null&&!Wt?(Uf(t,i,h),ys(t,i,h)):(Ye&&l&&Tf(i),i.flags|=1,en(t,i,a,h),i.child)}function jy(t,i,a,l,h,d){return na(i),i.updateQueue=null,a=Lg(i,l,a,h),kg(t),l=jf(),t!==null&&!Wt?(Uf(t,i,d),ys(t,i,d)):(Ye&&l&&Tf(i),i.flags|=1,en(t,i,a,d),i.child)}function Uy(t,i,a,l,h){if(na(i),i.stateNode===null){var d=Ya,T=a.contextType;typeof T=="object"&&T!==null&&(d=ln(T)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Jf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Nf(i),T=a.contextType,d.context=typeof T=="object"&&T!==null?ln(T):Ya,d.state=i.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Zf(i,a,T,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(T=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),T!==d.state&&Jf.enqueueReplaceState(d,d.state,null),_l(i,l,d,h),yl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,N=ra(a,b);d.props=N;var B=d.context,Y=a.contextType;T=Ya,typeof Y=="object"&&Y!==null&&(T=ln(Y));var ne=a.getDerivedStateFromProps;Y=typeof ne=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,Y||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||B!==T)&&Sy(i,d,l,T),Us=!1;var G=i.memoizedState;d.state=G,_l(i,l,d,h),yl(),B=i.memoizedState,b||G!==B||Us?(typeof ne=="function"&&(Zf(i,a,ne,l),B=i.memoizedState),(N=Us||Ay(i,a,N,l,G,B,T))?(Y||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),d.props=l,d.state=B,d.context=T,l=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Df(t,i),T=i.memoizedProps,Y=ra(a,T),d.props=Y,ne=i.pendingProps,G=d.context,B=a.contextType,N=Ya,typeof B=="object"&&B!==null&&(N=ln(B)),b=a.getDerivedStateFromProps,(B=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T!==ne||G!==N)&&Sy(i,d,l,N),Us=!1,G=i.memoizedState,d.state=G,_l(i,l,d,h),yl();var q=i.memoizedState;T!==ne||G!==q||Us||t!==null&&t.dependencies!==null&&Xu(t.dependencies)?(typeof b=="function"&&(Zf(i,a,b,l),q=i.memoizedState),(Y=Us||Ay(i,a,Y,l,G,q,N)||t!==null&&t.dependencies!==null&&Xu(t.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,q,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,q,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=q),d.props=l,d.state=q,d.context=N,l=Y):(typeof d.componentDidUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,gc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=ao(i,t.child,null,h),i.child=ao(i,null,a,h)):en(t,i,a,h),i.memoizedState=d.state,t=i.child):t=ys(t,i,h),t}function Fy(t,i,a,l){return ul(),i.flags|=256,en(t,i,a,l),i.child}var nd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function id(t){return{baseLanes:t,cachePool:Ig()}}function sd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=ri),t}function By(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,T;if((T=d)||(T=t!==null&&t.memoizedState===null?!1:(zt.current&2)!==0),T&&(h=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ye){if(h?Gs(i):qs(),Ye){var b=xt,N;if(N=b){e:{for(N=b,b=Pi;N.nodeType!==8;){if(!b){b=null;break e}if(N=pi(N.nextSibling),N===null){b=null;break e}}b=N}b!==null?(i.memoizedState={dehydrated:b,treeContext:Xr!==null?{id:hs,overflow:fs}:null,retryLane:536870912,hydrationErrors:null},N=kn(18,null,null,0),N.stateNode=b,N.return=i,i.child=N,Tn=i,xt=null,N=!0):N=!1}N||ea(i)}if(b=i.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return Bd(b)?i.lanes=32:i.lanes=536870912,null;gs(i)}return b=l.children,l=l.fallback,h?(qs(),h=i.mode,b=yc({mode:"hidden",children:b},h),l=Yr(l,h,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,h=i.child,h.memoizedState=id(a),h.childLanes=sd(t,T,a),i.memoizedState=nd,l):(Gs(i),rd(i,b))}if(N=t.memoizedState,N!==null&&(b=N.dehydrated,b!==null)){if(d)i.flags&256?(Gs(i),i.flags&=-257,i=ad(t,i,a)):i.memoizedState!==null?(qs(),i.child=t.child,i.flags|=128,i=null):(qs(),h=l.fallback,b=i.mode,l=yc({mode:"visible",children:l.children},b),h=Yr(h,b,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,ao(i,t.child,null,a),l=i.child,l.memoizedState=id(a),l.childLanes=sd(t,T,a),i.memoizedState=nd,i=h);else if(Gs(i),Bd(b)){if(T=b.nextSibling&&b.nextSibling.dataset,T)var B=T.dgst;T=B,l=Error(r(419)),l.stack="",l.digest=T,cl({value:l,source:null,stack:null}),i=ad(t,i,a)}else if(Wt||hl(t,i,a,!1),T=(a&t.childLanes)!==0,Wt||T){if(T=ft,T!==null&&(l=a&-a,l=(l&42)!==0?1:Wn(l),l=(l&(T.suspendedLanes|a))!==0?0:l,l!==0&&l!==N.retryLane))throw N.retryLane=l,Qa(t,l),Bn(T,t,l),Oy;b.data==="$?"||Ad(),i=ad(t,i,a)}else b.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=N.treeContext,xt=pi(b.nextSibling),Tn=i,Ye=!0,Jr=null,Pi=!1,t!==null&&(ni[ii++]=hs,ni[ii++]=fs,ni[ii++]=Xr,hs=t.id,fs=t.overflow,Xr=i),i=rd(i,l.children),i.flags|=4096);return i}return h?(qs(),h=l.fallback,b=i.mode,N=t.child,B=N.sibling,l=cs(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,B!==null?h=cs(B,h):(h=Yr(h,b,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,b=t.child.memoizedState,b===null?b=id(a):(N=b.cachePool,N!==null?(B=Bt._currentValue,N=N.parent!==B?{parent:B,pool:B}:N):N=Ig(),b={baseLanes:b.baseLanes|a,cachePool:N}),h.memoizedState=b,h.childLanes=sd(t,T,a),i.memoizedState=nd,l):(Gs(i),a=t.child,t=a.sibling,a=cs(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(T=i.deletions,T===null?(i.deletions=[t],i.flags|=16):T.push(t)),i.child=a,i.memoizedState=null,a)}function rd(t,i){return i=yc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function yc(t,i){return t=kn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function ad(t,i,a){return ao(i,t.child,null,a),t=rd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function zy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Af(t.return,i,a)}function od(t,i,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function Gy(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(en(t,i,l.children,a),l=zt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zy(t,a,i);else if(t.tag===19)zy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(se(zt,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&dc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),od(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&dc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}od(i,!0,a,null,d);break;case"together":od(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ys(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Qs|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(hl(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=cs(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=cs(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function ld(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Xu(t)))}function Mw(t,i,a){switch(i.tag){case 3:Ve(i,i.stateNode.containerInfo),js(i,Bt,t.memoizedState.cache),ul();break;case 27:case 5:ct(i);break;case 4:Ve(i,i.stateNode.containerInfo);break;case 10:js(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Gs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?By(t,i,a):(Gs(i),t=ys(t,i,a),t!==null?t.sibling:null);Gs(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(hl(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return Gy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),se(zt,zt.current),l)break;return null;case 22:case 23:return i.lanes=0,ky(t,i,a);case 24:js(i,Bt,t.memoizedState.cache)}return ys(t,i,a)}function qy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Wt=!0;else{if(!ld(t,a)&&(i.flags&128)===0)return Wt=!1,Mw(t,i,a);Wt=(t.flags&131072)!==0}else Wt=!1,Ye&&(i.flags&1048576)!==0&&Tg(i,Yu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")yf(l)?(t=ra(l,t),i.tag=1,i=Uy(null,i,l,t,a)):(i.tag=0,i=td(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===Z){i.tag=11,i=My(null,i,l,t,a);break e}else if(h===O){i.tag=14,i=Py(null,i,l,t,a);break e}}throw i=Ne(l)||l,Error(r(306,i,""))}}return i;case 0:return td(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=ra(l,i.pendingProps),Uy(t,i,l,h,a);case 3:e:{if(Ve(i,i.stateNode.containerInfo),t===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Df(t,i),_l(i,l,null,a);var T=i.memoizedState;if(l=T.cache,js(i,Bt,l),l!==d.cache&&Sf(i,[Bt],a,!0),yl(),l=T.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Fy(t,i,l,a);break e}else if(l!==h){h=ei(Error(r(424)),i),cl(h),i=Fy(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(xt=pi(t.firstChild),Tn=i,Ye=!0,Jr=null,Pi=!0,a=by(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ul(),l===h){i=ys(t,i,a);break e}en(t,i,l,a)}i=i.child}return i;case 26:return gc(t,i),t===null?(a=K0(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ye||(a=i.type,t=i.pendingProps,l=Dc(_e.current).createElement(a),l[_t]=i,l[St]=t,nn(l,a,t),Et(l),i.stateNode=l):i.memoizedState=K0(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return ct(i),t===null&&Ye&&(l=i.stateNode=H0(i.type,i.pendingProps,_e.current),Tn=i,Pi=!0,h=xt,Js(i.type)?(zd=h,xt=pi(l.firstChild)):xt=h),en(t,i,i.pendingProps.children,a),gc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ye&&((h=l=xt)&&(l=oA(l,i.type,i.pendingProps,Pi),l!==null?(i.stateNode=l,Tn=i,xt=pi(l.firstChild),Pi=!1,h=!0):h=!1),h||ea(i)),ct(i),h=i.type,d=i.pendingProps,T=t!==null?t.memoizedProps:null,l=d.children,jd(h,d)?l=null:T!==null&&jd(h,T)&&(i.flags|=32),i.memoizedState!==null&&(h=Lf(t,i,Sw,null,null,a),Fl._currentValue=h),gc(t,i),en(t,i,l,a),i.child;case 6:return t===null&&Ye&&((t=a=xt)&&(a=lA(a,i.pendingProps,Pi),a!==null?(i.stateNode=a,Tn=i,xt=null,t=!0):t=!1),t||ea(i)),null;case 13:return By(t,i,a);case 4:return Ve(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=ao(i,null,l,a):en(t,i,l,a),i.child;case 11:return My(t,i,i.type,i.pendingProps,a);case 7:return en(t,i,i.pendingProps,a),i.child;case 8:return en(t,i,i.pendingProps.children,a),i.child;case 12:return en(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,js(i,i.type,l.value),en(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,na(i),h=ln(h),l=l(h),i.flags|=1,en(t,i,l,a),i.child;case 14:return Py(t,i,i.type,i.pendingProps,a);case 15:return Vy(t,i,i.type,i.pendingProps,a);case 19:return Gy(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=yc(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=cs(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return ky(t,i,a);case 24:return na(i),l=ln(Bt),t===null?(h=Rf(),h===null&&(h=ft,d=xf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Nf(i),js(i,Bt,h)):((t.lanes&a)!==0&&(Df(t,i),_l(i,null,null,a),yl()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),js(i,Bt,l)):(l=d.cache,js(i,Bt,l),l!==h.cache&&Sf(i,[Bt],a,!0))),en(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function _s(t){t.flags|=4}function Hy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!J0(i)){if(i=si.current,i!==null&&((He&4194048)===He?Vi!==null:(He&62914560)!==He&&(He&536870912)===0||i!==Vi))throw pl=Cf,Rg;t.flags|=8192}}function _c(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Pr():536870912,t.lanes|=i,co|=i)}function Sl(t,i){if(!Ye)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function bt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function Pw(t,i,a){var l=i.pendingProps;switch(Ef(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(i),null;case 1:return bt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ms(Bt),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ll(i)?_s(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,wg())),bt(i),null;case 26:return a=i.memoizedState,t===null?(_s(i),a!==null?(bt(i),Hy(i,a)):(bt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(_s(i),bt(i),Hy(i,a)):(bt(i),i.flags&=-16777217):(t.memoizedProps!==l&&_s(i),bt(i),i.flags&=-16777217),null;case 27:Tt(i),a=_e.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&_s(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return bt(i),null}t=me.current,ll(i)?Eg(i):(t=H0(h,l,a),i.stateNode=t,_s(i))}return bt(i),null;case 5:if(Tt(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&_s(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return bt(i),null}if(t=me.current,ll(i))Eg(i);else{switch(h=Dc(_e.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[_t]=i,t[St]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(nn(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&_s(i)}}return bt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&_s(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(t=_e.current,ll(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Tn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[_t]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||j0(t.nodeValue,a)),t||ea(i)}else t=Dc(t).createTextNode(l),t[_t]=i,i.stateNode=t}return bt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=ll(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[_t]=i}else ul(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;bt(i),h=!1}else h=wg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(gs(i),i):(gs(i),null)}if(gs(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),_c(i,i.updateQueue),bt(i),null;case 4:return ut(),t===null&&Md(i.stateNode.containerInfo),bt(i),null;case 10:return ms(i.type),bt(i),null;case 19:if(ce(zt),h=i.memoizedState,h===null)return bt(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)Sl(h,!1);else{if(It!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=dc(t),d!==null){for(i.flags|=128,Sl(h,!1),t=d.updateQueue,i.updateQueue=t,_c(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)vg(a,t),a=a.sibling;return se(zt,zt.current&1|2),i.child}t=t.sibling}h.tail!==null&&gn()>Ec&&(i.flags|=128,l=!0,Sl(h,!1),i.lanes=4194304)}else{if(!l)if(t=dc(d),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,_c(i,t),Sl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Ye)return bt(i),null}else 2*gn()-h.renderingStartTime>Ec&&a!==536870912&&(i.flags|=128,l=!0,Sl(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=gn(),i.sibling=null,t=zt.current,se(zt,l?t&1|2:t&1),i):(bt(i),null);case 22:case 23:return gs(i),Vf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(bt(i),i.subtreeFlags&6&&(i.flags|=8192)):bt(i),a=i.updateQueue,a!==null&&_c(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&ce(ia),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ms(Bt),bt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function Vw(t,i){switch(Ef(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ms(Bt),ut(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Tt(i),null;case 13:if(gs(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));ul()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ce(zt),null;case 4:return ut(),null;case 10:return ms(i.type),null;case 22:case 23:return gs(i),Vf(),t!==null&&ce(ia),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ms(Bt),null;case 25:return null;default:return null}}function Wy(t,i){switch(Ef(i),i.tag){case 3:ms(Bt),ut();break;case 26:case 27:case 5:Tt(i);break;case 4:ut();break;case 13:gs(i);break;case 19:ce(zt);break;case 10:ms(i.type);break;case 22:case 23:gs(i),Vf(),t!==null&&ce(ia);break;case 24:ms(Bt)}}function xl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,T=a.inst;l=d(),T.destroy=l}a=a.next}while(a!==h)}}catch(b){lt(i,i.return,b)}}function Hs(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var T=l.inst,b=T.destroy;if(b!==void 0){T.destroy=void 0,h=i;var N=a,B=b;try{B()}catch(Y){lt(h,N,Y)}}}l=l.next}while(l!==d)}}catch(Y){lt(i,i.return,Y)}}function $y(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Pg(i,a)}catch(l){lt(t,t.return,l)}}}function Ky(t,i,a){a.props=ra(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){lt(t,i,l)}}function Il(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){lt(t,i,h)}}function ki(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){lt(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){lt(t,i,h)}else a.current=null}function Qy(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){lt(t,t.return,h)}}function ud(t,i,a){try{var l=t.stateNode;nA(l,t.type,a,i),l[St]=i}catch(h){lt(t,t.return,h)}}function Yy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Js(t.type)||t.tag===4}function cd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Yy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Js(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Nc));else if(l!==4&&(l===27&&Js(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(hd(t,i,a),t=t.sibling;t!==null;)hd(t,i,a),t=t.sibling}function vc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Js(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(vc(t,i,a),t=t.sibling;t!==null;)vc(t,i,a),t=t.sibling}function Xy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);nn(i,l,a),i[_t]=t,i[St]=a}catch(d){lt(t,t.return,d)}}var vs=!1,Ct=!1,fd=!1,Zy=typeof WeakSet=="function"?WeakSet:Set,$t=null;function kw(t,i){if(t=t.containerInfo,kd=Lc,t=ug(t),cf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var T=0,b=-1,N=-1,B=0,Y=0,ne=t,G=null;t:for(;;){for(var q;ne!==a||h!==0&&ne.nodeType!==3||(b=T+h),ne!==d||l!==0&&ne.nodeType!==3||(N=T+l),ne.nodeType===3&&(T+=ne.nodeValue.length),(q=ne.firstChild)!==null;)G=ne,ne=q;for(;;){if(ne===t)break t;if(G===a&&++B===h&&(b=T),G===d&&++Y===l&&(N=T),(q=ne.nextSibling)!==null)break;ne=G,G=ne.parentNode}ne=q}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ld={focusedElem:t,selectionRange:a},Lc=!1,$t=i;$t!==null;)if(i=$t,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,$t=t;else for(;$t!==null;){switch(i=$t,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Ie=ra(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ie,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(we){lt(a,a.return,we)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Fd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Fd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,$t=t;break}$t=i.return}}function Jy(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ws(t,a),l&4&&xl(5,a);break;case 1:if(Ws(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(T){lt(a,a.return,T)}else{var h=ra(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(T){lt(a,a.return,T)}}l&64&&$y(a),l&512&&Il(a,a.return);break;case 3:if(Ws(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Pg(t,i)}catch(T){lt(a,a.return,T)}}break;case 27:i===null&&l&4&&Xy(a);case 26:case 5:Ws(t,a),i===null&&l&4&&Qy(a),l&512&&Il(a,a.return);break;case 12:Ws(t,a);break;case 13:Ws(t,a),l&4&&n0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Hw.bind(null,a),uA(t,a))));break;case 22:if(l=a.memoizedState!==null||vs,!l){i=i!==null&&i.memoizedState!==null||Ct,h=vs;var d=Ct;vs=l,(Ct=i)&&!d?$s(t,a,(a.subtreeFlags&8772)!==0):Ws(t,a),vs=h,Ct=d}break;case 30:break;default:Ws(t,a)}}function e0(t){var i=t.alternate;i!==null&&(t.alternate=null,e0(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&$n(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var vt=null,xn=!1;function Ts(t,i,a){for(a=a.child;a!==null;)t0(t,i,a),a=a.sibling}function t0(t,i,a){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(mt,a)}catch{}switch(a.tag){case 26:Ct||ki(a,i),Ts(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ct||ki(a,i);var l=vt,h=xn;Js(a.type)&&(vt=a.stateNode,xn=!1),Ts(t,i,a),kl(a.stateNode),vt=l,xn=h;break;case 5:Ct||ki(a,i);case 6:if(l=vt,h=xn,vt=null,Ts(t,i,a),vt=l,xn=h,vt!==null)if(xn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(a.stateNode)}catch(d){lt(a,i,d)}else try{vt.removeChild(a.stateNode)}catch(d){lt(a,i,d)}break;case 18:vt!==null&&(xn?(t=vt,G0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),ql(t)):G0(vt,a.stateNode));break;case 4:l=vt,h=xn,vt=a.stateNode.containerInfo,xn=!0,Ts(t,i,a),vt=l,xn=h;break;case 0:case 11:case 14:case 15:Ct||Hs(2,a,i),Ct||Hs(4,a,i),Ts(t,i,a);break;case 1:Ct||(ki(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Ky(a,i,l)),Ts(t,i,a);break;case 21:Ts(t,i,a);break;case 22:Ct=(l=Ct)||a.memoizedState!==null,Ts(t,i,a),Ct=l;break;default:Ts(t,i,a)}}function n0(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ql(t)}catch(a){lt(i,i.return,a)}}function Lw(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Zy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Zy),i;default:throw Error(r(435,t.tag))}}function dd(t,i){var a=Lw(t);i.forEach(function(l){var h=Ww.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function Ln(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,T=i,b=T;e:for(;b!==null;){switch(b.tag){case 27:if(Js(b.type)){vt=b.stateNode,xn=!1;break e}break;case 5:vt=b.stateNode,xn=!1;break e;case 3:case 4:vt=b.stateNode.containerInfo,xn=!0;break e}b=b.return}if(vt===null)throw Error(r(160));t0(d,T,h),vt=null,xn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)i0(i,t),i=i.sibling}var mi=null;function i0(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ln(i,t),jn(t),l&4&&(Hs(3,t,t.return),xl(3,t),Hs(5,t,t.return));break;case 1:Ln(i,t),jn(t),l&512&&(Ct||a===null||ki(a,a.return)),l&64&&vs&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=mi;if(Ln(i,t),jn(t),l&512&&(Ct||a===null||ki(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ts]||d[_t]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),nn(d,l,a),d[_t]=t,Et(d),l=d;break e;case"link":var T=X0("link","href",h).get(l+(a.href||""));if(T){for(var b=0;b<T.length;b++)if(d=T[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(b,1);break t}}d=h.createElement(l),nn(d,l,a),h.head.appendChild(d);break;case"meta":if(T=X0("meta","content",h).get(l+(a.content||""))){for(b=0;b<T.length;b++)if(d=T[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(b,1);break t}}d=h.createElement(l),nn(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[_t]=t,Et(d),l=d}t.stateNode=l}else Z0(h,t.type,t.stateNode);else t.stateNode=Y0(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Z0(h,t.type,t.stateNode):Y0(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&ud(t,t.memoizedProps,a.memoizedProps)}break;case 27:Ln(i,t),jn(t),l&512&&(Ct||a===null||ki(a,a.return)),a!==null&&l&4&&ud(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Ln(i,t),jn(t),l&512&&(Ct||a===null||ki(a,a.return)),t.flags&32){h=t.stateNode;try{Yn(h,"")}catch(q){lt(t,t.return,q)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,ud(t,h,a!==null?a.memoizedProps:h)),l&1024&&(fd=!0);break;case 6:if(Ln(i,t),jn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(q){lt(t,t.return,q)}}break;case 3:if(Pc=null,h=mi,mi=Oc(i.containerInfo),Ln(i,t),mi=h,jn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ql(i.containerInfo)}catch(q){lt(t,t.return,q)}fd&&(fd=!1,s0(t));break;case 4:l=mi,mi=Oc(t.stateNode.containerInfo),Ln(i,t),jn(t),mi=l;break;case 12:Ln(i,t),jn(t);break;case 13:Ln(i,t),jn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(vd=gn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,dd(t,l)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,B=vs,Y=Ct;if(vs=B||h,Ct=Y||N,Ln(i,t),Ct=Y,vs=B,jn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||N||vs||Ct||aa(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,h)T=d.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{b=N.stateNode;var ne=N.memoizedProps.style,G=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(q){lt(N,N.return,q)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(q){lt(N,N.return,q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,dd(t,a))));break;case 19:Ln(i,t),jn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,dd(t,l)));break;case 30:break;case 21:break;default:Ln(i,t),jn(t)}}function jn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Yy(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=cd(t);vc(t,d,h);break;case 5:var T=a.stateNode;a.flags&32&&(Yn(T,""),a.flags&=-33);var b=cd(t);vc(t,b,T);break;case 3:case 4:var N=a.stateNode.containerInfo,B=cd(t);hd(t,B,N);break;default:throw Error(r(161))}}catch(Y){lt(t,t.return,Y)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function s0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;s0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Ws(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Jy(t,i.alternate,i),i=i.sibling}function aa(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Hs(4,i,i.return),aa(i);break;case 1:ki(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Ky(i,i.return,a),aa(i);break;case 27:kl(i.stateNode);case 26:case 5:ki(i,i.return),aa(i);break;case 22:i.memoizedState===null&&aa(i);break;case 30:aa(i);break;default:aa(i)}t=t.sibling}}function $s(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,T=d.flags;switch(d.tag){case 0:case 11:case 15:$s(h,d,a),xl(4,d);break;case 1:if($s(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){lt(l,l.return,B)}if(l=d,h=l.updateQueue,h!==null){var b=l.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)Mg(N[h],b)}catch(B){lt(l,l.return,B)}}a&&T&64&&$y(d),Il(d,d.return);break;case 27:Xy(d);case 26:case 5:$s(h,d,a),a&&l===null&&T&4&&Qy(d),Il(d,d.return);break;case 12:$s(h,d,a);break;case 13:$s(h,d,a),a&&T&4&&n0(h,d);break;case 22:d.memoizedState===null&&$s(h,d,a),Il(d,d.return);break;case 30:break;default:$s(h,d,a)}i=i.sibling}}function md(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&fl(a))}function pd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&fl(t))}function Li(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)r0(t,i,a,l),i=i.sibling}function r0(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Li(t,i,a,l),h&2048&&xl(9,i);break;case 1:Li(t,i,a,l);break;case 3:Li(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&fl(t)));break;case 12:if(h&2048){Li(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,T=d.id,b=d.onPostCommit;typeof b=="function"&&b(T,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){lt(i,i.return,N)}}else Li(t,i,a,l);break;case 13:Li(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,T=i.alternate,i.memoizedState!==null?d._visibility&2?Li(t,i,a,l):Rl(t,i):d._visibility&2?Li(t,i,a,l):(d._visibility|=2,oo(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&md(T,i);break;case 24:Li(t,i,a,l),h&2048&&pd(i.alternate,i);break;default:Li(t,i,a,l)}}function oo(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,T=i,b=a,N=l,B=T.flags;switch(T.tag){case 0:case 11:case 15:oo(d,T,b,N,h),xl(8,T);break;case 23:break;case 22:var Y=T.stateNode;T.memoizedState!==null?Y._visibility&2?oo(d,T,b,N,h):Rl(d,T):(Y._visibility|=2,oo(d,T,b,N,h)),h&&B&2048&&md(T.alternate,T);break;case 24:oo(d,T,b,N,h),h&&B&2048&&pd(T.alternate,T);break;default:oo(d,T,b,N,h)}i=i.sibling}}function Rl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:Rl(a,l),h&2048&&md(l.alternate,l);break;case 24:Rl(a,l),h&2048&&pd(l.alternate,l);break;default:Rl(a,l)}i=i.sibling}}var Cl=8192;function lo(t){if(t.subtreeFlags&Cl)for(t=t.child;t!==null;)a0(t),t=t.sibling}function a0(t){switch(t.tag){case 26:lo(t),t.flags&Cl&&t.memoizedState!==null&&bA(mi,t.memoizedState,t.memoizedProps);break;case 5:lo(t);break;case 3:case 4:var i=mi;mi=Oc(t.stateNode.containerInfo),lo(t),mi=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Cl,Cl=16777216,lo(t),Cl=i):lo(t));break;default:lo(t)}}function o0(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Nl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];$t=l,u0(l,t)}o0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)l0(t),t=t.sibling}function l0(t){switch(t.tag){case 0:case 11:case 15:Nl(t),t.flags&2048&&Hs(9,t,t.return);break;case 3:Nl(t);break;case 12:Nl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Tc(t)):Nl(t);break;default:Nl(t)}}function Tc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];$t=l,u0(l,t)}o0(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Hs(8,i,i.return),Tc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Tc(i));break;default:Tc(i)}t=t.sibling}}function u0(t,i){for(;$t!==null;){var a=$t;switch(a.tag){case 0:case 11:case 15:Hs(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:fl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,$t=l;else e:for(a=t;$t!==null;){l=$t;var h=l.sibling,d=l.return;if(e0(l),l===a){$t=null;break e}if(h!==null){h.return=d,$t=h;break e}$t=d}}}var jw={getCacheForType:function(t){var i=ln(Bt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},Uw=typeof WeakMap=="function"?WeakMap:Map,tt=0,ft=null,Le=null,He=0,nt=0,Un=null,Ks=!1,uo=!1,gd=!1,Es=0,It=0,Qs=0,oa=0,yd=0,ri=0,co=0,Dl=null,In=null,_d=!1,vd=0,Ec=1/0,bc=null,Ys=null,tn=0,Xs=null,ho=null,fo=0,Td=0,Ed=null,c0=null,Ol=0,bd=null;function Fn(){if((tt&2)!==0&&He!==0)return He&-He;if(z.T!==null){var t=Ja;return t!==0?t:Cd()}return Xe()}function h0(){ri===0&&(ri=(He&536870912)===0||Ye?Mr():536870912);var t=si.current;return t!==null&&(t.flags|=32),ri}function Bn(t,i,a){(t===ft&&(nt===2||nt===9)||t.cancelPendingCommit!==null)&&(mo(t,0),Zs(t,He,ri,!1)),ci(t,a),((tt&2)===0||t!==ft)&&(t===ft&&((tt&2)===0&&(oa|=a),It===4&&Zs(t,He,ri,!1)),ji(t))}function f0(t,i,a){if((tt&6)!==0)throw Error(r(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||Zi(t,i),h=l?zw(t,i):Sd(t,i,!0),d=l;do{if(h===0){uo&&!l&&Zs(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!Fw(a)){h=Sd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var b=t;h=Dl;var N=b.current.memoizedState.isDehydrated;if(N&&(mo(b,T).flags|=256),T=Sd(b,T,!1),T!==2){if(gd&&!N){b.errorRecoveryDisabledLanes|=d,oa|=d,h=4;break e}d=In,In=h,d!==null&&(In===null?In=d:In.push.apply(In,d))}h=T}if(d=!1,h!==2)continue}}if(h===1){mo(t,0),Zs(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Zs(l,i,ri,!Ks);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=vd+300-gn(),10<h)){if(Zs(l,i,ri,!Ks),Si(l,0,!0)!==0)break e;l.timeoutHandle=B0(d0.bind(null,l,a,In,bc,_d,i,ri,oa,co,Ks,d,2,-0,0),h);break e}d0(l,a,In,bc,_d,i,ri,oa,co,Ks,d,0,-0,0)}}break}while(!0);ji(t)}function d0(t,i,a,l,h,d,T,b,N,B,Y,ne,G,q){if(t.timeoutHandle=-1,ne=i.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(Ul={stylesheets:null,count:0,unsuspend:EA},a0(i),ne=wA(),ne!==null)){t.cancelPendingCommit=ne(T0.bind(null,t,i,d,a,l,h,T,b,N,Y,1,G,q)),Zs(t,d,T,!B);return}T0(t,i,d,a,l,h,T,b,N)}function Fw(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Vn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Zs(t,i,a,l){i&=~yd,i&=~oa,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-jt(h),T=1<<d;l[d]=-1,h&=~T}a!==0&&Hn(t,a,i)}function wc(){return(tt&6)===0?(Ml(0),!1):!0}function wd(){if(Le!==null){if(nt===0)var t=Le.return;else t=Le,ds=ta=null,Ff(t),ro=null,wl=0,t=Le;for(;t!==null;)Wy(t.alternate,t),t=t.return;Le=null}}function mo(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,sA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),wd(),ft=t,Le=a=cs(t.current,null),He=i,nt=0,Un=null,Ks=!1,uo=Zi(t,i),gd=!1,co=ri=yd=oa=Qs=It=0,In=Dl=null,_d=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-jt(l),d=1<<h;i|=t[h],l&=~d}return Es=i,Hu(),a}function m0(t,i){Me=null,z.H=cc,i===ml||i===ec?(i=Dg(),nt=3):i===Rg?(i=Dg(),nt=4):nt=i===Oy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Un=i,Le===null&&(It=1,pc(t,ei(i,t.current)))}function p0(){var t=z.H;return z.H=cc,t===null?cc:t}function g0(){var t=z.A;return z.A=jw,t}function Ad(){It=4,Ks||(He&4194048)!==He&&si.current!==null||(uo=!0),(Qs&134217727)===0&&(oa&134217727)===0||ft===null||Zs(ft,He,ri,!1)}function Sd(t,i,a){var l=tt;tt|=2;var h=p0(),d=g0();(ft!==t||He!==i)&&(bc=null,mo(t,i)),i=!1;var T=It;e:do try{if(nt!==0&&Le!==null){var b=Le,N=Un;switch(nt){case 8:wd(),T=6;break e;case 3:case 2:case 9:case 6:si.current===null&&(i=!0);var B=nt;if(nt=0,Un=null,po(t,b,N,B),a&&uo){T=0;break e}break;default:B=nt,nt=0,Un=null,po(t,b,N,B)}}Bw(),T=It;break}catch(Y){m0(t,Y)}while(!0);return i&&t.shellSuspendCounter++,ds=ta=null,tt=l,z.H=h,z.A=d,Le===null&&(ft=null,He=0,Hu()),T}function Bw(){for(;Le!==null;)y0(Le)}function zw(t,i){var a=tt;tt|=2;var l=p0(),h=g0();ft!==t||He!==i?(bc=null,Ec=gn()+500,mo(t,i)):uo=Zi(t,i);e:do try{if(nt!==0&&Le!==null){i=Le;var d=Un;t:switch(nt){case 1:nt=0,Un=null,po(t,i,d,1);break;case 2:case 9:if(Cg(d)){nt=0,Un=null,_0(i);break}i=function(){nt!==2&&nt!==9||ft!==t||(nt=7),ji(t)},d.then(i,i);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:Cg(d)?(nt=0,Un=null,_0(i)):(nt=0,Un=null,po(t,i,d,7));break;case 5:var T=null;switch(Le.tag){case 26:T=Le.memoizedState;case 5:case 27:var b=Le;if(!T||J0(T)){nt=0,Un=null;var N=b.sibling;if(N!==null)Le=N;else{var B=b.return;B!==null?(Le=B,Ac(B)):Le=null}break t}}nt=0,Un=null,po(t,i,d,5);break;case 6:nt=0,Un=null,po(t,i,d,6);break;case 8:wd(),It=6;break e;default:throw Error(r(462))}}Gw();break}catch(Y){m0(t,Y)}while(!0);return ds=ta=null,z.H=l,z.A=h,tt=a,Le!==null?0:(ft=null,He=0,Hu(),It)}function Gw(){for(;Le!==null&&!bi();)y0(Le)}function y0(t){var i=qy(t.alternate,t,Es);t.memoizedProps=t.pendingProps,i===null?Ac(t):Le=i}function _0(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=jy(a,i,i.pendingProps,i.type,void 0,He);break;case 11:i=jy(a,i,i.pendingProps,i.type.render,i.ref,He);break;case 5:Ff(i);default:Wy(a,i),i=Le=vg(i,Es),i=qy(a,i,Es)}t.memoizedProps=t.pendingProps,i===null?Ac(t):Le=i}function po(t,i,a,l){ds=ta=null,Ff(i),ro=null,wl=0;var h=i.return;try{if(Ow(t,h,i,a,He)){It=1,pc(t,ei(a,t.current)),Le=null;return}}catch(d){if(h!==null)throw Le=h,d;It=1,pc(t,ei(a,t.current)),Le=null;return}i.flags&32768?(Ye||l===1?t=!0:uo||(He&536870912)!==0?t=!1:(Ks=t=!0,(l===2||l===9||l===3||l===6)&&(l=si.current,l!==null&&l.tag===13&&(l.flags|=16384))),v0(i,t)):Ac(i)}function Ac(t){var i=t;do{if((i.flags&32768)!==0){v0(i,Ks);return}t=i.return;var a=Pw(i.alternate,i,Es);if(a!==null){Le=a;return}if(i=i.sibling,i!==null){Le=i;return}Le=i=t}while(i!==null);It===0&&(It=5)}function v0(t,i){do{var a=Vw(t.alternate,t);if(a!==null){a.flags&=32767,Le=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Le=t;return}Le=t=a}while(t!==null);It=6,Le=null}function T0(t,i,a,l,h,d,T,b,N){t.cancelPendingCommit=null;do Sc();while(tn!==0);if((tt&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=pf,es(t,a,d,T,b,N),t===ft&&(Le=ft=null,He=0),ho=i,Xs=t,fo=a,Td=d,Ed=h,c0=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,$w(wi,function(){return S0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=z.T,z.T=null,h=K.p,K.p=2,T=tt,tt|=4;try{kw(t,i,a)}finally{tt=T,K.p=h,z.T=l}}tn=1,E0(),b0(),w0()}}function E0(){if(tn===1){tn=0;var t=Xs,i=ho,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=z.T,z.T=null;var l=K.p;K.p=2;var h=tt;tt|=4;try{i0(i,t);var d=Ld,T=ug(t.containerInfo),b=d.focusedElem,N=d.selectionRange;if(T!==b&&b&&b.ownerDocument&&lg(b.ownerDocument.documentElement,b)){if(N!==null&&cf(b)){var B=N.start,Y=N.end;if(Y===void 0&&(Y=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min(Y,b.value.length);else{var ne=b.ownerDocument||document,G=ne&&ne.defaultView||window;if(G.getSelection){var q=G.getSelection(),Ie=b.textContent.length,we=Math.min(N.start,Ie),ot=N.end===void 0?we:Math.min(N.end,Ie);!q.extend&&we>ot&&(T=ot,ot=we,we=T);var L=og(b,we),k=og(b,ot);if(L&&k&&(q.rangeCount!==1||q.anchorNode!==L.node||q.anchorOffset!==L.offset||q.focusNode!==k.node||q.focusOffset!==k.offset)){var F=ne.createRange();F.setStart(L.node,L.offset),q.removeAllRanges(),we>ot?(q.addRange(F),q.extend(k.node,k.offset)):(F.setEnd(k.node,k.offset),q.addRange(F))}}}}for(ne=[],q=b;q=q.parentNode;)q.nodeType===1&&ne.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ne.length;b++){var J=ne[b];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Lc=!!kd,Ld=kd=null}finally{tt=h,K.p=l,z.T=a}}t.current=i,tn=2}}function b0(){if(tn===2){tn=0;var t=Xs,i=ho,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=z.T,z.T=null;var l=K.p;K.p=2;var h=tt;tt|=4;try{Jy(t,i.alternate,i)}finally{tt=h,K.p=l,z.T=a}}tn=3}}function w0(){if(tn===4||tn===3){tn=0,Ia();var t=Xs,i=ho,a=fo,l=c0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?tn=5:(tn=0,ho=Xs=null,A0(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ys=null),Ps(a),i=i.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(mt,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=z.T,h=K.p,K.p=2,z.T=null;try{for(var d=t.onRecoverableError,T=0;T<l.length;T++){var b=l[T];d(b.value,{componentStack:b.stack})}}finally{z.T=i,K.p=h}}(fo&3)!==0&&Sc(),ji(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===bd?Ol++:(Ol=0,bd=t):Ol=0,Ml(0)}}function A0(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,fl(i)))}function Sc(t){return E0(),b0(),w0(),S0()}function S0(){if(tn!==5)return!1;var t=Xs,i=Td;Td=0;var a=Ps(fo),l=z.T,h=K.p;try{K.p=32>a?32:a,z.T=null,a=Ed,Ed=null;var d=Xs,T=fo;if(tn=0,ho=Xs=null,fo=0,(tt&6)!==0)throw Error(r(331));var b=tt;if(tt|=4,l0(d.current),r0(d,d.current,T,a),tt=b,Ml(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(mt,d)}catch{}return!0}finally{K.p=h,z.T=l,A0(t,i)}}function x0(t,i,a){i=ei(a,i),i=ed(t.stateNode,i,2),t=Bs(t,i,2),t!==null&&(ci(t,2),ji(t))}function lt(t,i,a){if(t.tag===3)x0(t,t,a);else for(;i!==null;){if(i.tag===3){x0(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ys===null||!Ys.has(l))){t=ei(a,t),a=Ny(2),l=Bs(i,a,2),l!==null&&(Dy(a,l,i,t),ci(l,2),ji(l));break}}i=i.return}}function xd(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new Uw;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(gd=!0,h.add(a),t=qw.bind(null,t,i,a),i.then(t,t))}function qw(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ft===t&&(He&a)===a&&(It===4||It===3&&(He&62914560)===He&&300>gn()-vd?(tt&2)===0&&mo(t,0):yd|=a,co===He&&(co=0)),ji(t)}function I0(t,i){i===0&&(i=Pr()),t=Qa(t,i),t!==null&&(ci(t,i),ji(t))}function Hw(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),I0(t,a)}function Ww(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),I0(t,a)}function $w(t,i){return on(t,i)}var xc=null,go=null,Id=!1,Ic=!1,Rd=!1,la=0;function ji(t){t!==go&&t.next===null&&(go===null?xc=go=t:go=go.next=t),Ic=!0,Id||(Id=!0,Qw())}function Ml(t,i){if(!Rd&&Ic){Rd=!0;do for(var a=!1,l=xc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var T=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-jt(42|t)+1)-1,d&=h&~(T&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,D0(l,d))}else d=He,d=Si(l,l===ft?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Zi(l,d)||(a=!0,D0(l,d));l=l.next}while(a);Rd=!1}}function Kw(){R0()}function R0(){Ic=Id=!1;var t=0;la!==0&&(iA()&&(t=la),la=0);for(var i=gn(),a=null,l=xc;l!==null;){var h=l.next,d=C0(l,i);d===0?(l.next=null,a===null?xc=h:a.next=h,h===null&&(go=a)):(a=l,(t!==0||(d&3)!==0)&&(Ic=!0)),l=h}Ml(t)}function C0(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var T=31-jt(d),b=1<<T,N=h[T];N===-1?((b&a)===0||(b&l)!==0)&&(h[T]=Ji(b,i)):N<=i&&(t.expiredLanes|=b),d&=~b}if(i=ft,a=He,a=Si(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(nt===2||nt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&qn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Zi(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&qn(l),Ps(a)){case 2:case 8:a=Os;break;case 32:a=wi;break;case 268435456:a=Qi;break;default:a=wi}return l=N0.bind(null,t),a=on(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&qn(l),t.callbackPriority=2,t.callbackNode=null,2}function N0(t,i){if(tn!==0&&tn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Sc()&&t.callbackNode!==a)return null;var l=He;return l=Si(t,t===ft?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(f0(t,l,i),C0(t,gn()),t.callbackNode!=null&&t.callbackNode===a?N0.bind(null,t):null)}function D0(t,i){if(Sc())return null;f0(t,i,!0)}function Qw(){rA(function(){(tt&6)!==0?on(Ds,Kw):R0()})}function Cd(){return la===0&&(la=Mr()),la}function O0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:La(""+t)}function M0(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function Yw(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=O0((h[St]||null).action),T=l.submitter;T&&(i=(i=T[St]||null)?O0(i.formAction):T.getAttribute("formAction"),i!==null&&(d=i,T=null));var b=new ja("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(la!==0){var N=T?M0(h,T):new FormData(h);Qf(a,{pending:!0,data:N,method:h.method,action:d},null,N)}}else typeof d=="function"&&(b.preventDefault(),N=T?M0(h,T):new FormData(h),Qf(a,{pending:!0,data:N,method:h.method,action:d},d,N))},currentTarget:h}]})}}for(var Nd=0;Nd<mf.length;Nd++){var Dd=mf[Nd],Xw=Dd.toLowerCase(),Zw=Dd[0].toUpperCase()+Dd.slice(1);di(Xw,"on"+Zw)}di(fg,"onAnimationEnd"),di(dg,"onAnimationIteration"),di(mg,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(pw,"onTransitionRun"),di(gw,"onTransitionStart"),di(yw,"onTransitionCancel"),di(pg,"onTransitionEnd"),ue("onMouseEnter",["mouseout","mouseover"]),ue("onMouseLeave",["mouseout","mouseover"]),ue("onPointerEnter",["pointerout","pointerover"]),ue("onPointerLeave",["pointerout","pointerover"]),Xt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pl));function P0(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var T=l.length-1;0<=T;T--){var b=l[T],N=b.instance,B=b.currentTarget;if(b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=B;try{d(h)}catch(Y){mc(Y)}h.currentTarget=null,d=N}else for(T=0;T<l.length;T++){if(b=l[T],N=b.instance,B=b.currentTarget,b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=B;try{d(h)}catch(Y){mc(Y)}h.currentTarget=null,d=N}}}}function je(t,i){var a=i[Vr];a===void 0&&(a=i[Vr]=new Set);var l=t+"__bubble";a.has(l)||(V0(i,t,2,!1),a.add(l))}function Od(t,i,a){var l=0;i&&(l|=4),V0(a,t,l,i)}var Rc="_reactListening"+Math.random().toString(36).slice(2);function Md(t){if(!t[Rc]){t[Rc]=!0,kr.forEach(function(a){a!=="selectionchange"&&(Jw.has(a)||Od(a,!1,t),Od(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Rc]||(i[Rc]=!0,Od("selectionchange",!1,i))}}function V0(t,i,a,l){switch(r_(i)){case 2:var h=xA;break;case 8:h=IA;break;default:h=$d}a=h.bind(null,i,a,t),h=void 0,!Zn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Pd(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var b=l.stateNode.containerInfo;if(b===h)break;if(T===4)for(T=l.return;T!==null;){var N=T.tag;if((N===3||N===4)&&T.stateNode.containerInfo===h)return;T=T.return}for(;b!==null;){if(T=hi(b),T===null)return;if(N=T.tag,N===5||N===6||N===26||N===27){l=d=T;continue e}b=b.parentNode}}l=l.return}Nu(function(){var B=d,Y=Xn(a),ne=[];e:{var G=gg.get(t);if(G!==void 0){var q=ja,Ie=t;switch(t){case"keypress":if(Ci(a)===0)break e;case"keydown":case"keyup":q=qa;break;case"focusin":Ie="focus",q=Ba;break;case"focusout":Ie="blur",q=Ba;break;case"beforeblur":case"afterblur":q=Ba;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Jn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=af;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=ju;break;case fg:case dg:case mg:q=za;break;case pg:q=Fu;break;case"scroll":case"scrollend":q=Du;break;case"wheel":q=Ha;break;case"copy":case"cut":case"paste":q=Ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=sl;break;case"toggle":case"beforetoggle":q=zu}var we=(i&4)!==0,ot=!we&&(t==="scroll"||t==="scrollend"),L=we?G!==null?G+"Capture":null:G;we=[];for(var k=B,F;k!==null;){var J=k;if(F=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||F===null||L===null||(J=Br(k,L),J!=null&&we.push(Vl(k,J,F))),ot)break;k=k.return}0<we.length&&(G=new q(G,Ie,null,a,Y),ne.push({event:G,listeners:we}))}}if((i&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",G&&a!==ss&&(Ie=a.relatedTarget||a.fromElement)&&(hi(Ie)||Ie[wn]))break e;if((q||G)&&(G=Y.window===Y?Y:(G=Y.ownerDocument)?G.defaultView||G.parentWindow:window,q?(Ie=a.relatedTarget||a.toElement,q=B,Ie=Ie?hi(Ie):null,Ie!==null&&(ot=u(Ie),we=Ie.tag,Ie!==ot||we!==5&&we!==27&&we!==6)&&(Ie=null)):(q=null,Ie=B),q!==Ie)){if(we=Jn,J="onMouseLeave",L="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(we=sl,J="onPointerLeave",L="onPointerEnter",k="pointer"),ot=q==null?G:Qn(q),F=Ie==null?G:Qn(Ie),G=new we(J,k+"leave",q,a,Y),G.target=ot,G.relatedTarget=F,J=null,hi(Y)===B&&(we=new we(L,k+"enter",Ie,a,Y),we.target=F,we.relatedTarget=ot,J=we),ot=J,q&&Ie)t:{for(we=q,L=Ie,k=0,F=we;F;F=yo(F))k++;for(F=0,J=L;J;J=yo(J))F++;for(;0<k-F;)we=yo(we),k--;for(;0<F-k;)L=yo(L),F--;for(;k--;){if(we===L||L!==null&&we===L.alternate)break t;we=yo(we),L=yo(L)}we=null}else we=null;q!==null&&k0(ne,G,q,we,!1),Ie!==null&&ot!==null&&k0(ne,ot,Ie,we,!0)}}e:{if(G=B?Qn(B):window,q=G.nodeName&&G.nodeName.toLowerCase(),q==="select"||q==="input"&&G.type==="file")var Te=tg;else if(Ft(G))if(ng)Te=fw;else{Te=cw;var Pe=uw}else q=G.nodeName,!q||q.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?B&&Xo(B.elementType)&&(Te=tg):Te=hw;if(Te&&(Te=Te(t,B))){us(ne,Te,a,Y);break e}Pe&&Pe(t,G,B),t==="focusout"&&B&&G.type==="number"&&B.memoizedProps.value!=null&&ks(G,"number",G.value)}switch(Pe=B?Qn(B):window,t){case"focusin":(Ft(Pe)||Pe.contentEditable==="true")&&(Wa=Pe,hf=B,ol=null);break;case"focusout":ol=hf=Wa=null;break;case"mousedown":ff=!0;break;case"contextmenu":case"mouseup":case"dragend":ff=!1,cg(ne,a,Y);break;case"selectionchange":if(mw)break;case"keydown":case"keyup":cg(ne,a,Y)}var Ee;if(Oi)e:{switch(t){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Ge?$(t,a)&&(Ae="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(v&&a.locale!=="ko"&&(Ge||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Ge&&(Ee=Jo()):(Ri=Y,Ls="value"in Ri?Ri.value:Ri.textContent,Ge=!0)),Pe=Cc(B,Ae),0<Pe.length&&(Ae=new nl(Ae,t,null,a,Y),ne.push({event:Ae,listeners:Pe}),Ee?Ae.data=Ee:(Ee=fe(a),Ee!==null&&(Ae.data=Ee)))),(Ee=g?Ut(t,a):qe(t,a))&&(Ae=Cc(B,"onBeforeInput"),0<Ae.length&&(Pe=new nl("onBeforeInput","beforeinput",null,a,Y),ne.push({event:Pe,listeners:Ae}),Pe.data=Ee)),Yw(ne,t,B,a,Y)}P0(ne,i)})}function Vl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Cc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Br(t,a),h!=null&&l.unshift(Vl(t,h,d)),h=Br(t,i),h!=null&&l.push(Vl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function yo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function k0(t,i,a,l,h){for(var d=i._reactName,T=[];a!==null&&a!==l;){var b=a,N=b.alternate,B=b.stateNode;if(b=b.tag,N!==null&&N===l)break;b!==5&&b!==26&&b!==27||B===null||(N=B,h?(B=Br(a,d),B!=null&&T.unshift(Vl(a,B,N))):h||(B=Br(a,d),B!=null&&T.push(Vl(a,B,N)))),a=a.return}T.length!==0&&t.push({event:i,listeners:T})}var eA=/\r\n?/g,tA=/\u0000|\uFFFD/g;function L0(t){return(typeof t=="string"?t:""+t).replace(eA,`
`).replace(tA,"")}function j0(t,i){return i=L0(i),L0(t)===i}function Nc(){}function at(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Yn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Yn(t,""+l);break;case"className":Zt(t,"class",l);break;case"tabIndex":Zt(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Zt(t,a,l);break;case"style":Yo(t,l,d);break;case"data":if(i!=="object"){Zt(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=La(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&at(t,i,"name",h.name,h,null),at(t,i,"formEncType",h.formEncType,h,null),at(t,i,"formMethod",h.formMethod,h,null),at(t,i,"formTarget",h.formTarget,h,null)):(at(t,i,"encType",h.encType,h,null),at(t,i,"method",h.method,h,null),at(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=La(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Nc);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=La(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":je("beforetoggle",t),je("toggle",t),it(t,"popover",l);break;case"xlinkActuate":pt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":pt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":pt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":pt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":pt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":pt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":pt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":pt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":pt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":it(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=sf.get(a)||a,it(t,a,l))}}function Vd(t,i,a,l,h,d){switch(a){case"style":Yo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Yn(t,l):(typeof l=="number"||typeof l=="bigint")&&Yn(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Nc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vs.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[St]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):it(t,a,l)}}}function nn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var T=a[d];if(T!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:at(t,i,d,T,a,null)}}h&&at(t,i,"srcSet",a.srcSet,a,null),l&&at(t,i,"src",a.src,a,null);return;case"input":je("invalid",t);var b=d=T=h=null,N=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var Y=a[l];if(Y!=null)switch(l){case"name":h=Y;break;case"type":T=Y;break;case"checked":N=Y;break;case"defaultChecked":B=Y;break;case"value":d=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,i));break;default:at(t,i,l,Y,a,null)}}jr(t,d,b,N,B,T,h,!1),ka(t);return;case"select":je("invalid",t),l=T=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":T=b;break;case"multiple":l=b;default:at(t,i,h,b,a,null)}i=d,a=T,t.multiple=!!l,i!=null?is(t,!!l,i,!1):a!=null&&is(t,!!l,a,!0);return;case"textarea":je("invalid",t),d=h=l=null;for(T in a)if(a.hasOwnProperty(T)&&(b=a[T],b!=null))switch(T){case"value":l=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:at(t,i,T,b,a,null)}Ur(t,l,h,d),ka(t);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:at(t,i,N,l,a,null)}return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<Pl.length;l++)je(Pl[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:at(t,i,B,l,a,null)}return;default:if(Xo(i)){for(Y in a)a.hasOwnProperty(Y)&&(l=a[Y],l!==void 0&&Vd(t,i,Y,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&at(t,i,b,l,a,null))}function nA(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,T=null,b=null,N=null,B=null,Y=null;for(q in a){var ne=a[q];if(a.hasOwnProperty(q)&&ne!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":N=ne;default:l.hasOwnProperty(q)||at(t,i,q,null,l,ne)}}for(var G in l){var q=l[G];if(ne=a[G],l.hasOwnProperty(G)&&(q!=null||ne!=null))switch(G){case"type":d=q;break;case"name":h=q;break;case"checked":B=q;break;case"defaultChecked":Y=q;break;case"value":T=q;break;case"defaultValue":b=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:q!==ne&&at(t,i,G,q,l,ne)}}Pn(t,T,b,N,B,Y,d,h);return;case"select":q=T=b=G=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":q=N;default:l.hasOwnProperty(d)||at(t,i,d,null,l,N)}for(h in l)if(d=l[h],N=a[h],l.hasOwnProperty(h)&&(d!=null||N!=null))switch(h){case"value":G=d;break;case"defaultValue":b=d;break;case"multiple":T=d;default:d!==N&&at(t,i,h,d,l,N)}i=b,a=T,l=q,G!=null?is(t,!!a,G,!1):!!l!=!!a&&(i!=null?is(t,!!a,i,!0):is(t,!!a,a?[]:"",!1));return;case"textarea":q=G=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:at(t,i,b,null,l,h)}for(T in l)if(h=l[T],d=a[T],l.hasOwnProperty(T)&&(h!=null||d!=null))switch(T){case"value":G=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&at(t,i,T,h,l,d)}st(t,G,q);return;case"option":for(var Ie in a)if(G=a[Ie],a.hasOwnProperty(Ie)&&G!=null&&!l.hasOwnProperty(Ie))switch(Ie){case"selected":t.selected=!1;break;default:at(t,i,Ie,null,l,G)}for(N in l)if(G=l[N],q=a[N],l.hasOwnProperty(N)&&G!==q&&(G!=null||q!=null))switch(N){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:at(t,i,N,G,l,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)G=a[we],a.hasOwnProperty(we)&&G!=null&&!l.hasOwnProperty(we)&&at(t,i,we,null,l,G);for(B in l)if(G=l[B],q=a[B],l.hasOwnProperty(B)&&G!==q&&(G!=null||q!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:at(t,i,B,G,l,q)}return;default:if(Xo(i)){for(var ot in a)G=a[ot],a.hasOwnProperty(ot)&&G!==void 0&&!l.hasOwnProperty(ot)&&Vd(t,i,ot,void 0,l,G);for(Y in l)G=l[Y],q=a[Y],!l.hasOwnProperty(Y)||G===q||G===void 0&&q===void 0||Vd(t,i,Y,G,l,q);return}}for(var L in a)G=a[L],a.hasOwnProperty(L)&&G!=null&&!l.hasOwnProperty(L)&&at(t,i,L,null,l,G);for(ne in l)G=l[ne],q=a[ne],!l.hasOwnProperty(ne)||G===q||G==null&&q==null||at(t,i,ne,G,l,q)}var kd=null,Ld=null;function Dc(t){return t.nodeType===9?t:t.ownerDocument}function U0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function F0(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function jd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ud=null;function iA(){var t=window.event;return t&&t.type==="popstate"?t===Ud?!1:(Ud=t,!0):(Ud=null,!1)}var B0=typeof setTimeout=="function"?setTimeout:void 0,sA=typeof clearTimeout=="function"?clearTimeout:void 0,z0=typeof Promise=="function"?Promise:void 0,rA=typeof queueMicrotask=="function"?queueMicrotask:typeof z0<"u"?function(t){return z0.resolve(null).then(t).catch(aA)}:B0;function aA(t){setTimeout(function(){throw t})}function Js(t){return t==="head"}function G0(t,i){var a=i,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var T=t.ownerDocument;if(a&1&&kl(T.documentElement),a&2&&kl(T.body),a&4)for(a=T.head,kl(a),T=a.firstChild;T;){var b=T.nextSibling,N=T.nodeName;T[ts]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=b}}if(h===0){t.removeChild(d),ql(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);ql(i)}function Fd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Fd(a),$n(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function oA(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ts])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=pi(t.nextSibling),t===null)break}return null}function lA(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=pi(t.nextSibling),t===null))return null;return t}function Bd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function uA(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function pi(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var zd=null;function q0(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function H0(t,i,a){switch(i=Dc(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function kl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);$n(t)}var ai=new Map,W0=new Set;function Oc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var bs=K.d;K.d={f:cA,r:hA,D:fA,C:dA,L:mA,m:pA,X:yA,S:gA,M:_A};function cA(){var t=bs.f(),i=wc();return t||i}function hA(t){var i=Kn(t);i!==null&&i.tag===5&&i.type==="form"?fy(i):bs.r(t)}var _o=typeof document>"u"?null:document;function $0(t,i,a){var l=_o;if(l&&typeof i=="string"&&i){var h=Dt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),W0.has(h)||(W0.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),nn(i,"link",t),Et(i),l.head.appendChild(i)))}}function fA(t){bs.D(t),$0("dns-prefetch",t,null)}function dA(t,i){bs.C(t,i),$0("preconnect",t,i)}function mA(t,i,a){bs.L(t,i,a);var l=_o;if(l&&t&&i){var h='link[rel="preload"][as="'+Dt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Dt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Dt(a.imageSizes)+'"]')):h+='[href="'+Dt(t)+'"]';var d=h;switch(i){case"style":d=vo(t);break;case"script":d=To(t)}ai.has(d)||(t=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),ai.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Ll(d))||i==="script"&&l.querySelector(jl(d))||(i=l.createElement("link"),nn(i,"link",t),Et(i),l.head.appendChild(i)))}}function pA(t,i){bs.m(t,i);var a=_o;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Dt(l)+'"][href="'+Dt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=To(t)}if(!ai.has(d)&&(t=E({rel:"modulepreload",href:t},i),ai.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(jl(d)))return}l=a.createElement("link"),nn(l,"link",t),Et(l),a.head.appendChild(l)}}}function gA(t,i,a){bs.S(t,i,a);var l=_o;if(l&&t){var h=Yt(l).hoistableStyles,d=vo(t);i=i||"default";var T=h.get(d);if(!T){var b={loading:0,preload:null};if(T=l.querySelector(Ll(d)))b.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":i},a),(a=ai.get(d))&&Gd(t,a);var N=T=l.createElement("link");Et(N),nn(N,"link",t),N._p=new Promise(function(B,Y){N.onload=B,N.onerror=Y}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Mc(T,i,l)}T={type:"stylesheet",instance:T,count:1,state:b},h.set(d,T)}}}function yA(t,i){bs.X(t,i);var a=_o;if(a&&t){var l=Yt(a).hoistableScripts,h=To(t),d=l.get(h);d||(d=a.querySelector(jl(h)),d||(t=E({src:t,async:!0},i),(i=ai.get(h))&&qd(t,i),d=a.createElement("script"),Et(d),nn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function _A(t,i){bs.M(t,i);var a=_o;if(a&&t){var l=Yt(a).hoistableScripts,h=To(t),d=l.get(h);d||(d=a.querySelector(jl(h)),d||(t=E({src:t,async:!0,type:"module"},i),(i=ai.get(h))&&qd(t,i),d=a.createElement("script"),Et(d),nn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function K0(t,i,a,l){var h=(h=_e.current)?Oc(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=vo(a.href),a=Yt(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=vo(a.href);var d=Yt(h).hoistableStyles,T=d.get(t);if(T||(h=h.ownerDocument||h,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,T),(d=h.querySelector(Ll(t)))&&!d._p&&(T.instance=d,T.state.loading=5),ai.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ai.set(t,a),d||vA(h,t,a,T.state))),i&&l===null)throw Error(r(528,""));return T}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=To(a),a=Yt(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function vo(t){return'href="'+Dt(t)+'"'}function Ll(t){return'link[rel="stylesheet"]['+t+"]"}function Q0(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function vA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),nn(i,"link",a),Et(i),t.head.appendChild(i))}function To(t){return'[src="'+Dt(t)+'"]'}function jl(t){return"script[async]"+t}function Y0(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Dt(a.href)+'"]');if(l)return i.instance=l,Et(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Et(l),nn(l,"style",h),Mc(l,a.precedence,t),i.instance=l;case"stylesheet":h=vo(a.href);var d=t.querySelector(Ll(h));if(d)return i.state.loading|=4,i.instance=d,Et(d),d;l=Q0(a),(h=ai.get(h))&&Gd(l,h),d=(t.ownerDocument||t).createElement("link"),Et(d);var T=d;return T._p=new Promise(function(b,N){T.onload=b,T.onerror=N}),nn(d,"link",l),i.state.loading|=4,Mc(d,a.precedence,t),i.instance=d;case"script":return d=To(a.src),(h=t.querySelector(jl(d)))?(i.instance=h,Et(h),h):(l=a,(h=ai.get(d))&&(l=E({},a),qd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Et(h),nn(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Mc(l,a.precedence,t));return i.instance}function Mc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,T=0;T<l.length;T++){var b=l[T];if(b.dataset.precedence===i)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Gd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function qd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Pc=null;function X0(t,i,a){if(Pc===null){var l=new Map,h=Pc=new Map;h.set(a,l)}else h=Pc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[ts]||d[_t]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var T=d.getAttribute(i)||"";T=t+T;var b=l.get(T);b?b.push(d):l.set(T,[d])}}return l}function Z0(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function TA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function J0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Ul=null;function EA(){}function bA(t,i,a){if(Ul===null)throw Error(r(475));var l=Ul;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=vo(a.href),d=t.querySelector(Ll(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Vc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=d,Et(d);return}d=t.ownerDocument||t,a=Q0(a),(h=ai.get(h))&&Gd(a,h),d=d.createElement("link"),Et(d);var T=d;T._p=new Promise(function(b,N){T.onload=b,T.onerror=N}),nn(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Vc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function wA(){if(Ul===null)throw Error(r(475));var t=Ul;return t.stylesheets&&t.count===0&&Hd(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&Hd(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Vc(){if(this.count--,this.count===0){if(this.stylesheets)Hd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var kc=null;function Hd(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,kc=new Map,i.forEach(AA,t),kc=null,Vc.call(t))}function AA(t,i){if(!(i.state.loading&4)){var a=kc.get(t);if(a)var l=a.get(null);else{a=new Map,kc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var T=h[d];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),l=T)}l&&a.set(null,l)}h=i.instance,T=h.getAttribute("data-precedence"),d=a.get(T)||l,d===l&&a.set(null,h),a.set(T,h),this.count++,l=Vc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Fl={$$typeof:te,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function SA(t,i,a,l,h,d,T,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mn(0),this.hiddenUpdates=Mn(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function e_(t,i,a,l,h,d,T,b,N,B,Y,ne){return t=new SA(t,i,a,T,b,N,B,ne),i=1,d===!0&&(i|=24),d=kn(3,null,null,i),t.current=d,d.stateNode=t,i=xf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Nf(d),t}function t_(t){return t?(t=Ya,t):Ya}function n_(t,i,a,l,h,d){h=t_(h),l.context===null?l.context=h:l.pendingContext=h,l=Fs(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Bs(t,l,i),a!==null&&(Bn(a,t,i),gl(a,t,i))}function i_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Wd(t,i){i_(t,i),(t=t.alternate)&&i_(t,i)}function s_(t){if(t.tag===13){var i=Qa(t,67108864);i!==null&&Bn(i,t,67108864),Wd(t,67108864)}}var Lc=!0;function xA(t,i,a,l){var h=z.T;z.T=null;var d=K.p;try{K.p=2,$d(t,i,a,l)}finally{K.p=d,z.T=h}}function IA(t,i,a,l){var h=z.T;z.T=null;var d=K.p;try{K.p=8,$d(t,i,a,l)}finally{K.p=d,z.T=h}}function $d(t,i,a,l){if(Lc){var h=Kd(l);if(h===null)Pd(t,i,l,jc,a),a_(t,l);else if(CA(h,t,i,a,l))l.stopPropagation();else if(a_(t,l),i&4&&-1<RA.indexOf(t)){for(;h!==null;){var d=Kn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var T=bn(d.pendingLanes);if(T!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;T;){var N=1<<31-jt(T);b.entanglements[1]|=N,T&=~N}ji(d),(tt&6)===0&&(Ec=gn()+500,Ml(0))}}break;case 13:b=Qa(d,2),b!==null&&Bn(b,d,2),wc(),Wd(d,2)}if(d=Kd(l),d===null&&Pd(t,i,l,jc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Pd(t,i,l,null,a)}}function Kd(t){return t=Xn(t),Qd(t)}var jc=null;function Qd(t){if(jc=null,t=hi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return jc=t,null}function r_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ra()){case Ds:return 2;case Os:return 8;case wi:case Ho:return 32;case Qi:return 268435456;default:return 32}default:return 32}}var Yd=!1,er=null,tr=null,nr=null,Bl=new Map,zl=new Map,ir=[],RA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function a_(t,i){switch(t){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Bl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(i.pointerId)}}function Gl(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Kn(i),i!==null&&s_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function CA(t,i,a,l,h){switch(i){case"focusin":return er=Gl(er,t,i,a,l,h),!0;case"dragenter":return tr=Gl(tr,t,i,a,l,h),!0;case"mouseover":return nr=Gl(nr,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Bl.set(d,Gl(Bl.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,zl.set(d,Gl(zl.get(d)||null,t,i,a,l,h)),!0}return!1}function o_(t){var i=hi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Na(t.priority,function(){if(a.tag===13){var l=Fn();l=Wn(l);var h=Qa(a,l);h!==null&&Bn(h,a,l),Wd(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Uc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Kd(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);ss=l,a.target.dispatchEvent(l),ss=null}else return i=Kn(a),i!==null&&s_(i),t.blockedOn=a,!1;i.shift()}return!0}function l_(t,i,a){Uc(t)&&a.delete(i)}function NA(){Yd=!1,er!==null&&Uc(er)&&(er=null),tr!==null&&Uc(tr)&&(tr=null),nr!==null&&Uc(nr)&&(nr=null),Bl.forEach(l_),zl.forEach(l_)}function Fc(t,i){t.blockedOn===i&&(t.blockedOn=null,Yd||(Yd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,NA)))}var Bc=null;function u_(t){Bc!==t&&(Bc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Bc===t&&(Bc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(Qd(l||a)===null)continue;break}var d=Kn(a);d!==null&&(t.splice(i,3),i-=3,Qf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function ql(t){function i(N){return Fc(N,t)}er!==null&&Fc(er,t),tr!==null&&Fc(tr,t),nr!==null&&Fc(nr,t),Bl.forEach(i),zl.forEach(i);for(var a=0;a<ir.length;a++){var l=ir[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ir.length&&(a=ir[0],a.blockedOn===null);)o_(a),a.blockedOn===null&&ir.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],T=h[St]||null;if(typeof d=="function")T||u_(a);else if(T){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,T=d[St]||null)b=T.formAction;else if(Qd(h)!==null)continue}else b=T.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),u_(a)}}}function Xd(t){this._internalRoot=t}zc.prototype.render=Xd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Fn();n_(a,l,t,i,null,null)},zc.prototype.unmount=Xd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;n_(t.current,2,null,t,null,null),wc(),i[wn]=null}};function zc(t){this._internalRoot=t}zc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Xe();t={blockedOn:null,target:t,priority:i};for(var a=0;a<ir.length&&i!==0&&i<ir[a].priority;a++);ir.splice(a,0,t),a===0&&o_(t)}};var c_=e.version;if(c_!=="19.1.0")throw Error(r(527,c_,"19.1.0"));K.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(i),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var DA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gc.isDisabled&&Gc.supportsFiber)try{mt=Gc.inject(DA),$e=Gc}catch{}}return Wl.createRoot=function(t,i){if(!o(t))throw Error(r(299));var a=!1,l="",h=xy,d=Iy,T=Ry,b=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(b=i.unstable_transitionCallbacks)),i=e_(t,1,!1,null,null,a,l,h,d,T,b,null),t[wn]=i.current,Md(t),new Xd(i)},Wl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(r(299));var l=!1,h="",d=xy,T=Iy,b=Ry,N=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),i=e_(t,1,!0,i,a??null,l,h,d,T,b,N,B),i.context=t_(null),a=i.current,l=Fn(),l=Wn(l),h=Fs(l),h.callback=null,Bs(a,h,l),a=l,i.current.lanes=a,ci(i,a),ji(i),t[wn]=i.current,Md(t),new zc(i)},Wl.version="19.1.0",Wl}var T_;function GA(){if(T_)return em.exports;T_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),em.exports=zA(),em.exports}var qA=GA();const HA=()=>{};var E_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},WA=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],f=s[n++],m=s[n++],y=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const u=s[n++],f=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},hT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],f=o+1<s.length,m=f?s[o+1]:0,y=o+2<s.length,_=y?s[o+2]:0,E=u>>2,I=(u&3)<<4|m>>4;let S=(m&15)<<2|_>>6,P=_&63;y||(P=64,f||(S=64)),r.push(n[E],n[I],n[S],n[P])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(cT(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):WA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],m=o<s.length?n[s.charAt(o)]:0;++o;const _=o<s.length?n[s.charAt(o)]:64;++o;const I=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||m==null||_==null||I==null)throw new $A;const S=u<<2|m>>4;if(r.push(S),_!==64){const P=m<<4&240|_>>2;if(r.push(P),I!==64){const U=_<<6&192|I;r.push(U)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class $A extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KA=function(s){const e=cT(s);return hT.encodeByteArray(e,!0)},lh=function(s){return KA(s).replace(/\./g,"")},fT=function(s){try{return hT.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=()=>QA().__FIREBASE_DEFAULTS__,XA=()=>{if(typeof process>"u"||typeof E_>"u")return;const s=E_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},ZA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&fT(s[1]);return e&&JSON.parse(e)},Ch=()=>{try{return HA()||YA()||XA()||ZA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},dT=s=>Ch()?.emulatorHosts?.[s],JA=s=>{const e=dT(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mT=()=>Ch()?.config,pT=s=>Ch()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gT(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[lh(JSON.stringify(n)),lh(JSON.stringify(f)),""].join(".")}const Jl={};function nS(){const s={prod:[],emulator:[]};for(const e of Object.keys(Jl))Jl[e]?s.emulator.push(e):s.prod.push(e);return s}function iS(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let b_=!1;function yT(s,e){if(typeof window>"u"||typeof document>"u"||!Lo(window.location.host)||Jl[s]===e||Jl[s]||b_)return;Jl[s]=e;function n(S){return`__firebase__banner__${S}`}const r="__firebase__banner",u=nS().prod.length>0;function f(){const S=document.getElementById(r);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,P){S.setAttribute("width","24"),S.setAttribute("id",P),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function _(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{b_=!0,f()},S}function E(S,P){S.setAttribute("id",P),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function I(){const S=iS(r),P=n("text"),U=document.getElementById(P)||document.createElement("span"),X=n("learnmore"),H=document.getElementById(X)||document.createElement("a"),ae=n("preprendIcon"),Q=document.getElementById(ae)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const te=S.element;m(te),E(H,X);const Z=_();y(Q,ae),te.append(Q,U,H,Z),document.body.appendChild(te)}u?(U.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function rS(){const s=Ch()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ep(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function oS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lS(){const s=mn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function uS(){return!rS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tp(){try{return typeof indexedDB=="object"}catch{return!1}}function np(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}function _T(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="FirebaseError";class Ei extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cS,Object.setPrototypeOf(this,Ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ta.prototype.create)}}class Ta{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?hS(u,r):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Ei(o,m,r)}}function hS(s,e){return s.replace(fS,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const fS=/\{\$([^}]+)}/g;function dS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function yr(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const u=s[o],f=e[o];if(w_(u)&&w_(f)){if(!yr(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function w_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $l(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Kl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function mS(s,e){const n=new pS(s,e);return n.subscribe.bind(n)}class pS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=sm),o.error===void 0&&(o.error=sm),o.complete===void 0&&(o.complete=sm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function sm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=1e3,_S=2,vS=14400*1e3,TS=.5;function A_(s,e=yS,n=_S){const r=e*Math.pow(n,s),o=Math.round(TS*r*(Math.random()-.5)*2);return Math.min(vS,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(s){return s&&s._delegate?s._delegate:s}class _i{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new eS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wS(e))try{this.getOrInitializeService({instanceIdentifier:ua})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ua){return this.instances.has(e)}getOptions(e=ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&f.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ua){return this.component?this.component.multipleInstances?e:ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bS(s){return s===ua?void 0:s}function wS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ES(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ue||(Ue={}));const SS={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},xS=Ue.INFO,IS={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},RS=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=IS[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nh{constructor(e){this.name=e,this._logLevel=xS,this._logHandler=RS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const CS=(s,e)=>e.some(n=>s instanceof n);let S_,x_;function NS(){return S_||(S_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DS(){return x_||(x_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vT=new WeakMap,Em=new WeakMap,TT=new WeakMap,rm=new WeakMap,ip=new WeakMap;function OS(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{n(fr(s.result)),o()},f=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&vT.set(n,s)}).catch(()=>{}),ip.set(e,s),e}function MS(s){if(Em.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});Em.set(s,e)}let bm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Em.get(s);if(e==="objectStoreNames")return s.objectStoreNames||TT.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fr(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function PS(s){bm=s(bm)}function VS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(am(this),e,...n);return TT.set(r,e.sort?e.sort():[e]),fr(r)}:DS().includes(s)?function(...e){return s.apply(am(this),e),fr(vT.get(this))}:function(...e){return fr(s.apply(am(this),e))}}function kS(s){return typeof s=="function"?VS(s):(s instanceof IDBTransaction&&MS(s),CS(s,NS())?new Proxy(s,bm):s)}function fr(s){if(s instanceof IDBRequest)return OS(s);if(rm.has(s))return rm.get(s);const e=kS(s);return e!==s&&(rm.set(s,e),ip.set(e,s)),e}const am=s=>ip.get(s);function ET(s,e,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(s,e),m=fr(f);return r&&f.addEventListener("upgradeneeded",y=>{r(fr(f.result),y.oldVersion,y.newVersion,fr(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),m.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const LS=["get","getKey","getAll","getAllKeys","count"],jS=["put","add","delete","clear"],om=new Map;function I_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(om.get(e))return om.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=jS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||LS.includes(n)))return;const u=async function(f,...m){const y=this.transaction(f,o?"readwrite":"readonly");let _=y.store;return r&&(_=_.index(m.shift())),(await Promise.all([_[n](...m),o&&y.done]))[0]};return om.set(e,u),u}PS(s=>({...s,get:(e,n,r)=>I_(e,n)||s.get(e,n,r),has:(e,n)=>!!I_(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function FS(s){return s.getComponent()?.type==="VERSION"}const wm="@firebase/app",R_="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new Nh("@firebase/app"),BS="@firebase/app-compat",zS="@firebase/analytics-compat",GS="@firebase/analytics",qS="@firebase/app-check-compat",HS="@firebase/app-check",WS="@firebase/auth",$S="@firebase/auth-compat",KS="@firebase/database",QS="@firebase/data-connect",YS="@firebase/database-compat",XS="@firebase/functions",ZS="@firebase/functions-compat",JS="@firebase/installations",e1="@firebase/installations-compat",t1="@firebase/messaging",n1="@firebase/messaging-compat",i1="@firebase/performance",s1="@firebase/performance-compat",r1="@firebase/remote-config",a1="@firebase/remote-config-compat",o1="@firebase/storage",l1="@firebase/storage-compat",u1="@firebase/firestore",c1="@firebase/ai",h1="@firebase/firestore-compat",f1="firebase",d1="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="[DEFAULT]",m1={[wm]:"fire-core",[BS]:"fire-core-compat",[GS]:"fire-analytics",[zS]:"fire-analytics-compat",[HS]:"fire-app-check",[qS]:"fire-app-check-compat",[WS]:"fire-auth",[$S]:"fire-auth-compat",[KS]:"fire-rtdb",[QS]:"fire-data-connect",[YS]:"fire-rtdb-compat",[XS]:"fire-fn",[ZS]:"fire-fn-compat",[JS]:"fire-iid",[e1]:"fire-iid-compat",[t1]:"fire-fcm",[n1]:"fire-fcm-compat",[i1]:"fire-perf",[s1]:"fire-perf-compat",[r1]:"fire-rc",[a1]:"fire-rc-compat",[o1]:"fire-gcs",[l1]:"fire-gcs-compat",[u1]:"fire-fst",[h1]:"fire-fst-compat",[c1]:"fire-vertex","fire-js":"fire-js",[f1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new Map,p1=new Map,Sm=new Map;function C_(s,e){try{s.container.addComponent(e)}catch(n){Is.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function $i(s){const e=s.name;if(Sm.has(e))return Is.debug(`There were multiple attempts to register component ${e}.`),!1;Sm.set(e,s);for(const n of uh.values())C_(n,s);for(const n of p1.values())C_(n,s);return!0}function Ea(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function oi(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},dr=new Ta("app","Firebase",g1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=d1;function bT(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:Am,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw dr.create("bad-app-name",{appName:String(o)});if(n||(n=mT()),!n)throw dr.create("no-options");const u=uh.get(o);if(u){if(yr(n,u.options)&&yr(r,u.config))return u;throw dr.create("duplicate-app",{appName:o})}const f=new AS(o);for(const y of Sm.values())f.addComponent(y);const m=new y1(n,r,f);return uh.set(o,m),m}function sp(s=Am){const e=uh.get(s);if(!e&&s===Am&&mT())return bT();if(!e)throw dr.create("no-app",{appName:s});return e}function ui(s,e,n){let r=m1[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${r}" with version "${e}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Is.warn(f.join(" "));return}$i(new _i(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="firebase-heartbeat-database",v1=1,au="firebase-heartbeat-store";let lm=null;function wT(){return lm||(lm=ET(_1,v1,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(au)}catch(n){console.warn(n)}}}}).catch(s=>{throw dr.create("idb-open",{originalErrorMessage:s.message})})),lm}async function T1(s){try{const n=(await wT()).transaction(au),r=await n.objectStore(au).get(AT(s));return await n.done,r}catch(e){if(e instanceof Ei)Is.warn(e.message);else{const n=dr.create("idb-get",{originalErrorMessage:e?.message});Is.warn(n.message)}}}async function N_(s,e){try{const r=(await wT()).transaction(au,"readwrite");await r.objectStore(au).put(e,AT(s)),await r.done}catch(n){if(n instanceof Ei)Is.warn(n.message);else{const r=dr.create("idb-set",{originalErrorMessage:n?.message});Is.warn(r.message)}}}function AT(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=1024,b1=30;class w1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new S1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=D_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>b1){const o=x1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Is.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=D_(),{heartbeatsToSend:n,unsentEntries:r}=A1(this._heartbeatsCache.heartbeats),o=lh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Is.warn(e),""}}}function D_(){return new Date().toISOString().substring(0,10)}function A1(s,e=E1){const n=[];let r=s.slice();for(const o of s){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),O_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),O_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class S1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tp()?np().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await T1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return N_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return N_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function O_(s){return lh(JSON.stringify({version:2,heartbeats:s})).length}function x1(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(s){$i(new _i("platform-logger",e=>new US(e),"PRIVATE")),$i(new _i("heartbeat",e=>new w1(e),"PRIVATE")),ui(wm,R_,s),ui(wm,R_,"esm2020"),ui("fire-js","")}I1("");var R1="firebase",C1="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ui(R1,C1,"app");function ST(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const N1=ST,xT=new Ta("auth","Firebase",ST());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new Nh("@firebase/auth");function D1(s,...e){ch.logLevel<=Ue.WARN&&ch.warn(`Auth (${jo}): ${s}`,...e)}function Zc(s,...e){ch.logLevel<=Ue.ERROR&&ch.error(`Auth (${jo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(s,...e){throw rp(s,...e)}function Bi(s,...e){return rp(s,...e)}function IT(s,e,n){const r={...N1(),[e]:n};return new Ta("auth","Firebase",r).create(e,{appName:s.name})}function xs(s){return IT(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rp(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return xT.create(s,...e)}function Se(s,e,...n){if(!s)throw rp(e,...n)}function As(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Zc(e),new Error(e)}function Rs(s,e){s||As(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(){return typeof self<"u"&&self.location?.href||""}function O1(){return M_()==="http:"||M_()==="https:"}function M_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(O1()||ep()||"connection"in navigator)?navigator.onLine:!0}function P1(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rs(n>e,"Short delay should be less than long delay!"),this.isMobile=sS()||oS()}get(){return M1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(s,e){Rs(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;As("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;As("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;As("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],L1=new yu(3e4,6e4);function Sr(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function xr(s,e,n,r,o={}){return CT(s,o,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const m=gu({key:s.config.apiKey,...f}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const _={method:e,headers:y,...u};return aS()||(_.referrerPolicy="no-referrer"),s.emulatorConfig&&Lo(s.emulatorConfig.host)&&(_.credentials="include"),RT.fetch()(await NT(s,s.config.apiHost,n,m),_)})}async function CT(s,e,n){s._canInitEmulator=!1;const r={...V1,...e};try{const o=new U1(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw qc(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[y,_]=m.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw qc(s,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw qc(s,"email-already-in-use",f);if(y==="USER_DISABLED")throw qc(s,"user-disabled",f);const E=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw IT(s,E,_);vi(s,E)}}catch(o){if(o instanceof Ei)throw o;vi(s,"network-request-failed",{message:String(o)})}}async function _u(s,e,n,r,o={}){const u=await xr(s,e,n,r,o);return"mfaPendingCredential"in u&&vi(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function NT(s,e,n,r){const o=`${e}${n}?${r}`,u=s,f=u.config.emulator?ap(s.config,o):`${s.config.apiScheme}://${o}`;return k1.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function j1(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class U1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Bi(this.auth,"network-request-failed")),L1.get())})}}function qc(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Bi(s,e,r);return o.customData._tokenResponse=n,o}function P_(s){return s!==void 0&&s.enterprise!==void 0}class F1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return j1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function B1(s,e){return xr(s,"GET","/v2/recaptchaConfig",Sr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z1(s,e){return xr(s,"POST","/v1/accounts:delete",e)}async function hh(s,e){return xr(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function G1(s,e=!1){const n=wt(s),r=await n.getIdToken(e),o=op(r);Se(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:r,authTime:eu(um(o.auth_time)),issuedAtTime:eu(um(o.iat)),expirationTime:eu(um(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function um(s){return Number(s)*1e3}function op(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return Zc("JWT malformed, contained fewer than 3 sections"),null;try{const o=fT(n);return o?JSON.parse(o):(Zc("Failed to decode base64 JWT payload"),null)}catch(o){return Zc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function V_(s){const e=op(s);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ei&&q1(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function q1({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=eu(this.lastLoginAt),this.creationTime=eu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fh(s){const e=s.auth,n=await s.getIdToken(),r=await ou(s,hh(e,{idToken:n}));Se(r?.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?DT(o.providerUserInfo):[],f=$1(s.providerData,u),m=s.isAnonymous,y=!(s.email&&o.passwordHash)&&!f?.length,_=m?y:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Im(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(s,E)}async function W1(s){const e=wt(s);await fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $1(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function DT(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(s,e){const n=await CT(s,{},async()=>{const r=gu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,f=await NT(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:m,body:r};return s.emulatorConfig&&Lo(s.emulatorConfig.host)&&(y.credentials="include"),RT.fetch()(f,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Q1(s,e){return xr(s,"POST","/v2/accounts:revokeToken",Sr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):V_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const n=V_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:u}=await K1(e,n);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:u}=n,f=new xo;return r&&(Se(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(Se(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Se(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xo,this.toJSON())}_performRefresh(){return As("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(s,e){Se(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class gi{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new H1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Im(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await ou(this,this.stsTokenManager.getToken(this.auth,e));return Se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return G1(this,e)}reload(){return W1(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await fh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(oi(this.auth.app))return Promise.reject(xs(this.auth));const e=await this.getIdToken();return await ou(this,z1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,y=n._redirectEventId??void 0,_=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:I,emailVerified:S,isAnonymous:P,providerData:U,stsTokenManager:X}=n;Se(I&&X,e,"internal-error");const H=xo.fromJSON(this.name,X);Se(typeof I=="string",e,"internal-error"),rr(r,e.name),rr(o,e.name),Se(typeof S=="boolean",e,"internal-error"),Se(typeof P=="boolean",e,"internal-error"),rr(u,e.name),rr(f,e.name),rr(m,e.name),rr(y,e.name),rr(_,e.name),rr(E,e.name);const ae=new gi({uid:I,auth:e,email:o,emailVerified:S,displayName:r,isAnonymous:P,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:H,createdAt:_,lastLoginAt:E});return U&&Array.isArray(U)&&(ae.providerData=U.map(Q=>({...Q}))),y&&(ae._redirectEventId=y),ae}static async _fromIdTokenResponse(e,n,r=!1){const o=new xo;o.updateFromServerResponse(n);const u=new gi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await fh(u),u}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Se(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?DT(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,m=new xo;m.updateFromIdToken(r);const y=new gi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Im(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(y,_),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=new Map;function Ss(s){Rs(s instanceof Function,"Expected a class definition");let e=k_.get(s);return e?(Rs(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,k_.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}OT.type="NONE";const L_=OT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(s,e,n){return`firebase:${s}:${e}:${n}`}class Io{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Jc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Jc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await hh(this.auth,{idToken:e}).catch(()=>{});return n?gi._fromGetAccountInfoResponse(this.auth,n,e):null}return gi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Io(Ss(L_),e,r);const o=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=o[0]||Ss(L_);const f=Jc(r,e.config.apiKey,e.name);let m=null;for(const _ of n)try{const E=await _._get(f);if(E){let I;if(typeof E=="string"){const S=await hh(e,{idToken:E}).catch(()=>{});if(!S)break;I=await gi._fromGetAccountInfoResponse(e,S,E)}else I=gi._fromJSON(e,E);_!==u&&(m=I),u=_;break}}catch{}const y=o.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new Io(u,e,r):(u=y[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async _=>{if(_!==u)try{await _._remove(f)}catch{}})),new Io(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jT(e))return"Blackberry";if(UT(e))return"Webos";if(PT(e))return"Safari";if((e.includes("chrome/")||VT(e))&&!e.includes("edge/"))return"Chrome";if(LT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if(r?.length===2)return r[1]}return"Other"}function MT(s=mn()){return/firefox\//i.test(s)}function PT(s=mn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VT(s=mn()){return/crios\//i.test(s)}function kT(s=mn()){return/iemobile/i.test(s)}function LT(s=mn()){return/android/i.test(s)}function jT(s=mn()){return/blackberry/i.test(s)}function UT(s=mn()){return/webos/i.test(s)}function lp(s=mn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Y1(s=mn()){return lp(s)&&!!window.navigator?.standalone}function X1(){return lS()&&document.documentMode===10}function FT(s=mn()){return lp(s)||LT(s)||UT(s)||jT(s)||/windows phone/i.test(s)||kT(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(s,e=[]){let n;switch(s){case"Browser":n=j_(mn());break;case"Worker":n=`${j_(mn())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((f,m)=>{try{const y=e(u);f(y)}catch(y){m(y)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(s,e={}){return xr(s,"GET","/v2/passwordPolicy",Sr(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=6;class tx{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ex,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new U_(this),this.idTokenSubscription=new U_(this),this.beforeStateQueue=new Z1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ss(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Io.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await hh(this,{idToken:e}),r=await gi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(oi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&m?.user&&(r=m.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await fh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=P1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(oi(this.app))return Promise.reject(xs(this));const n=e?wt(e):null;return n&&Se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return oi(this.app)?Promise.reject(xs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return oi(this.app)?Promise.reject(xs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ss(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await J1(this),n=new tx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ta("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Q1(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ss(e)||this._popupRedirectResolver;Se(n,this,"argument-error"),this.redirectPersistenceManager=await Io.create(this,[Ss(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,r,o);return()=>{f=!0,y()}}else{const y=e.addObserver(n);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(oi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&D1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ba(s){return wt(s)}class U_{constructor(e){this.auth=e,this.observer=null,this.addObserver=mS(n=>this.observer=n)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ix(s){Dh=s}function zT(s){return Dh.loadJS(s)}function sx(){return Dh.recaptchaEnterpriseScript}function rx(){return Dh.gapiScript}function ax(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class ox{constructor(){this.enterprise=new lx}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class lx{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const ux="recaptcha-enterprise",GT="NO_RECAPTCHA";class cx{constructor(e){this.type=ux,this.auth=ba(e)}async verify(e="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{B1(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new F1(y);return u.tenantId==null?u._agentRecaptchaConfig=_:u._tenantRecaptchaConfigs[u.tenantId]=_,f(_.siteKey)}}).catch(y=>{m(y)})})}function o(u,f,m){const y=window.grecaptcha;P_(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(_=>{f(_)}).catch(()=>{f(GT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ox().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(m=>{if(!n&&P_(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=sx();y.length!==0&&(y+=m),zT(y).then(()=>{o(m,u,f)}).catch(_=>{f(_)})}}).catch(m=>{f(m)})})}}async function F_(s,e,n,r=!1,o=!1){const u=new cx(s);let f;if(o)f=GT;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const y=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:_,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const y=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Rm(s,e,n,r,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await F_(s,e,n,n==="getOobCode");return r(s,u)}else return r(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await F_(s,e,n,n==="getOobCode");return r(s,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(s,e){const n=Ea(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(yr(u,e??{}))return o;vi(o,"already-initialized")}return n.initialize({options:e})}function fx(s,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ss);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function dx(s,e,n){const r=ba(s);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=qT(e),{host:f,port:m}=mx(e),y=m===null?"":`:${m}`,_={url:`${u}//${f}${y}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(yr(_,r.config.emulator)&&yr(E,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=E,r.settings.appVerificationDisabledForTesting=!0,Lo(f)?(gT(`${u}//${f}${y}`),yT("Auth",!0)):px()}function qT(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function mx(s){const e=qT(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:B_(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:B_(f)}}}function B_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function px(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return As("not implemented")}_getIdTokenResponse(e){return As("not implemented")}_linkToIdToken(e,n){return As("not implemented")}_getReauthenticationResolver(e){return As("not implemented")}}async function gx(s,e){return xr(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(s,e){return _u(s,"POST","/v1/accounts:signInWithPassword",Sr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _x(s,e){return _u(s,"POST","/v1/accounts:signInWithEmailLink",Sr(s,e))}async function vx(s,e){return _u(s,"POST","/v1/accounts:signInWithEmailLink",Sr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends up{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new lu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new lu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rm(e,n,"signInWithPassword",yx);case"emailLink":return _x(e,{email:this._email,oobCode:this._password});default:vi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rm(e,r,"signUpPassword",gx);case"emailLink":return vx(e,{idToken:n,email:this._email,oobCode:this._password});default:vi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ro(s,e){return _u(s,"POST","/v1/accounts:signInWithIdp",Sr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="http://localhost";class ma extends up{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ma(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=n;if(!r||!o)return null;const f=new ma(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Ro(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ro(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ro(e,n)}buildRequest(){const e={requestUri:Tx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=gu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bx(s){const e=$l(Kl(s)).link,n=e?$l(Kl(e)).deep_link_id:null,r=$l(Kl(s)).deep_link_id;return(r?$l(Kl(r)).link:null)||r||n||e||s}class cp{constructor(e){const n=$l(Kl(e)),r=n.apiKey??null,o=n.oobCode??null,u=Ex(n.mode??null);Se(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=bx(e);try{return new cp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){this.providerId=Uo.PROVIDER_ID}static credential(e,n){return lu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=cp.parseLink(n);return Se(r,"argument-error"),lu._fromEmailAndCode(e,r.code,r.tenantId)}}Uo.PROVIDER_ID="password";Uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends HT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends vu{constructor(){super("facebook.com")}static credential(e){return ma._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.FACEBOOK_SIGN_IN_METHOD="facebook.com";ar.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ma._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return or.credential(n,r)}catch{return null}}}or.GOOGLE_SIGN_IN_METHOD="google.com";or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends vu{constructor(){super("github.com")}static credential(e){return ma._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.GITHUB_SIGN_IN_METHOD="github.com";lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends vu{constructor(){super("twitter.com")}static credential(e,n){return ma._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ur.credential(n,r)}catch{return null}}}ur.TWITTER_SIGN_IN_METHOD="twitter.com";ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wx(s,e){return _u(s,"POST","/v1/accounts:signUp",Sr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const u=await gi._fromIdTokenResponse(e,r,o),f=z_(r);return new pa({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=z_(r);return new pa({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function z_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends Ei{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,dh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new dh(e,n,r,o)}}function WT(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?dh._fromErrorAndOperation(s,u,e,r):u})}async function Ax(s,e,n=!1){const r=await ou(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return pa._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sx(s,e,n=!1){const{auth:r}=s;if(oi(r.app))return Promise.reject(xs(r));const o="reauthenticate";try{const u=await ou(s,WT(r,o,e,s),n);Se(u.idToken,r,"internal-error");const f=op(u.idToken);Se(f,r,"internal-error");const{sub:m}=f;return Se(s.uid===m,r,"user-mismatch"),pa._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&vi(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $T(s,e,n=!1){if(oi(s.app))return Promise.reject(xs(s));const r="signIn",o=await WT(s,r,e),u=await pa._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(u.user),u}async function xx(s,e){return $T(ba(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KT(s){const e=ba(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ix(s,e,n){if(oi(s.app))return Promise.reject(xs(s));const r=ba(s),f=await Rm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wx).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&KT(s),y}),m=await pa._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(m.user),m}function Rx(s,e,n){return oi(s.app)?Promise.reject(xs(s)):xx(wt(s),Uo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&KT(s),r})}function Cx(s,e,n,r){return wt(s).onIdTokenChanged(e,n,r)}function Nx(s,e,n){return wt(s).beforeAuthStateChanged(e,n)}function Dx(s,e,n,r){return wt(s).onAuthStateChanged(e,n,r)}function Ox(s){return wt(s).signOut()}const mh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mh,"1"),this.storage.removeItem(mh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=1e3,Px=10;class YT extends QT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,y)=>{this.notifyListeners(f,y)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);X1()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Px):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Mx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}YT.type="LOCAL";const Vx=YT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT extends QT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}XT.type="SESSION";const ZT=XT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new Oh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(f).map(async _=>_(n.origin,u)),y=await kx(m);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,y)=>{const _=hp("",20);o.port1.start();const E=setTimeout(()=>{y(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(I){const S=I;if(S.data.eventId===_)switch(S.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(S.data.response);break;default:clearTimeout(E),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return window}function jx(s){zi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function Ux(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Fx(){return navigator?.serviceWorker?.controller||null}function Bx(){return JT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="firebaseLocalStorageDb",zx=1,ph="firebaseLocalStorage",tE="fbase_key";class Tu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mh(s,e){return s.transaction([ph],e?"readwrite":"readonly").objectStore(ph)}function Gx(){const s=indexedDB.deleteDatabase(eE);return new Tu(s).toPromise()}function Cm(){const s=indexedDB.open(eE,zx);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(ph,{keyPath:tE})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(ph)?e(r):(r.close(),await Gx(),e(await Cm()))})})}async function G_(s,e,n){const r=Mh(s,!0).put({[tE]:e,value:n});return new Tu(r).toPromise()}async function qx(s,e){const n=Mh(s,!1).get(e),r=await new Tu(n).toPromise();return r===void 0?null:r.value}function q_(s,e){const n=Mh(s,!0).delete(e);return new Tu(n).toPromise()}const Hx=800,Wx=3;class nE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Wx)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance(Bx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Ux(),!this.activeServiceWorker)return;this.sender=new Lx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Fx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cm();return await G_(e,mh,"1"),await q_(e,mh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>G_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>qx(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>q_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Mh(o,!1).getAll();return new Tu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Hx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nE.type="LOCAL";const $x=nE;new yu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(s,e){return e?Ss(e):(Se(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp extends up{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ro(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ro(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Qx(s){return $T(s.auth,new fp(s),s.bypassAuthState)}function Yx(s){const{auth:e,user:n}=s;return Se(n,e,"internal-error"),Sx(n,new fp(s),s.bypassAuthState)}async function Xx(s){const{auth:e,user:n}=s;return Se(n,e,"internal-error"),Ax(n,new fp(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,n,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(y))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qx;case"linkViaPopup":case"linkViaRedirect":return Xx;case"reauthViaPopup":case"reauthViaRedirect":return Yx;default:vi(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=new yu(2e3,1e4);class So extends iE{constructor(e,n,r,o,u){super(e,n,o,u),this.provider=r,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const e=hp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Zx.get())};e()}}So.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="pendingRedirect",eh=new Map;class eI extends iE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=eh.get(this.auth._key());if(!e){try{const r=await tI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}eh.set(this.auth._key(),e)}return this.bypassAuthState||eh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tI(s,e){const n=sI(e),r=iI(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function nI(s,e){eh.set(s._key(),e)}function iI(s){return Ss(s._redirectPersistence)}function sI(s){return Jc(Jx,s.config.apiKey,s.name)}async function rI(s,e,n=!1){if(oi(s.app))return Promise.reject(xs(s));const r=ba(s),o=Kx(r,e),f=await new eI(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=600*1e3;class oI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!sE(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Bi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aI&&this.cachedEventUids.clear(),this.cachedEventUids.has(H_(e))}saveEventToCache(e){this.cachedEventUids.add(H_(e)),this.lastProcessedEventTime=Date.now()}}function H_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function sE({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function lI(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sE(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(s,e={}){return xr(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hI=/^https?/;async function fI(s){if(s.config.emulator)return;const{authorizedDomains:e}=await uI(s);for(const n of e)try{if(dI(n))return}catch{}vi(s,"unauthorized-domain")}function dI(s){const e=xm(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!hI.test(n))return!1;if(cI.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=new yu(3e4,6e4);function W_(){const s=zi().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function pI(s){return new Promise((e,n)=>{function r(){W_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{W_(),n(Bi(s,"network-request-failed"))},timeout:mI.get()})}if(zi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(zi().gapi?.load)r();else{const o=ax("iframefcb");return zi()[o]=()=>{gapi.load?r():n(Bi(s,"network-request-failed"))},zT(`${rx()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw th=null,e})}let th=null;function gI(s){return th=th||pI(s),th}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=new yu(5e3,15e3),_I="__/auth/iframe",vI="emulator/auth/iframe",TI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bI(s){const e=s.config;Se(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?ap(e,vI):`https://${s.config.authDomain}/${_I}`,r={apiKey:e.apiKey,appName:s.name,v:jo},o=EI.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${gu(r).slice(1)}`}async function wI(s){const e=await gI(s),n=zi().gapi;return Se(n,s,"internal-error"),e.open({where:document.body,url:bI(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TI,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=Bi(s,"network-request-failed"),m=zi().setTimeout(()=>{u(f)},yI.get());function y(){zi().clearTimeout(m),o(r)}r.ping(y).then(y,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SI=500,xI=600,II="_blank",RI="http://localhost";class $_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CI(s,e,n,r=SI,o=xI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const y={...AI,width:r.toString(),height:o.toString(),top:u,left:f},_=mn().toLowerCase();n&&(m=VT(_)?II:n),MT(_)&&(e=e||RI,y.scrollbars="yes");const E=Object.entries(y).reduce((S,[P,U])=>`${S}${P}=${U},`,"");if(Y1(_)&&m!=="_self")return NI(e||"",m),new $_(null);const I=window.open(e||"",m,E);Se(I,s,"popup-blocked");try{I.focus()}catch{}return new $_(I)}function NI(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="__/auth/handler",OI="emulator/auth/handler",MI=encodeURIComponent("fac");async function K_(s,e,n,r,o,u){Se(s.config.authDomain,s,"auth-domain-config-required"),Se(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:jo,eventId:o};if(e instanceof HT){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",dS(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,I]of Object.entries({}))f[E]=I}if(e instanceof vu){const E=e.getScopes().filter(I=>I!=="");E.length>0&&(f.scopes=E.join(","))}s.tenantId&&(f.tid=s.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const y=await s._getAppCheckToken(),_=y?`#${MI}=${encodeURIComponent(y)}`:"";return`${PI(s)}?${gu(m).slice(1)}${_}`}function PI({config:s}){return s.emulator?ap(s,OI):`https://${s.authDomain}/${DI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="webStorageSupport";class VI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZT,this._completeRedirectFn=rI,this._overrideRedirectResult=nI}async _openPopup(e,n,r,o){Rs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await K_(e,n,r,xm(),o);return CI(e,u,hp())}async _openRedirect(e,n,r,o){await this._originValidation(e);const u=await K_(e,n,r,xm(),o);return jx(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Rs(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await wI(e),r=new oI(e);return n.register("authEvent",o=>(Se(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cm,{type:cm},o=>{const u=o?.[0]?.[cm];u!==void 0&&n(!!u),vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return FT()||PT()||lp()}}const kI=VI;var Q_="@firebase/auth",Y_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UI(s){$i(new _i("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=r.options;Se(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:f,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BT(s)},_=new nx(r,o,u,y);return fx(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),$i(new _i("auth-internal",e=>{const n=ba(e.getProvider("auth").getImmediate());return(r=>new LI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ui(Q_,Y_,jI(s)),ui(Q_,Y_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=300,BI=pT("authIdTokenMaxAge")||FI;let X_=null;const zI=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>BI)return;const o=n?.token;X_!==o&&(X_=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function GI(s=sp()){const e=Ea(s,"auth");if(e.isInitialized())return e.getImmediate();const n=hx(s,{popupRedirectResolver:kI,persistence:[$x,Vx,ZT]}),r=pT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=zI(u.toString());Nx(n,f,()=>f(n.currentUser)),Cx(n,m=>f(m))}}const o=dT("auth");return o&&dx(n,`http://${o}`),n}function qI(){return document.getElementsByTagName("head")?.[0]??document}ix({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=Bi("internal-error");u.customData=o,n(u)},r.type="text/javascript",r.charset="UTF-8",qI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UI("Browser");var Z_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mr,rE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,x){function C(){}C.prototype=x.prototype,O.D=x.prototype,O.prototype=new C,O.prototype.constructor=O,O.C=function(D,M,V){for(var A=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)A[Ne-2]=arguments[Ne];return x.prototype[M].apply(D,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,x,C){C||(C=0);var D=Array(16);if(typeof x=="string")for(var M=0;16>M;++M)D[M]=x.charCodeAt(C++)|x.charCodeAt(C++)<<8|x.charCodeAt(C++)<<16|x.charCodeAt(C++)<<24;else for(M=0;16>M;++M)D[M]=x[C++]|x[C++]<<8|x[C++]<<16|x[C++]<<24;x=O.g[0],C=O.g[1],M=O.g[2];var V=O.g[3],A=x+(V^C&(M^V))+D[0]+3614090360&4294967295;x=C+(A<<7&4294967295|A>>>25),A=V+(M^x&(C^M))+D[1]+3905402710&4294967295,V=x+(A<<12&4294967295|A>>>20),A=M+(C^V&(x^C))+D[2]+606105819&4294967295,M=V+(A<<17&4294967295|A>>>15),A=C+(x^M&(V^x))+D[3]+3250441966&4294967295,C=M+(A<<22&4294967295|A>>>10),A=x+(V^C&(M^V))+D[4]+4118548399&4294967295,x=C+(A<<7&4294967295|A>>>25),A=V+(M^x&(C^M))+D[5]+1200080426&4294967295,V=x+(A<<12&4294967295|A>>>20),A=M+(C^V&(x^C))+D[6]+2821735955&4294967295,M=V+(A<<17&4294967295|A>>>15),A=C+(x^M&(V^x))+D[7]+4249261313&4294967295,C=M+(A<<22&4294967295|A>>>10),A=x+(V^C&(M^V))+D[8]+1770035416&4294967295,x=C+(A<<7&4294967295|A>>>25),A=V+(M^x&(C^M))+D[9]+2336552879&4294967295,V=x+(A<<12&4294967295|A>>>20),A=M+(C^V&(x^C))+D[10]+4294925233&4294967295,M=V+(A<<17&4294967295|A>>>15),A=C+(x^M&(V^x))+D[11]+2304563134&4294967295,C=M+(A<<22&4294967295|A>>>10),A=x+(V^C&(M^V))+D[12]+1804603682&4294967295,x=C+(A<<7&4294967295|A>>>25),A=V+(M^x&(C^M))+D[13]+4254626195&4294967295,V=x+(A<<12&4294967295|A>>>20),A=M+(C^V&(x^C))+D[14]+2792965006&4294967295,M=V+(A<<17&4294967295|A>>>15),A=C+(x^M&(V^x))+D[15]+1236535329&4294967295,C=M+(A<<22&4294967295|A>>>10),A=x+(M^V&(C^M))+D[1]+4129170786&4294967295,x=C+(A<<5&4294967295|A>>>27),A=V+(C^M&(x^C))+D[6]+3225465664&4294967295,V=x+(A<<9&4294967295|A>>>23),A=M+(x^C&(V^x))+D[11]+643717713&4294967295,M=V+(A<<14&4294967295|A>>>18),A=C+(V^x&(M^V))+D[0]+3921069994&4294967295,C=M+(A<<20&4294967295|A>>>12),A=x+(M^V&(C^M))+D[5]+3593408605&4294967295,x=C+(A<<5&4294967295|A>>>27),A=V+(C^M&(x^C))+D[10]+38016083&4294967295,V=x+(A<<9&4294967295|A>>>23),A=M+(x^C&(V^x))+D[15]+3634488961&4294967295,M=V+(A<<14&4294967295|A>>>18),A=C+(V^x&(M^V))+D[4]+3889429448&4294967295,C=M+(A<<20&4294967295|A>>>12),A=x+(M^V&(C^M))+D[9]+568446438&4294967295,x=C+(A<<5&4294967295|A>>>27),A=V+(C^M&(x^C))+D[14]+3275163606&4294967295,V=x+(A<<9&4294967295|A>>>23),A=M+(x^C&(V^x))+D[3]+4107603335&4294967295,M=V+(A<<14&4294967295|A>>>18),A=C+(V^x&(M^V))+D[8]+1163531501&4294967295,C=M+(A<<20&4294967295|A>>>12),A=x+(M^V&(C^M))+D[13]+2850285829&4294967295,x=C+(A<<5&4294967295|A>>>27),A=V+(C^M&(x^C))+D[2]+4243563512&4294967295,V=x+(A<<9&4294967295|A>>>23),A=M+(x^C&(V^x))+D[7]+1735328473&4294967295,M=V+(A<<14&4294967295|A>>>18),A=C+(V^x&(M^V))+D[12]+2368359562&4294967295,C=M+(A<<20&4294967295|A>>>12),A=x+(C^M^V)+D[5]+4294588738&4294967295,x=C+(A<<4&4294967295|A>>>28),A=V+(x^C^M)+D[8]+2272392833&4294967295,V=x+(A<<11&4294967295|A>>>21),A=M+(V^x^C)+D[11]+1839030562&4294967295,M=V+(A<<16&4294967295|A>>>16),A=C+(M^V^x)+D[14]+4259657740&4294967295,C=M+(A<<23&4294967295|A>>>9),A=x+(C^M^V)+D[1]+2763975236&4294967295,x=C+(A<<4&4294967295|A>>>28),A=V+(x^C^M)+D[4]+1272893353&4294967295,V=x+(A<<11&4294967295|A>>>21),A=M+(V^x^C)+D[7]+4139469664&4294967295,M=V+(A<<16&4294967295|A>>>16),A=C+(M^V^x)+D[10]+3200236656&4294967295,C=M+(A<<23&4294967295|A>>>9),A=x+(C^M^V)+D[13]+681279174&4294967295,x=C+(A<<4&4294967295|A>>>28),A=V+(x^C^M)+D[0]+3936430074&4294967295,V=x+(A<<11&4294967295|A>>>21),A=M+(V^x^C)+D[3]+3572445317&4294967295,M=V+(A<<16&4294967295|A>>>16),A=C+(M^V^x)+D[6]+76029189&4294967295,C=M+(A<<23&4294967295|A>>>9),A=x+(C^M^V)+D[9]+3654602809&4294967295,x=C+(A<<4&4294967295|A>>>28),A=V+(x^C^M)+D[12]+3873151461&4294967295,V=x+(A<<11&4294967295|A>>>21),A=M+(V^x^C)+D[15]+530742520&4294967295,M=V+(A<<16&4294967295|A>>>16),A=C+(M^V^x)+D[2]+3299628645&4294967295,C=M+(A<<23&4294967295|A>>>9),A=x+(M^(C|~V))+D[0]+4096336452&4294967295,x=C+(A<<6&4294967295|A>>>26),A=V+(C^(x|~M))+D[7]+1126891415&4294967295,V=x+(A<<10&4294967295|A>>>22),A=M+(x^(V|~C))+D[14]+2878612391&4294967295,M=V+(A<<15&4294967295|A>>>17),A=C+(V^(M|~x))+D[5]+4237533241&4294967295,C=M+(A<<21&4294967295|A>>>11),A=x+(M^(C|~V))+D[12]+1700485571&4294967295,x=C+(A<<6&4294967295|A>>>26),A=V+(C^(x|~M))+D[3]+2399980690&4294967295,V=x+(A<<10&4294967295|A>>>22),A=M+(x^(V|~C))+D[10]+4293915773&4294967295,M=V+(A<<15&4294967295|A>>>17),A=C+(V^(M|~x))+D[1]+2240044497&4294967295,C=M+(A<<21&4294967295|A>>>11),A=x+(M^(C|~V))+D[8]+1873313359&4294967295,x=C+(A<<6&4294967295|A>>>26),A=V+(C^(x|~M))+D[15]+4264355552&4294967295,V=x+(A<<10&4294967295|A>>>22),A=M+(x^(V|~C))+D[6]+2734768916&4294967295,M=V+(A<<15&4294967295|A>>>17),A=C+(V^(M|~x))+D[13]+1309151649&4294967295,C=M+(A<<21&4294967295|A>>>11),A=x+(M^(C|~V))+D[4]+4149444226&4294967295,x=C+(A<<6&4294967295|A>>>26),A=V+(C^(x|~M))+D[11]+3174756917&4294967295,V=x+(A<<10&4294967295|A>>>22),A=M+(x^(V|~C))+D[2]+718787259&4294967295,M=V+(A<<15&4294967295|A>>>17),A=C+(V^(M|~x))+D[9]+3951481745&4294967295,O.g[0]=O.g[0]+x&4294967295,O.g[1]=O.g[1]+(M+(A<<21&4294967295|A>>>11))&4294967295,O.g[2]=O.g[2]+M&4294967295,O.g[3]=O.g[3]+V&4294967295}r.prototype.u=function(O,x){x===void 0&&(x=O.length);for(var C=x-this.blockSize,D=this.B,M=this.h,V=0;V<x;){if(M==0)for(;V<=C;)o(this,O,V),V+=this.blockSize;if(typeof O=="string"){for(;V<x;)if(D[M++]=O.charCodeAt(V++),M==this.blockSize){o(this,D),M=0;break}}else for(;V<x;)if(D[M++]=O[V++],M==this.blockSize){o(this,D),M=0;break}}this.h=M,this.o+=x},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var x=1;x<O.length-8;++x)O[x]=0;var C=8*this.o;for(x=O.length-8;x<O.length;++x)O[x]=C&255,C/=256;for(this.u(O),O=Array(16),x=C=0;4>x;++x)for(var D=0;32>D;D+=8)O[C++]=this.g[x]>>>D&255;return O};function u(O,x){var C=m;return Object.prototype.hasOwnProperty.call(C,O)?C[O]:C[O]=x(O)}function f(O,x){this.h=x;for(var C=[],D=!0,M=O.length-1;0<=M;M--){var V=O[M]|0;D&&V==x||(C[M]=V,D=!1)}this.g=C}var m={};function y(O){return-128<=O&&128>O?u(O,function(x){return new f([x|0],0>x?-1:0)}):new f([O|0],0>O?-1:0)}function _(O){if(isNaN(O)||!isFinite(O))return I;if(0>O)return H(_(-O));for(var x=[],C=1,D=0;O>=C;D++)x[D]=O/C|0,C*=4294967296;return new f(x,0)}function E(O,x){if(O.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(O.charAt(0)=="-")return H(E(O.substring(1),x));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=_(Math.pow(x,8)),D=I,M=0;M<O.length;M+=8){var V=Math.min(8,O.length-M),A=parseInt(O.substring(M,M+V),x);8>V?(V=_(Math.pow(x,V)),D=D.j(V).add(_(A))):(D=D.j(C),D=D.add(_(A)))}return D}var I=y(0),S=y(1),P=y(16777216);s=f.prototype,s.m=function(){if(X(this))return-H(this).m();for(var O=0,x=1,C=0;C<this.g.length;C++){var D=this.i(C);O+=(0<=D?D:4294967296+D)*x,x*=4294967296}return O},s.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(U(this))return"0";if(X(this))return"-"+H(this).toString(O);for(var x=_(Math.pow(O,6)),C=this,D="";;){var M=Z(C,x).g;C=ae(C,M.j(x));var V=((0<C.g.length?C.g[0]:C.h)>>>0).toString(O);if(C=M,U(C))return V+D;for(;6>V.length;)V="0"+V;D=V+D}},s.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function U(O){if(O.h!=0)return!1;for(var x=0;x<O.g.length;x++)if(O.g[x]!=0)return!1;return!0}function X(O){return O.h==-1}s.l=function(O){return O=ae(this,O),X(O)?-1:U(O)?0:1};function H(O){for(var x=O.g.length,C=[],D=0;D<x;D++)C[D]=~O.g[D];return new f(C,~O.h).add(S)}s.abs=function(){return X(this)?H(this):this},s.add=function(O){for(var x=Math.max(this.g.length,O.g.length),C=[],D=0,M=0;M<=x;M++){var V=D+(this.i(M)&65535)+(O.i(M)&65535),A=(V>>>16)+(this.i(M)>>>16)+(O.i(M)>>>16);D=A>>>16,V&=65535,A&=65535,C[M]=A<<16|V}return new f(C,C[C.length-1]&-2147483648?-1:0)};function ae(O,x){return O.add(H(x))}s.j=function(O){if(U(this)||U(O))return I;if(X(this))return X(O)?H(this).j(H(O)):H(H(this).j(O));if(X(O))return H(this.j(H(O)));if(0>this.l(P)&&0>O.l(P))return _(this.m()*O.m());for(var x=this.g.length+O.g.length,C=[],D=0;D<2*x;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(var M=0;M<O.g.length;M++){var V=this.i(D)>>>16,A=this.i(D)&65535,Ne=O.i(M)>>>16,ve=O.i(M)&65535;C[2*D+2*M]+=A*ve,Q(C,2*D+2*M),C[2*D+2*M+1]+=V*ve,Q(C,2*D+2*M+1),C[2*D+2*M+1]+=A*Ne,Q(C,2*D+2*M+1),C[2*D+2*M+2]+=V*Ne,Q(C,2*D+2*M+2)}for(D=0;D<x;D++)C[D]=C[2*D+1]<<16|C[2*D];for(D=x;D<2*x;D++)C[D]=0;return new f(C,0)};function Q(O,x){for(;(O[x]&65535)!=O[x];)O[x+1]+=O[x]>>>16,O[x]&=65535,x++}function te(O,x){this.g=O,this.h=x}function Z(O,x){if(U(x))throw Error("division by zero");if(U(O))return new te(I,I);if(X(O))return x=Z(H(O),x),new te(H(x.g),H(x.h));if(X(x))return x=Z(O,H(x)),new te(H(x.g),x.h);if(30<O.g.length){if(X(O)||X(x))throw Error("slowDivide_ only works with positive integers.");for(var C=S,D=x;0>=D.l(O);)C=ie(C),D=ie(D);var M=le(C,1),V=le(D,1);for(D=le(D,2),C=le(C,2);!U(D);){var A=V.add(D);0>=A.l(O)&&(M=M.add(C),V=A),D=le(D,1),C=le(C,1)}return x=ae(O,M.j(x)),new te(M,x)}for(M=I;0<=O.l(x);){for(C=Math.max(1,Math.floor(O.m()/x.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),V=_(C),A=V.j(x);X(A)||0<A.l(O);)C-=D,V=_(C),A=V.j(x);U(V)&&(V=S),M=M.add(V),O=ae(O,A)}return new te(M,O)}s.A=function(O){return Z(this,O).h},s.and=function(O){for(var x=Math.max(this.g.length,O.g.length),C=[],D=0;D<x;D++)C[D]=this.i(D)&O.i(D);return new f(C,this.h&O.h)},s.or=function(O){for(var x=Math.max(this.g.length,O.g.length),C=[],D=0;D<x;D++)C[D]=this.i(D)|O.i(D);return new f(C,this.h|O.h)},s.xor=function(O){for(var x=Math.max(this.g.length,O.g.length),C=[],D=0;D<x;D++)C[D]=this.i(D)^O.i(D);return new f(C,this.h^O.h)};function ie(O){for(var x=O.g.length+1,C=[],D=0;D<x;D++)C[D]=O.i(D)<<1|O.i(D-1)>>>31;return new f(C,O.h)}function le(O,x){var C=x>>5;x%=32;for(var D=O.g.length-C,M=[],V=0;V<D;V++)M[V]=0<x?O.i(V+C)>>>x|O.i(V+C+1)<<32-x:O.i(V+C);return new f(M,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rE=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=E,mr=f}).apply(typeof Z_<"u"?Z_:typeof self<"u"?self:typeof window<"u"?window:{});var Hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aE,Ql,oE,nh,Nm,lE,uE,cE;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,v){return c==Array.prototype||c==Object.prototype||(c[g]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hc=="object"&&Hc];for(var g=0;g<c.length;++g){var v=c[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function o(c,g){if(g)e:{var v=r;c=c.split(".");for(var w=0;w<c.length-1;w++){var j=c[w];if(!(j in v))break e;v=v[j]}c=c[c.length-1],w=v[c],g=g(w),g!=w&&g!=null&&e(v,c,{configurable:!0,writable:!0,value:g})}}function u(c,g){c instanceof String&&(c+="");var v=0,w=!1,j={next:function(){if(!w&&v<c.length){var $=v++;return{value:g($,c[$]),done:!1}}return w=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(c){return c||function(){return u(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function y(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function _(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function E(c,g,v){return c.call.apply(c.bind,arguments)}function I(c,g,v){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,w),c.apply(g,j)}}return function(){return c.apply(g,arguments)}}function S(c,g,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:I,S.apply(null,arguments)}function P(c,g){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function U(c,g){function v(){}v.prototype=g.prototype,c.aa=g.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(w,j,$){for(var fe=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)fe[Ge-2]=arguments[Ge];return g.prototype[j].apply(w,fe)}}function X(c){const g=c.length;if(0<g){const v=Array(g);for(let w=0;w<g;w++)v[w]=c[w];return v}return[]}function H(c,g){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(y(w)){const j=c.length||0,$=w.length||0;c.length=j+$;for(let fe=0;fe<$;fe++)c[j+fe]=w[fe]}else c.push(w)}}class ae{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function Q(c){return/^[\s\xa0]*$/.test(c)}function te(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function Z(c){return Z[" "](c),c}Z[" "]=function(){};var ie=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function le(c,g,v){for(const w in c)g.call(v,c[w],w,c)}function O(c,g){for(const v in c)g.call(void 0,c[v],v,c)}function x(c){const g={};for(const v in c)g[v]=c[v];return g}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,g){let v,w;for(let j=1;j<arguments.length;j++){w=arguments[j];for(v in w)c[v]=w[v];for(let $=0;$<C.length;$++)v=C[$],Object.prototype.hasOwnProperty.call(w,v)&&(c[v]=w[v])}}function M(c){var g=1;c=c.split(":");const v=[];for(;0<g&&c.length;)v.push(c.shift()),g--;return c.length&&v.push(c.join(":")),v}function V(c){m.setTimeout(()=>{throw c},0)}function A(){var c=de;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Ne{constructor(){this.h=this.g=null}add(g,v){const w=ve.get();w.set(g,v),this.h?this.h.next=w:this.g=w,this.h=w}}var ve=new ae(()=>new z,c=>c.reset());class z{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let K,he=!1,de=new Ne,R=()=>{const c=m.Promise.resolve(void 0);K=()=>{c.then(W)}};var W=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(v){V(v)}var g=ve;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}he=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,g),m.removeEventListener("test",v,g)}catch{}return c}();function ge(c,g){if(se.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(ie){e:{try{Z(g.nodeName);var j=!0;break e}catch{}j=!1}j||(g=null)}}else v=="mouseover"?g=c.fromElement:v=="mouseout"&&(g=c.toElement);this.relatedTarget=g,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:_e[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ge.aa.h.call(this)}}U(ge,se);var _e={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Qe="closure_listenable_"+(1e6*Math.random()|0),Ve=0;function ut(c,g,v,w,j){this.listener=c,this.proxy=null,this.src=g,this.type=v,this.capture=!!w,this.ha=j,this.key=++Ve,this.da=this.fa=!1}function ct(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Tt(c){this.src=c,this.g={},this.h=0}Tt.prototype.add=function(c,g,v,w,j){var $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);var fe=on(c,g,w,j);return-1<fe?(g=c[fe],v||(g.fa=!1)):(g=new ut(g,this.src,$,!!w,j),g.fa=v,c.push(g)),g};function pn(c,g){var v=g.type;if(v in c.g){var w=c.g[v],j=Array.prototype.indexOf.call(w,g,void 0),$;($=0<=j)&&Array.prototype.splice.call(w,j,1),$&&(ct(g),c.g[v].length==0&&(delete c.g[v],c.h--))}}function on(c,g,v,w){for(var j=0;j<c.length;++j){var $=c[j];if(!$.da&&$.listener==g&&$.capture==!!v&&$.ha==w)return j}return-1}var qn="closure_lm_"+(1e6*Math.random()|0),bi={};function Ia(c,g,v,w,j){if(Array.isArray(g)){for(var $=0;$<g.length;$++)Ia(c,g[$],v,w,j);return null}return v=Dr(v),c&&c[Qe]?c.K(g,v,_(w)?!!w.capture:!1,j):gn(c,g,v,!1,w,j)}function gn(c,g,v,w,j,$){if(!g)throw Error("Invalid event type");var fe=_(j)?!!j.capture:!!j,Ge=Qi(c);if(Ge||(c[qn]=Ge=new Tt(c)),v=Ge.add(g,v,w,fe,$),v.proxy)return v;if(w=Ra(),v.proxy=w,w.src=c,w.listener=v,c.addEventListener)me||(j=fe),j===void 0&&(j=!1),c.addEventListener(g.toString(),w,j);else if(c.attachEvent)c.attachEvent(wi(g.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ra(){function c(v){return g.call(c.src,c.listener,v)}const g=Ho;return c}function Ds(c,g,v,w,j){if(Array.isArray(g))for(var $=0;$<g.length;$++)Ds(c,g[$],v,w,j);else w=_(w)?!!w.capture:!!w,v=Dr(v),c&&c[Qe]?(c=c.i,g=String(g).toString(),g in c.g&&($=c.g[g],v=on($,v,w,j),-1<v&&(ct($[v]),Array.prototype.splice.call($,v,1),$.length==0&&(delete c.g[g],c.h--)))):c&&(c=Qi(c))&&(g=c.g[g.toString()],c=-1,g&&(c=on(g,v,w,j)),(v=-1<c?g[c]:null)&&Os(v))}function Os(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Qe])pn(g.i,c);else{var v=c.type,w=c.proxy;g.removeEventListener?g.removeEventListener(v,w,c.capture):g.detachEvent?g.detachEvent(wi(v),w):g.addListener&&g.removeListener&&g.removeListener(w),(v=Qi(g))?(pn(v,c),v.h==0&&(v.src=null,g[qn]=null)):ct(c)}}}function wi(c){return c in bi?bi[c]:bi[c]="on"+c}function Ho(c,g){if(c.da)c=!0;else{g=new ge(g,this);var v=c.listener,w=c.ha||c.src;c.fa&&Os(c),c=v.call(w,g)}return c}function Qi(c){return c=c[qn],c instanceof Tt?c:null}var Nr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dr(c){return typeof c=="function"?c:(c[Nr]||(c[Nr]=function(g){return c.handleEvent(g)}),c[Nr])}function mt(){ce.call(this),this.i=new Tt(this),this.M=this,this.F=null}U(mt,ce),mt.prototype[Qe]=!0,mt.prototype.removeEventListener=function(c,g,v,w){Ds(this,c,g,v,w)};function $e(c,g){var v,w=c.F;if(w)for(v=[];w;w=w.F)v.push(w);if(c=c.M,w=g.type||g,typeof g=="string")g=new se(g,c);else if(g instanceof se)g.target=g.target||c;else{var j=g;g=new se(w,c),D(g,j)}if(j=!0,v)for(var $=v.length-1;0<=$;$--){var fe=g.g=v[$];j=yn(fe,w,!0,g)&&j}if(fe=g.g=c,j=yn(fe,w,!0,g)&&j,j=yn(fe,w,!1,g)&&j,v)for($=0;$<v.length;$++)fe=g.g=v[$],j=yn(fe,w,!1,g)&&j}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var v=c.g[g],w=0;w<v.length;w++)ct(v[w]);delete c.g[g],c.h--}}this.F=null},mt.prototype.K=function(c,g,v,w){return this.i.add(String(c),g,!1,v,w)},mt.prototype.L=function(c,g,v,w){return this.i.add(String(c),g,!0,v,w)};function yn(c,g,v,w){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var j=!0,$=0;$<g.length;++$){var fe=g[$];if(fe&&!fe.da&&fe.capture==v){var Ge=fe.listener,Ut=fe.ha||fe.src;fe.fa&&pn(c.i,fe),j=Ge.call(Ut,w)!==!1&&j}}return j&&!w.defaultPrevented}function jt(c,g,v){if(typeof c=="function")v&&(c=S(c,v));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:m.setTimeout(c,g||0)}function Or(c){c.g=jt(()=>{c.g=null,c.i&&(c.i=!1,Or(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Ca extends ce{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Or(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yi(c){ce.call(this),this.h=c,this.g={}}U(Yi,ce);var Ai=[];function Xi(c){le(c.g,function(g,v){this.g.hasOwnProperty(v)&&Os(g)},c),c.g={}}Yi.prototype.N=function(){Yi.aa.N.call(this),Xi(this)},Yi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bn=m.JSON.stringify,Si=m.JSON.parse,Zi=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Ji(){}Ji.prototype.h=null;function Mr(c){return c.h||(c.h=c.i())}function Pr(){}var Mn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ci(){se.call(this,"d")}U(ci,se);function es(){se.call(this,"c")}U(es,se);var Hn={},Ms=null;function Wn(){return Ms=Ms||new mt}Hn.La="serverreachability";function Ps(c){se.call(this,Hn.La,c)}U(Ps,se);function Xe(c){const g=Wn();$e(g,new Ps(g))}Hn.STAT_EVENT="statevent";function Na(c,g){se.call(this,Hn.STAT_EVENT,c),this.stat=g}U(Na,se);function ht(c){const g=Wn();$e(g,new Na(g,c))}Hn.Ma="timingevent";function _t(c,g){se.call(this,Hn.Ma,c),this.size=g}U(_t,se);function St(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},g)}function wn(){this.g=!0}wn.prototype.xa=function(){this.g=!1};function Vr(c,g,v,w,j,$){c.info(function(){if(c.g)if($)for(var fe="",Ge=$.split("&"),Ut=0;Ut<Ge.length;Ut++){var qe=Ge[Ut].split("=");if(1<qe.length){var Ht=qe[0];qe=qe[1];var Ft=Ht.split("_");fe=2<=Ft.length&&Ft[1]=="type"?fe+(Ht+"="+qe+"&"):fe+(Ht+"=redacted&")}}else fe=null;else fe=$;return"XMLHTTP REQ ("+w+") [attempt "+j+"]: "+g+`
`+v+`
`+fe})}function Wo(c,g,v,w,j,$,fe){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+j+"]: "+g+`
`+v+`
`+$+" "+fe})}function xi(c,g,v,w){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+ts(c,v)+(w?" "+w:"")})}function Da(c,g){c.info(function(){return"TIMEOUT: "+g})}wn.prototype.info=function(){};function ts(c,g){if(!c.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var w=v[c];if(!(2>w.length)){var j=w[1];if(Array.isArray(j)&&!(1>j.length)){var $=j[0];if($!="noop"&&$!="stop"&&$!="close")for(var fe=1;fe<j.length;fe++)j[fe]=""}}}}return bn(v)}catch{return g}}var $n={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kn;function Qn(){}U(Qn,Ji),Qn.prototype.g=function(){return new XMLHttpRequest},Qn.prototype.i=function(){return{}},Kn=new Qn;function Yt(c,g,v,w){this.j=c,this.i=g,this.l=v,this.R=w||1,this.U=new Yi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Et}function Et(){this.i=null,this.g="",this.h=!1}var kr={},Vs={};function Xt(c,g,v){c.L=1,c.v=Ur(Pn(g)),c.m=v,c.P=!0,ue(c,null)}function ue(c,g){c.F=Date.now(),ze(c),c.A=Pn(c.v);var v=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),Zo(v.i,"t",w),c.C=0,v=c.j.J,c.h=new Et,c.g=Fu(c.j,v?g:null,!c.m),0<c.O&&(c.M=new Ca(S(c.Y,c,c.g),c.O)),g=c.U,v=c.g,w=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(Ai[0]=j.toString()),j=Ai);for(var $=0;$<j.length;$++){var fe=Ia(v,j[$],w||g.handleEvent,!1,g.h||g);if(!fe)break;g.g[fe.key]=fe}g=c.H?x(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Xe(),Vr(c.i,c.u,c.A,c.l,c.R,c.m)}Yt.prototype.ca=function(c){c=c.target;const g=this.M;g&&Jn(c)==3?g.j():this.Y(c)},Yt.prototype.Y=function(c){try{if(c==this.g)e:{const Ft=Jn(this.g);var g=this.g.Ba();const us=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||Ou(this.g)))){this.J||Ft!=4||g==7||(g==8||0>=us?Xe(3):Xe(2)),it(this);var v=this.g.Z();this.X=v;t:if(De(this)){var w=Ou(this.g);c="";var j=w.length,$=Jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pt(this),Zt(this);var fe="";break t}this.h.i=new m.TextDecoder}for(g=0;g<j;g++)this.h.h=!0,c+=this.h.i.decode(w[g],{stream:!($&&g==j-1)});w.length=0,this.h.g+=c,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=v==200,Wo(this.i,this.u,this.A,this.l,this.R,Ft,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,Ut=this.g;if((Ge=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Ge)){var qe=Ge;break t}}qe=null}if(v=qe)xi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,An(this,v);else{this.o=!1,this.s=3,ht(12),pt(this),Zt(this);break e}}if(this.P){v=!0;let Jt;for(;!this.J&&this.C<fe.length;)if(Jt=ke(this,fe),Jt==Vs){Ft==4&&(this.s=4,ht(14),v=!1),xi(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==kr){this.s=4,ht(15),xi(this.i,this.l,fe,"[Invalid Chunk]"),v=!1;break}else xi(this.i,this.l,Jt,null),An(this,Jt);if(De(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||fe.length!=0||this.h.h||(this.s=1,ht(16),v=!1),this.o=this.o&&v,!v)xi(this.i,this.l,fe,"[Invalid Chunked Response]"),pt(this),Zt(this);else if(0<fe.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),$r(Ht),Ht.M=!0,ht(11))}}else xi(this.i,this.l,fe,null),An(this,fe);Ft==4&&pt(this),this.o&&!this.J&&(Ft==4?Lu(this.j,this):(this.o=!1,ze(this)))}else af(this.g),v==400&&0<fe.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),pt(this),Zt(this)}}}catch{}finally{}};function De(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ke(c,g){var v=c.C,w=g.indexOf(`
`,v);return w==-1?Vs:(v=Number(g.substring(v,w)),isNaN(v)?kr:(w+=1,w+v>g.length?Vs:(g=g.slice(w,w+v),c.C=w+v,g)))}Yt.prototype.cancel=function(){this.J=!0,pt(this)};function ze(c){c.S=Date.now()+c.I,et(c,c.I)}function et(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=St(S(c.ba,c),g)}function it(c){c.B&&(m.clearTimeout(c.B),c.B=null)}Yt.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Da(this.i,this.A),this.L!=2&&(Xe(),ht(17)),pt(this),this.s=2,Zt(this)):et(this,this.S-c)};function Zt(c){c.j.G==0||c.J||Lu(c.j,c)}function pt(c){it(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Xi(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function An(c,g){try{var v=c.j;if(v.G!=0&&(v.g==c||$o(v.h,c))){if(!c.K&&$o(v.h,c)&&v.G==3){try{var w=v.Da.g.parse(g)}catch{w=null}if(Array.isArray(w)&&w.length==3){var j=w;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)qa(v),za(v);else break e;il(v),ht(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=St(S(v.Za,v),6e3));if(1>=Pa(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else ls(v,11)}else if((c.K||v.g==c)&&qa(v),!Q(g))for(j=v.Da.g.parse(g),g=0;g<j.length;g++){let qe=j[g];if(v.T=qe[0],qe=qe[1],v.G==2)if(qe[0]=="c"){v.K=qe[1],v.ia=qe[2];const Ht=qe[3];Ht!=null&&(v.la=Ht,v.j.info("VER="+v.la));const Ft=qe[4];Ft!=null&&(v.Aa=Ft,v.j.info("SVER="+v.Aa));const us=qe[5];us!=null&&typeof us=="number"&&0<us&&(w=1.5*us,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Jt=c.g;if(Jt){const Mi=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mi){var $=w.h;$.g||Mi.indexOf("spdy")==-1&&Mi.indexOf("quic")==-1&&Mi.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Va($,$.h),$.h=null))}if(w.D){const rl=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;rl&&(w.ya=rl,st(w.I,w.D,rl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var fe=c;if(w.qa=Uu(w,w.J?w.ia:null,w.W),fe.K){_n(w.h,fe);var Ge=fe,Ut=w.L;Ut&&(Ge.I=Ut),Ge.B&&(it(Ge),ze(Ge)),w.g=fe}else Vu(w);0<v.i.length&&Ga(v)}else qe[0]!="stop"&&qe[0]!="close"||ls(v,7);else v.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?ls(v,7):tl(v):qe[0]!="noop"&&v.l&&v.l.ta(qe),v.v=0)}}Xe(4)}catch{}}var Oa=class{constructor(c,g){this.g=c,this.map=g}};function ns(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ma(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Pa(c){return c.h?1:c.g?c.g.size:0}function $o(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Va(c,g){c.g?c.g.add(g):c.h=g}function _n(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}ns.prototype.cancel=function(){if(this.i=Ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ko(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const v of c.g.values())g=g.concat(v.D);return g}return X(c.i)}function tf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(y(c)){for(var g=[],v=c.length,w=0;w<v;w++)g.push(c[w]);return g}g=[],v=0;for(w in c)g[v++]=c[w];return g}function ka(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(y(c)||typeof c=="string"){var g=[];c=c.length;for(var v=0;v<c;v++)g.push(v);return g}g=[],v=0;for(const w in c)g[v++]=w;return g}}}function Qo(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(y(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var v=ka(c),w=tf(c),j=w.length,$=0;$<j;$++)g.call(void 0,w[$],v&&v[$],c)}var Lr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nf(c,g){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var w=c[v].indexOf("="),j=null;if(0<=w){var $=c[v].substring(0,w);j=c[v].substring(w+1)}else $=c[v];g($,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Dt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Dt){this.h=c.h,jr(this,c.j),this.o=c.o,this.g=c.g,ks(this,c.s),this.l=c.l;var g=c.i,v=new ss;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),is(this,v),this.m=c.m}else c&&(g=String(c).match(Lr))?(this.h=!1,jr(this,g[1]||"",!0),this.o=Yn(g[2]||""),this.g=Yn(g[3]||"",!0),ks(this,g[4]),this.l=Yn(g[5]||"",!0),is(this,g[6]||"",!0),this.m=Yn(g[7]||"")):(this.h=!1,this.i=new ss(null,this.h))}Dt.prototype.toString=function(){var c=[],g=this.j;g&&c.push(Fr(g,Yo,!0),":");var v=this.g;return(v||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Fr(g,Yo,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Fr(v,v.charAt(0)=="/"?sf:Xo,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Fr(v,La)),c.join("")};function Pn(c){return new Dt(c)}function jr(c,g,v){c.j=v?Yn(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function ks(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function is(c,g,v){g instanceof ss?(c.i=g,Nu(c.i,c.h)):(v||(g=Fr(g,rf)),c.i=new ss(g,c.h))}function st(c,g,v){c.i.set(g,v)}function Ur(c){return st(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Yn(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Fr(c,g,v){return typeof c=="string"?(c=encodeURI(c).replace(g,Cu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Cu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Yo=/[#\/\?@]/g,Xo=/[#\?:]/g,sf=/[#\?]/g,rf=/[#\?@]/g,La=/#/g;function ss(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Xn(c){c.g||(c.g=new Map,c.h=0,c.i&&nf(c.i,function(g,v){c.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}s=ss.prototype,s.add=function(c,g){Xn(this),this.i=null,c=Ii(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(g),this.h+=1,this};function rs(c,g){Xn(c),g=Ii(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function as(c,g){return Xn(c),g=Ii(c,g),c.g.has(g)}s.forEach=function(c,g){Xn(this),this.g.forEach(function(v,w){v.forEach(function(j){c.call(g,j,w,this)},this)},this)},s.na=function(){Xn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let w=0;w<g.length;w++){const j=c[w];for(let $=0;$<j.length;$++)v.push(g[w])}return v},s.V=function(c){Xn(this);let g=[];if(typeof c=="string")as(this,c)&&(g=g.concat(this.g.get(Ii(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)g=g.concat(c[v])}return g},s.set=function(c,g){return Xn(this),this.i=null,c=Ii(this,c),as(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},s.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Zo(c,g,v){rs(c,g),0<v.length&&(c.i=null,c.g.set(Ii(c,g),X(v)),c.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var w=g[v];const $=encodeURIComponent(String(w)),fe=this.V(w);for(w=0;w<fe.length;w++){var j=$;fe[w]!==""&&(j+="="+encodeURIComponent(String(fe[w]))),c.push(j)}}return this.i=c.join("&")};function Ii(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Nu(c,g){g&&!c.j&&(Xn(c),c.i=null,c.g.forEach(function(v,w){var j=w.toLowerCase();w!=j&&(rs(this,w),Zo(this,j,v))},c)),c.j=g}function Br(c,g){const v=new wn;if(m.Image){const w=new Image;w.onload=P(Zn,v,"TestLoadImage: loaded",!0,g,w),w.onerror=P(Zn,v,"TestLoadImage: error",!1,g,w),w.onabort=P(Zn,v,"TestLoadImage: abort",!1,g,w),w.ontimeout=P(Zn,v,"TestLoadImage: timeout",!1,g,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else g(!1)}function fi(c,g){const v=new wn,w=new AbortController,j=setTimeout(()=>{w.abort(),Zn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:w.signal}).then($=>{clearTimeout(j),$.ok?Zn(v,"TestPingServer: ok",!0,g):Zn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(j),Zn(v,"TestPingServer: error",!1,g)})}function Zn(c,g,v,w,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),w(v)}catch{}}function zr(){this.g=new Zi}function Ri(c,g,v){const w=v||"";try{Qo(c,function(j,$){let fe=j;_(j)&&(fe=bn(j)),g.push(w+$+"="+encodeURIComponent(fe))})}catch(j){throw g.push(w+"type="+encodeURIComponent("_badmap")),j}}function Ls(c){this.l=c.Ub||null,this.j=c.eb||!1}U(Ls,Ji),Ls.prototype.g=function(){return new os(this.l,this.j)},Ls.prototype.i=function(c){return function(){return c}}({});function os(c,g){mt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(os,mt),s=os.prototype,s.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Ni(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||m).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ci(this)),this.readyState=0},s.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ni(this)),this.g&&(this.readyState=3,Ni(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}s.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Ci(this):Ni(this),this.readyState==3&&Jo(this)}},s.Ra=function(c){this.g&&(this.response=this.responseText=c,Ci(this))},s.Qa=function(c){this.g&&(this.response=c,Ci(this))},s.ga=function(){this.g&&Ci(this)};function Ci(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ni(c)}s.setRequestHeader=function(c,g){this.u.append(c,g)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=g.next();return c.join(`\r
`)};function Ni(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(os.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function el(c){let g="";return le(c,function(v,w){g+=w,g+=":",g+=v,g+=`\r
`}),g}function qt(c,g,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=el(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):st(c,g,v))}function Ze(c){mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(Ze,mt);var ja=/^https?$/i,Gr=["POST","PUT"];s=Ze.prototype,s.Ha=function(c){this.J=c},s.ea=function(c,g,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kn.g(),this.v=this.o?Mr(this.o):Mr(Kn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch($){Du(this,$);return}if(c=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var j in w)v.set(j,w[j]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())v.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),j=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Gr,g,void 0))||w||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,fe]of v)this.g.setRequestHeader($,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qr(this),this.u=!0,this.g.send(c),this.u=!1}catch($){Du(this,$)}};function Du(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Ua(c),Di(c)}function Ua(c){c.A||(c.A=!0,$e(c,"complete"),$e(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,$e(this,"complete"),$e(this,"abort"),Di(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Di(this,!0)),Ze.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Fa(this):this.bb())},s.bb=function(){Fa(this)};function Fa(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Jn(c)!=4||c.Z()!=2)){if(c.u&&Jn(c)==4)jt(c.Ea,0,c);else if($e(c,"readystatechange"),Jn(c)==4){c.h=!1;try{const fe=c.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var w;if(w=fe===0){var j=String(c.D).match(Lr)[1]||null;!j&&m.self&&m.self.location&&(j=m.self.location.protocol.slice(0,-1)),w=!ja.test(j?j.toLowerCase():"")}v=w}if(v)$e(c,"complete"),$e(c,"success");else{c.m=6;try{var $=2<Jn(c)?c.g.statusText:""}catch{$=""}c.l=$+" ["+c.Z()+"]",Ua(c)}}finally{Di(c)}}}}function Di(c,g){if(c.g){qr(c);const v=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||$e(c,"ready");try{v.onreadystatechange=w}catch{}}}function qr(c){c.I&&(m.clearTimeout(c.I),c.I=null)}s.isActive=function(){return!!this.g};function Jn(c){return c.g?c.g.readyState:0}s.Z=function(){try{return 2<Jn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Si(g)}};function Ou(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function af(c){const g={};c=(c.g&&2<=Jn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(Q(c[w]))continue;var v=M(c[w]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=g[j]||[];g[j]=$,$.push(v)}O(g,function(w){return w.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hr(c,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||g}function Ba(c){this.Aa=0,this.i=[],this.j=new wn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hr("baseRetryDelayMs",5e3,c),this.cb=Hr("retryDelaySeedMs",1e4,c),this.Wa=Hr("forwardChannelMaxRetries",2,c),this.wa=Hr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ns(c&&c.concurrentRequestLimit),this.Da=new zr,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Ba.prototype,s.la=8,s.G=1,s.connect=function(c,g,v,w){ht(0),this.W=c,this.H=g||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=Uu(this,null,this.W),Ga(this)};function tl(c){if(Mu(c),c.G==3){var g=c.U++,v=Pn(c.I);if(st(v,"SID",c.K),st(v,"RID",g),st(v,"TYPE","terminate"),Wr(c,v),g=new Yt(c,c.j,g),g.L=2,g.v=Ur(Pn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=g.v,v=!0),v||(g.g=Fu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ze(g)}ju(c)}function za(c){c.g&&($r(c),c.g.cancel(),c.g=null)}function Mu(c){za(c),c.u&&(m.clearTimeout(c.u),c.u=null),qa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Ga(c){if(!Ma(c.h)&&!c.s){c.s=!0;var g=c.Ga;K||R(),he||(K(),he=!0),de.add(g,c),c.B=0}}function of(c,g){return Pa(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=St(S(c.Ga,c,g),sl(c,c.B)),c.B++,!0)}s.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new Yt(this,this.j,c);let $=this.o;if(this.S&&($?($=x($),D($,this.S)):$=this.S),this.m!==null||this.O||(j.H=$,$=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(g+=w,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Pu(this,j,g),v=Pn(this.I),st(v,"RID",c),st(v,"CVER",22),this.D&&st(v,"X-HTTP-Session-Id",this.D),Wr(this,v),$&&(this.O?g="headers="+encodeURIComponent(String(el($)))+"&"+g:this.m&&qt(v,this.m,$)),Va(this.h,j),this.Ua&&st(v,"TYPE","init"),this.P?(st(v,"$req",g),st(v,"SID","null"),j.T=!0,Xt(j,v,null)):Xt(j,v,g),this.G=2}}else this.G==3&&(c?nl(this,c):this.i.length==0||Ma(this.h)||nl(this))};function nl(c,g){var v;g?v=g.l:v=c.U++;const w=Pn(c.I);st(w,"SID",c.K),st(w,"RID",v),st(w,"AID",c.T),Wr(c,w),c.m&&c.o&&qt(w,c.m,c.o),v=new Yt(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Pu(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Va(c.h,v),Xt(v,w,g)}function Wr(c,g){c.H&&le(c.H,function(v,w){st(g,w,v)}),c.l&&Qo({},function(v,w){st(g,w,v)})}function Pu(c,g,v){v=Math.min(c.i.length,v);var w=c.l?S(c.l.Na,c.l,c):null;e:{var j=c.i;let $=-1;for(;;){const fe=["count="+v];$==-1?0<v?($=j[0].g,fe.push("ofs="+$)):$=0:fe.push("ofs="+$);let Ge=!0;for(let Ut=0;Ut<v;Ut++){let qe=j[Ut].g;const Ht=j[Ut].map;if(qe-=$,0>qe)$=Math.max(0,j[Ut].g-100),Ge=!1;else try{Ri(Ht,fe,"req"+qe+"_")}catch{w&&w(Ht)}}if(Ge){w=fe.join("&");break e}}}return c=c.i.splice(0,v),g.D=c,w}function Vu(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;K||R(),he||(K(),he=!0),de.add(g,c),c.v=0}}function il(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=St(S(c.Fa,c),sl(c,c.v)),c.v++,!0)}s.Fa=function(){if(this.u=null,ku(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=St(S(this.ab,this),c)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),za(this),ku(this))};function $r(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function ku(c){c.g=new Yt(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=Pn(c.qa);st(g,"RID","rpc"),st(g,"SID",c.K),st(g,"AID",c.T),st(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&st(g,"TO",c.ja),st(g,"TYPE","xmlhttp"),Wr(c,g),c.m&&c.o&&qt(g,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Ur(Pn(g)),v.m=null,v.P=!0,ue(v,c)}s.Za=function(){this.C!=null&&(this.C=null,za(this),il(this),ht(19))};function qa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Lu(c,g){var v=null;if(c.g==g){qa(c),$r(c),c.g=null;var w=2}else if($o(c.h,g))v=g.D,_n(c.h,g),w=1;else return;if(c.G!=0){if(g.o)if(w==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var j=c.B;w=Wn(),$e(w,new _t(w,v)),Ga(c)}else Vu(c);else if(j=g.s,j==3||j==0&&0<g.X||!(w==1&&of(c,g)||w==2&&il(c)))switch(v&&0<v.length&&(g=c.h,g.i=g.i.concat(v)),j){case 1:ls(c,5);break;case 4:ls(c,10);break;case 3:ls(c,6);break;default:ls(c,2)}}}function sl(c,g){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*g}function ls(c,g){if(c.j.info("Error code "+g),g==2){var v=S(c.fb,c),w=c.Xa;const j=!w;w=new Dt(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||jr(w,"https"),Ur(w),j?Br(w.toString(),v):fi(w.toString(),v)}else ht(2);c.G=0,c.l&&c.l.sa(g),ju(c),Mu(c)}s.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function ju(c){if(c.G=0,c.ka=[],c.l){const g=Ko(c.h);(g.length!=0||c.i.length!=0)&&(H(c.ka,g),H(c.ka,c.i),c.h.i.length=0,X(c.i),c.i.length=0),c.l.ra()}}function Uu(c,g,v){var w=v instanceof Dt?Pn(v):new Dt(v);if(w.g!="")g&&(w.g=g+"."+w.g),ks(w,w.s);else{var j=m.location;w=j.protocol,g=g?g+"."+j.hostname:j.hostname,j=+j.port;var $=new Dt(null);w&&jr($,w),g&&($.g=g),j&&ks($,j),v&&($.l=v),w=$}return v=c.D,g=c.ya,v&&g&&st(w,v,g),st(w,"VER",c.la),Wr(c,w),w}function Fu(c,g,v){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Ze(new Ls({eb:v})):new Ze(c.pa),g.Ha(c.J),g}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bu(){}s=Bu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ha(){}Ha.prototype.g=function(c,g){return new vn(c,g)};function vn(c,g){mt.call(this),this.g=new Ba(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!Q(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!Q(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Oi(this)}U(vn,mt),vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){tl(this.g)},vn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=bn(c),c=v);g.i.push(new Oa(g.Ya++,c)),g.G==3&&Ga(g)},vn.prototype.N=function(){this.g.l=null,delete this.j,tl(this.g),delete this.g,vn.aa.N.call(this)};function zu(c){ci.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const v in g){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}U(zu,ci);function Gu(){es.call(this),this.status=1}U(Gu,es);function Oi(c){this.g=c}U(Oi,Bu),Oi.prototype.ua=function(){$e(this.g,"a")},Oi.prototype.ta=function(c){$e(this.g,new zu(c))},Oi.prototype.sa=function(c){$e(this.g,new Gu)},Oi.prototype.ra=function(){$e(this.g,"b")},Ha.prototype.createWebChannel=Ha.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,cE=function(){return new Ha},uE=function(){return Wn()},lE=Hn,Nm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$n.NO_ERROR=0,$n.TIMEOUT=8,$n.HTTP_ERROR=6,nh=$n,hi.COMPLETE="complete",oE=hi,Pr.EventType=Mn,Mn.OPEN="a",Mn.CLOSE="b",Mn.ERROR="c",Mn.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Ql=Pr,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,aE=Ze}).apply(typeof Hc<"u"?Hc:typeof self<"u"?self:typeof window<"u"?window:{});const J_="@firebase/firestore",ev="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=new Nh("@firebase/firestore");function Eo(){return ga.logLevel}function ye(s,...e){if(ga.logLevel<=Ue.DEBUG){const n=e.map(dp);ga.debug(`Firestore (${Fo}): ${s}`,...n)}}function Cs(s,...e){if(ga.logLevel<=Ue.ERROR){const n=e.map(dp);ga.error(`Firestore (${Fo}): ${s}`,...n)}}function No(s,...e){if(ga.logLevel<=Ue.WARN){const n=e.map(dp);ga.warn(`Firestore (${Fo}): ${s}`,...n)}}function dp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,hE(s,r,n)}function hE(s,e,n){let r=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Cs(r),new Error(r)}function Je(s,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||hE(e,o,r)}function Ce(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Ei{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hn.UNAUTHENTICATED))}shutdown(){}}class WI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $I{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Je(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,n(y)):Promise.resolve();let u=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new pr,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const y=u;e.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},m=y=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new pr)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string",31837,{l:r}),new fE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class KI{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class QI{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new KI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,oi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Je(this.o===void 0,3512);const r=u=>{u.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,ye("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new tv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new tv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=XI(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=e.charAt(o[u]%62))}return r}}function Fe(s,e){return s<e?-1:s>e?1:0}function Dm(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return hm(o)===hm(u)?Fe(o,u):hm(o)?1:-1}return Fe(s.length,e.length)}const ZI=55296,JI=57343;function hm(s){const e=s.charCodeAt(0);return e>=ZI&&e<=JI}function Do(s,e,n){return s.length===e.length&&s.every((r,o)=>n(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="__name__";class Ui{constructor(e,n,r){n===void 0?n=0:n>e.length&&xe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&xe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ui.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ui?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const u=Ui.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Fe(e.length,n.length)}static compareSegments(e,n){const r=Ui.isNumericId(e),o=Ui.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Ui.extractNumericId(e).compare(Ui.extractNumericId(n)):Dm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mr.fromString(e.substring(4,e.length-2))}}class dt extends Ui{construct(e,n,r){return new dt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new dt(n)}static emptyPath(){return new dt([])}}const eR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Ui{construct(e,n,r){return new rn(e,n,r)}static isValidIdentifier(e){return eR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nv}static keyField(){return new rn([nv])}static fromServerFormat(e){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new pe(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new pe(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new pe(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(r+=m,o++):(u(),o++)}if(u(),f)throw new pe(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(dt.fromString(e))}static fromName(e){return new be(dt.fromString(e).popFirst(5))}static empty(){return new be(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(s,e,n){if(!n)throw new pe(ee.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function tR(s,e,n,r){if(e===!0&&r===!0)throw new pe(ee.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function iv(s){if(!be.isDocumentKey(s))throw new pe(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function sv(s){if(be.isDocumentKey(s))throw new pe(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function mE(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Ph(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":xe(12329,{type:typeof s})}function yi(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new pe(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ph(s);throw new pe(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Eu(s,e){if(!mE(s))throw new pe(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const f=s[r];if(o&&typeof f!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new pe(ee.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=-62135596800,av=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*av);return new gt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<rv)throw new pe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/av}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:kt("string",gt._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new gt(0,0))}static max(){return new Re(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=-1;function nR(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new _r(o,be.empty(),e)}function iR(s){return new _r(s.readTime,s.key,uu)}class _r{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _r(Re.min(),be.empty(),uu)}static max(){return new _r(Re.max(),be.empty(),uu)}}function sR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(s.documentKey,e.documentKey),n!==0?n:Fe(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(s){if(s.code!==ee.FAILED_PRECONDITION||s.message!==rR)throw s;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):re.reject(n)}static resolve(e){return new re((n,r)=>{n(e)})}static reject(e){return new re((n,r)=>{r(e)})}static waitFor(e){return new re((n,r)=>{let o=0,u=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},y=>r(y))}),f=!0,u===o&&n()})}static or(e){let n=re.resolve(!1);for(const r of e)n=n.next(o=>o?re.resolve(o):r());return n}static forEach(e,n){const r=[];return e.forEach((o,u)=>{r.push(n.call(this,o,u))}),this.waitFor(r)}static mapArray(e,n){return new re((r,o)=>{const u=e.length,f=new Array(u);let m=0;for(let y=0;y<u;y++){const _=y;n(e[_]).next(E=>{f[_]=E,++m,m===u&&r(f)},E=>o(E))}})}static doWhile(e,n){return new re((r,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):r()};u()})}}function oR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp=-1;function kh(s){return s==null}function gh(s){return s===0&&1/s==-1/0}function lR(s){return typeof s=="number"&&Number.isInteger(s)&&!gh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="";function uR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=ov(e)),e=cR(s.get(n),e);return ov(e)}function cR(s,e){let n=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case pE:n+="";break;default:n+=u}}return n}function ov(s){return s+pE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Ir(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function gE(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.comparator=e,this.root=n||sn.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wc(this.root,e,this.comparator,!0)}}class Wc{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,n,r,o,u){this.key=e,this.value=n,this.color=r??sn.RED,this.left=o??sn.EMPTY,this.right=u??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,u){return new sn(e??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return sn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,n,r,o,u){return this}insert(e,n,r){return new sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uv(this.data.getIterator())}getIteratorFrom(e){return new uv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Gt(this.comparator);return n.data=e,n}}class uv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new zn([])}unionWith(e){let n=new Gt(rn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Do(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new yE("Invalid base64 string: "+u):u}}(e);return new an(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new an(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const hR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vr(s){if(Je(!!s,39018),typeof s=="string"){let e=0;const n=hR.exec(s);if(Je(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nt(s.seconds),nanos:Nt(s.nanos)}}function Nt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Tr(s){return typeof s=="string"?an.fromBase64String(s):an.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="server_timestamp",vE="__type__",TE="__previous_value__",EE="__local_write_time__";function gp(s){return(s?.mapValue?.fields||{})[vE]?.stringValue===_E}function Lh(s){const e=s.mapValue.fields[TE];return gp(e)?Lh(e):e}function cu(s){const e=vr(s.mapValue.fields[EE].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n,r,o,u,f,m,y,_,E){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=_,this.isUsingEmulator=E}}const yh="(default)";class hu{constructor(e,n){this.projectId=e,this.database=n||yh}static empty(){return new hu("","")}get isDefaultDatabase(){return this.database===yh}isEqual(e){return e instanceof hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="__type__",dR="__max__",$c={mapValue:{}},wE="__vector__",_h="value";function Er(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?gp(s)?4:pR(s)?9007199254740991:mR(s)?10:11:xe(28295,{value:s})}function Ki(s,e){if(s===e)return!0;const n=Er(s);if(n!==Er(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return cu(s).isEqual(cu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=vr(o.timestampValue),m=vr(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,u){return Tr(o.bytesValue).isEqual(Tr(u.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,u){return Nt(o.geoPointValue.latitude)===Nt(u.geoPointValue.latitude)&&Nt(o.geoPointValue.longitude)===Nt(u.geoPointValue.longitude)}(s,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Nt(o.integerValue)===Nt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=Nt(o.doubleValue),m=Nt(u.doubleValue);return f===m?gh(f)===gh(m):isNaN(f)&&isNaN(m)}return!1}(s,e);case 9:return Do(s.arrayValue.values||[],e.arrayValue.values||[],Ki);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(lv(f)!==lv(m))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(m[y]===void 0||!Ki(f[y],m[y])))return!1;return!0}(s,e);default:return xe(52216,{left:s})}}function fu(s,e){return(s.values||[]).find(n=>Ki(n,e))!==void 0}function Oo(s,e){if(s===e)return 0;const n=Er(s),r=Er(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(s.booleanValue,e.booleanValue);case 2:return function(u,f){const m=Nt(u.integerValue||u.doubleValue),y=Nt(f.integerValue||f.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(s,e);case 3:return cv(s.timestampValue,e.timestampValue);case 4:return cv(cu(s),cu(e));case 5:return Dm(s.stringValue,e.stringValue);case 6:return function(u,f){const m=Tr(u),y=Tr(f);return m.compareTo(y)}(s.bytesValue,e.bytesValue);case 7:return function(u,f){const m=u.split("/"),y=f.split("/");for(let _=0;_<m.length&&_<y.length;_++){const E=Fe(m[_],y[_]);if(E!==0)return E}return Fe(m.length,y.length)}(s.referenceValue,e.referenceValue);case 8:return function(u,f){const m=Fe(Nt(u.latitude),Nt(f.latitude));return m!==0?m:Fe(Nt(u.longitude),Nt(f.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return hv(s.arrayValue,e.arrayValue);case 10:return function(u,f){const m=u.fields||{},y=f.fields||{},_=m[_h]?.arrayValue,E=y[_h]?.arrayValue,I=Fe(_?.values?.length||0,E?.values?.length||0);return I!==0?I:hv(_,E)}(s.mapValue,e.mapValue);case 11:return function(u,f){if(u===$c.mapValue&&f===$c.mapValue)return 0;if(u===$c.mapValue)return 1;if(f===$c.mapValue)return-1;const m=u.fields||{},y=Object.keys(m),_=f.fields||{},E=Object.keys(_);y.sort(),E.sort();for(let I=0;I<y.length&&I<E.length;++I){const S=Dm(y[I],E[I]);if(S!==0)return S;const P=Oo(m[y[I]],_[E[I]]);if(P!==0)return P}return Fe(y.length,E.length)}(s.mapValue,e.mapValue);default:throw xe(23264,{he:n})}}function cv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Fe(s,e);const n=vr(s),r=vr(e),o=Fe(n.seconds,r.seconds);return o!==0?o:Fe(n.nanos,r.nanos)}function hv(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=Oo(n[o],r[o]);if(u)return u}return Fe(n.length,r.length)}function Mo(s){return Om(s)}function Om(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(n){const r=vr(n);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(n){return Tr(n).toBase64()}(s.bytesValue):"referenceValue"in s?function(n){return be.fromName(n).toString()}(s.referenceValue):"geoPointValue"in s?function(n){return`geo(${n.latitude},${n.longitude})`}(s.geoPointValue):"arrayValue"in s?function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=Om(u);return r+"]"}(s.arrayValue):"mapValue"in s?function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${Om(n.fields[f])}`;return o+"}"}(s.mapValue):xe(61005,{value:s})}function ih(s){switch(Er(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lh(s);return e?16+ih(e):16;case 5:return 2*s.stringValue.length;case 6:return Tr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,u)=>o+ih(u),0)}(s.arrayValue);case 10:case 11:return function(r){let o=0;return Ir(r.fields,(u,f)=>{o+=u.length+ih(f)}),o}(s.mapValue);default:throw xe(13486,{value:s})}}function fv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Mm(s){return!!s&&"integerValue"in s}function yp(s){return!!s&&"arrayValue"in s}function dv(s){return!!s&&"nullValue"in s}function mv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function sh(s){return!!s&&"mapValue"in s}function mR(s){return(s?.mapValue?.fields||{})[bE]?.stringValue===wE}function tu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ir(s.mapValue.fields,(n,r)=>e.mapValue.fields[n]=tu(r)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tu(s.arrayValue.values[n]);return e}return{...s}}function pR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===dR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tu(n)}setAll(e){let n=rn.emptyPath(),r={},o=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const y=this.getFieldsMap(n);this.applyChanges(y,r,o),r={},o=[],n=m.popLast()}f?r[m.lastSegment()]=tu(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(e){const n=this.field(e.popLast());sh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ki(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];sh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){Ir(n,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Nn(tu(this.value))}}function AE(s){const e=[];return Ir(s.fields,(n,r)=>{const o=new rn([n]);if(sh(r)){const u=AE(r.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n,r,o,u,f,m){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new fn(e,0,Re.min(),Re.min(),Re.min(),Nn.empty(),0)}static newFoundDocument(e,n,r,o){return new fn(e,1,n,Re.min(),r,o,0)}static newNoDocument(e,n){return new fn(e,2,n,Re.min(),Re.min(),Nn.empty(),0)}static newUnknownDocument(e,n){return new fn(e,3,n,Re.min(),Re.min(),Nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n){this.position=e,this.inclusive=n}}function pv(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],f=s.position[o];if(u.field.isKeyField()?r=be.comparator(be.fromName(f.referenceValue),n.key):r=Oo(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function gv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Ki(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n="asc"){this.field=e,this.dir=n}}function gR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{}class Vt extends SE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _R(e,n,r):n==="array-contains"?new ER(e,r):n==="in"?new bR(e,r):n==="not-in"?new wR(e,r):n==="array-contains-any"?new AR(e,r):new Vt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new vR(e,r):new TR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Oo(n,this.value)):n!==null&&Er(this.value)===Er(n)&&this.matchesComparison(Oo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ti extends SE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ti(e,n)}matches(e){return xE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xE(s){return s.op==="and"}function IE(s){return yR(s)&&xE(s)}function yR(s){for(const e of s.filters)if(e instanceof Ti)return!1;return!0}function Pm(s){if(s instanceof Vt)return s.field.canonicalString()+s.op.toString()+Mo(s.value);if(IE(s))return s.filters.map(e=>Pm(e)).join(",");{const e=s.filters.map(n=>Pm(n)).join(",");return`${s.op}(${e})`}}function RE(s,e){return s instanceof Vt?function(r,o){return o instanceof Vt&&r.op===o.op&&r.field.isEqual(o.field)&&Ki(r.value,o.value)}(s,e):s instanceof Ti?function(r,o){return o instanceof Ti&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((u,f,m)=>u&&RE(f,o.filters[m]),!0):!1}(s,e):void xe(19439)}function CE(s){return s instanceof Vt?function(n){return`${n.field.canonicalString()} ${n.op} ${Mo(n.value)}`}(s):s instanceof Ti?function(n){return n.op.toString()+" {"+n.getFilters().map(CE).join(" ,")+"}"}(s):"Filter"}class _R extends Vt{constructor(e,n,r){super(e,n,r),this.key=be.fromName(r.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class vR extends Vt{constructor(e,n){super(e,"in",n),this.keys=NE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class TR extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=NE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function NE(s,e){return(e.arrayValue?.values||[]).map(n=>be.fromName(n.referenceValue))}class ER extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yp(n)&&fu(n.arrayValue,this.value)}}class bR extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fu(this.value.arrayValue,n)}}class wR extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!fu(this.value.arrayValue,n)}}class AR extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n=null,r=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function yv(s,e=null,n=[],r=[],o=null,u=null,f=null){return new SR(s,e,n,r,o,u,f)}function _p(s){const e=Ce(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Pm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),kh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Mo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Mo(r)).join(",")),e.Te=n}return e.Te}function vp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!gR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!RE(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!gv(s.startAt,e.startAt)&&gv(s.endAt,e.endAt)}function Vm(s){return be.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n=null,r=[],o=[],u=null,f="F",m=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xR(s,e,n,r,o,u,f,m){return new bu(s,e,n,r,o,u,f,m)}function Tp(s){return new bu(s)}function _v(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function DE(s){return s.collectionGroup!==null}function nu(s){const e=Ce(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Gt(rn.comparator);return f.filters.forEach(y=>{y.getFlattenedFilters().forEach(_=>{_.isInequality()&&(m=m.add(_.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Th(u,r))}),n.has(rn.keyField().canonicalString())||e.Ie.push(new Th(rn.keyField(),r))}return e.Ie}function Gi(s){const e=Ce(s);return e.Ee||(e.Ee=IR(e,nu(s))),e.Ee}function IR(s,e){if(s.limitType==="F")return yv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Th(o.field,u)});const n=s.endAt?new vh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new vh(s.startAt.position,s.startAt.inclusive):null;return yv(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function km(s,e){const n=s.filters.concat([e]);return new bu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Lm(s,e,n){return new bu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function jh(s,e){return vp(Gi(s),Gi(e))&&s.limitType===e.limitType}function OE(s){return`${_p(Gi(s))}|lt:${s.limitType}`}function bo(s){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>CE(o)).join(", ")}]`),kh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>Mo(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>Mo(o)).join(",")),`Target(${r})`}(Gi(s))}; limitType=${s.limitType})`}function Uh(s,e){return e.isFoundDocument()&&function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):be.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(s,e)&&function(r,o){for(const u of nu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(s,e)&&function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0}(s,e)&&function(r,o){return!(r.startAt&&!function(f,m,y){const _=pv(f,m,y);return f.inclusive?_<=0:_<0}(r.startAt,nu(r),o)||r.endAt&&!function(f,m,y){const _=pv(f,m,y);return f.inclusive?_>=0:_>0}(r.endAt,nu(r),o))}(s,e)}function RR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function ME(s){return(e,n)=>{let r=!1;for(const o of nu(s)){const u=CR(o,e,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function CR(s,e,n){const r=s.field.isKeyField()?be.comparator(e.key,n.key):function(u,f,m){const y=f.data.field(u),_=m.data.field(u);return y!==null&&_!==null?Oo(y,_):xe(42886)}(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return xe(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ir(this.inner,(n,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return gE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new At(be.comparator);function Ns(){return NR}const PE=new At(be.comparator);function Yl(...s){let e=PE;for(const n of s)e=e.insert(n.key,n);return e}function VE(s){let e=PE;return s.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ca(){return iu()}function kE(){return iu()}function iu(){return new wa(s=>s.toString(),(s,e)=>s.isEqual(e))}const DR=new At(be.comparator),OR=new Gt(be.comparator);function Be(...s){let e=OR;for(const n of s)e=e.add(n);return e}const MR=new Gt(Fe);function PR(){return MR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gh(e)?"-0":e}}function LE(s){return{integerValue:""+s}}function VR(s,e){return lR(e)?LE(e):Ep(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(){this._=void 0}}function kR(s,e,n){return s instanceof du?function(o,u){const f={fields:{[vE]:{stringValue:_E},[EE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&gp(u)&&(u=Lh(u)),u&&(f.fields[TE]=u),{mapValue:f}}(n,e):s instanceof mu?UE(s,e):s instanceof pu?FE(s,e):function(o,u){const f=jE(o,u),m=vv(f)+vv(o.Ae);return Mm(f)&&Mm(o.Ae)?LE(m):Ep(o.serializer,m)}(s,e)}function LR(s,e,n){return s instanceof mu?UE(s,e):s instanceof pu?FE(s,e):n}function jE(s,e){return s instanceof Eh?function(r){return Mm(r)||function(u){return!!u&&"doubleValue"in u}(r)}(e)?e:{integerValue:0}:null}class du extends Fh{}class mu extends Fh{constructor(e){super(),this.elements=e}}function UE(s,e){const n=BE(e);for(const r of s.elements)n.some(o=>Ki(o,r))||n.push(r);return{arrayValue:{values:n}}}class pu extends Fh{constructor(e){super(),this.elements=e}}function FE(s,e){let n=BE(e);for(const r of s.elements)n=n.filter(o=>!Ki(o,r));return{arrayValue:{values:n}}}class Eh extends Fh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function vv(s){return Nt(s.integerValue||s.doubleValue)}function BE(s){return yp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n){this.field=e,this.transform=n}}function UR(s,e){return s.field.isEqual(e.field)&&function(r,o){return r instanceof mu&&o instanceof mu||r instanceof pu&&o instanceof pu?Do(r.elements,o.elements,Ki):r instanceof Eh&&o instanceof Eh?Ki(r.Ae,o.Ae):r instanceof du&&o instanceof du}(s.transform,e.transform)}class FR{constructor(e,n){this.version=e,this.transformResults=n}}class Dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Bh{}function zE(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new zh(s.key,Dn.none()):new wu(s.key,s.data,Dn.none());{const n=s.data,r=Nn.empty();let o=new Gt(rn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new Rr(s.key,r,new zn(o.toArray()),Dn.none())}}function BR(s,e,n){s instanceof wu?function(o,u,f){const m=o.value.clone(),y=Ev(o.fieldTransforms,u,f.transformResults);m.setAll(y),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(s,e,n):s instanceof Rr?function(o,u,f){if(!rh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=Ev(o.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(GE(o)),y.setAll(m),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(s,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function su(s,e,n,r){return s instanceof wu?function(u,f,m,y){if(!rh(u.precondition,f))return m;const _=u.value.clone(),E=bv(u.fieldTransforms,y,f);return _.setAll(E),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null}(s,e,n,r):s instanceof Rr?function(u,f,m,y){if(!rh(u.precondition,f))return m;const _=bv(u.fieldTransforms,y,f),E=f.data;return E.setAll(GE(u)),E.setAll(_),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(I=>I.field))}(s,e,n,r):function(u,f,m){return rh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(s,e,n)}function zR(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=jE(r.transform,o||null);u!=null&&(n===null&&(n=Nn.empty()),n.set(r.field,u))}return n||null}function Tv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Do(r,o,(u,f)=>UR(u,f))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class wu extends Bh{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Rr extends Bh{constructor(e,n,r,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function GE(s){const e=new Map;return s.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}}),e}function Ev(s,e,n){const r=new Map;Je(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const u=s[o],f=u.transform,m=e.data.field(u.field);r.set(u.field,LR(f,m,n[o]))}return r}function bv(s,e,n){const r=new Map;for(const o of s){const u=o.transform,f=n.data.field(o.field);r.set(o.field,kR(u,f,e))}return r}class zh extends Bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GR extends Bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&BR(u,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=su(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=su(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=kE();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const y=zE(f,m);y!==null&&r.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(Re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Be())}isEqual(e){return this.batchId===e.batchId&&Do(this.mutations,e.mutations,(n,r)=>Tv(n,r))&&Do(this.baseMutations,e.baseMutations,(n,r)=>Tv(n,r))}}class bp{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Je(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=function(){return DR}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new bp(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,We;function $R(s){switch(s){case ee.OK:return xe(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return xe(15467,{code:s})}}function qE(s){if(s===void 0)return Cs("GRPC error has no .code"),ee.UNKNOWN;switch(s){case Pt.OK:return ee.OK;case Pt.CANCELLED:return ee.CANCELLED;case Pt.UNKNOWN:return ee.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return ee.INTERNAL;case Pt.UNAVAILABLE:return ee.UNAVAILABLE;case Pt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Pt.NOT_FOUND:return ee.NOT_FOUND;case Pt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Pt.ABORTED:return ee.ABORTED;case Pt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Pt.DATA_LOSS:return ee.DATA_LOSS;default:return xe(39323,{code:s})}}(We=Pt||(Pt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=new mr([4294967295,4294967295],0);function wv(s){const e=KR().encode(s),n=new rE;return n.update(e),new Uint8Array(n.digest())}function Av(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new mr([n,r],0),new mr([o,u],0)]}class wp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xl(`Invalid padding: ${n}`);if(r<0)throw new Xl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=mr.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(mr.fromNumber(r)));return o.compare(QR)===1&&(o=new mr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=wv(e),[r,o]=Av(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);if(!this.we(f))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new wp(u,o,n);return r.forEach(m=>f.insert(m)),f}insert(e){if(this.ge===0)return;const n=wv(e),[r,o]=Av(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,r,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gh(Re.min(),o,new At(Fe),Ns(),Be())}}class Au{constructor(e,n,r,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Au(r,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class HE{constructor(e,n){this.targetId=e,this.Ce=n}}class WE{constructor(e,n,r=an.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class Sv{constructor(){this.ve=0,this.Fe=xv(),this.Me=an.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),n=Be(),r=Be();return this.Fe.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:xe(38017,{changeType:u})}}),new Au(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=xv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class YR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ns(),this.Je=Kc(),this.He=Kc(),this.Ye=new At(Fe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,o)=>{this.rt(o)&&n(o)})}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Vm(u))if(r===0){const f=new be(u.path);this.et(n,f,fn.newNoDocument(f,Re.min()))}else Je(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const m=this.ut(e),y=m?this.ct(m,e,f):1;if(y!==0){this.it(n);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=Tr(r).toUint8Array()}catch(y){if(y instanceof yE)return No("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new wp(f,o,u)}catch(y){return No(y instanceof Xl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.ge===0?null:m}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach(u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)}),o}Tt(e){const n=new Map;this.ze.forEach((u,f)=>{const m=this.ot(f);if(m){if(u.current&&Vm(m.target)){const y=new be(m.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,fn.newNoDocument(y,e))}u.Be&&(n.set(f,u.ke()),u.qe())}});let r=Be();this.He.forEach((u,f)=>{let m=!0;f.forEachWhile(y=>{const _=this.ot(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(u))}),this.je.forEach((u,f)=>f.setReadTime(e));const o=new Gh(e,n,this.Ye,this.je,r);return this.je=Ns(),this.Je=Kc(),this.He=Kc(),this.Ye=new At(Fe),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Sv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Gt(Fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Gt(Fe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ye("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Sv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Kc(){return new At(be.comparator)}function xv(){return new At(be.comparator)}const XR={asc:"ASCENDING",desc:"DESCENDING"},ZR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JR={and:"AND",or:"OR"};class eC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function jm(s,e){return s.useProto3Json||kh(e)?e:{value:e}}function bh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $E(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function tC(s,e){return bh(s,e.toTimestamp())}function qi(s){return Je(!!s,49232),Re.fromTimestamp(function(n){const r=vr(n);return new gt(r.seconds,r.nanos)}(s))}function Ap(s,e){return Um(s,e).canonicalString()}function Um(s,e){const n=function(o){return new dt(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?n:n.child(e)}function KE(s){const e=dt.fromString(s);return Je(JE(e),10190,{key:e.toString()}),e}function Fm(s,e){return Ap(s.databaseId,e.path)}function fm(s,e){const n=KE(e);if(n.get(1)!==s.databaseId.projectId)throw new pe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new pe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new be(YE(n))}function QE(s,e){return Ap(s.databaseId,e)}function nC(s){const e=KE(s);return e.length===4?dt.emptyPath():YE(e)}function Bm(s){return new dt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function YE(s){return Je(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Iv(s,e,n){return{name:Fm(s,e),fields:n.value.mapValue.fields}}function iC(s,e){let n;if("targetChange"in e){e.targetChange;const r=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:xe(39313,{state:_})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(_,E){return _.useProto3Json?(Je(E===void 0||typeof E=="string",58123),an.fromBase64String(E||"")):(Je(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),an.fromUint8Array(E||new Uint8Array))}(s,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(_){const E=_.code===void 0?ee.UNKNOWN:qE(_.code);return new pe(E,_.message||"")}(f);n=new WE(r,o,u,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=fm(s,r.document.name),u=qi(r.document.updateTime),f=r.document.createTime?qi(r.document.createTime):Re.min(),m=new Nn({mapValue:{fields:r.document.fields}}),y=fn.newFoundDocument(o,u,f,m),_=r.targetIds||[],E=r.removedTargetIds||[];n=new ah(_,E,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=fm(s,r.document),u=r.readTime?qi(r.readTime):Re.min(),f=fn.newNoDocument(o,u),m=r.removedTargetIds||[];n=new ah([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=fm(s,r.document),u=r.removedTargetIds||[];n=new ah([],u,o,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new WR(o,u),m=r.targetId;n=new HE(m,f)}}return n}function sC(s,e){let n;if(e instanceof wu)n={update:Iv(s,e.key,e.value)};else if(e instanceof zh)n={delete:Fm(s,e.key)};else if(e instanceof Rr)n={update:Iv(s,e.key,e.data),updateMask:dC(e.fieldMask)};else{if(!(e instanceof GR))return xe(16599,{Vt:e.type});n={verify:Fm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(u,f){const m=f.transform;if(m instanceof du)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof mu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof pu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Eh)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw xe(20930,{transform:f.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:tC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:xe(27497)}(s,e.precondition)),n}function rC(s,e){return s&&s.length>0?(Je(e!==void 0,14353),s.map(n=>function(o,u){let f=o.updateTime?qi(o.updateTime):qi(u);return f.isEqual(Re.min())&&(f=qi(u)),new FR(f,o.transformResults||[])}(n,e))):[]}function aC(s,e){return{documents:[QE(s,e.path)]}}function oC(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QE(s,o);const u=function(_){if(_.length!==0)return ZE(Ti.create(_,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(_){if(_.length!==0)return _.map(E=>function(S){return{field:wo(S.field),direction:cC(S.dir)}}(E))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=jm(s,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{ft:n,parent:o}}function lC(s){let e=nC(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Je(r===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(I){const S=XE(I);return S instanceof Ti&&IE(S)?S.getFilters():[S]}(n.where));let f=[];n.orderBy&&(f=function(I){return I.map(S=>function(U){return new Th(Ao(U.field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(U.direction))}(S))}(n.orderBy));let m=null;n.limit&&(m=function(I){let S;return S=typeof I=="object"?I.value:I,kh(S)?null:S}(n.limit));let y=null;n.startAt&&(y=function(I){const S=!!I.before,P=I.values||[];return new vh(P,S)}(n.startAt));let _=null;return n.endAt&&(_=function(I){const S=!I.before,P=I.values||[];return new vh(P,S)}(n.endAt)),xR(e,o,f,u,m,"F",y,_)}function uC(s,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XE(s){return s.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ao(n.unaryFilter.field);return Vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Ao(n.unaryFilter.field);return Vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ao(n.unaryFilter.field);return Vt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ao(n.unaryFilter.field);return Vt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}}(s):s.fieldFilter!==void 0?function(n){return Vt.create(Ao(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(n){return Ti.create(n.compositeFilter.filters.map(r=>XE(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return xe(1026)}}(n.compositeFilter.op))}(s):xe(30097,{filter:s})}function cC(s){return XR[s]}function hC(s){return ZR[s]}function fC(s){return JR[s]}function wo(s){return{fieldPath:s.canonicalString()}}function Ao(s){return rn.fromServerFormat(s.fieldPath)}function ZE(s){return s instanceof Vt?function(n){if(n.op==="=="){if(mv(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NAN"}};if(dv(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mv(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NOT_NAN"}};if(dv(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wo(n.field),op:hC(n.op),value:n.value}}}(s):s instanceof Ti?function(n){const r=n.getFilters().map(o=>ZE(o));return r.length===1?r[0]:{compositeFilter:{op:fC(n.op),filters:r}}}(s):xe(54877,{filter:s})}function dC(s){const e=[];return s.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n,r,o,u=Re.min(),f=Re.min(),m=an.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.yt=e}}function pC(s){const e=lC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Lm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.Cn=new yC}addToCollectionParentIndex(e,n){return this.Cn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(_r.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(_r.min())}updateCollectionGroup(e,n,r){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class yC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Gt(dt.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Gt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eb=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(eb,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Po(0)}static cr(){return new Po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="LruGarbageCollector",_C=1048576;function Nv([s,e],[n,r]){const o=Fe(s,n);return o===0?Fe(e,r):o}class vC{constructor(e){this.Ir=e,this.buffer=new Gt(Nv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Nv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class TC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(Cv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zo(n)?ye(Cv,"Ignoring IndexedDB error during garbage collection: ",n):await Bo(n)}await this.Vr(3e5)})}}class EC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return re.resolve(Vh.ce);const r=new vC(n);return this.mr.forEachTarget(e,o=>r.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>r.Ar(o))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(Rv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,u,f,m,y,_;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,f=Date.now(),this.nthSequenceNumber(e,o))).next(I=>(r=I,m=Date.now(),this.removeTargets(e,r,n))).next(I=>(u=I,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(I=>(_=Date.now(),Eo()<=Ue.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(y-m)+`ms
	Removed ${I} documents in `+(_-y)+`ms
Total Duration: ${_-E}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:I})))}}function bC(s,e){return new EC(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.changes=new wa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?re.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(r!==null&&su(r.mutation,o,zn.empty(),gt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Be()){const o=ca();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,r).next(u=>{let f=Yl();return u.forEach((m,y)=>{f=f.insert(m,y.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const r=ca();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Be()))}populateOverlays(e,n,r){const o=[];return r.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,r,o){let u=Ns();const f=iu(),m=function(){return iu()}();return n.forEach((y,_)=>{const E=r.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof Rr)?u=u.insert(_.key,_):E!==void 0?(f.set(_.key,E.mutation.getFieldMask()),su(E.mutation,_,E.mutation.getFieldMask(),gt.now())):f.set(_.key,zn.empty())}),this.recalculateAndSaveOverlays(e,u).next(y=>(y.forEach((_,E)=>f.set(_,E)),n.forEach((_,E)=>m.set(_,new AC(E,f.get(_)??null))),m))}recalculateAndSaveOverlays(e,n){const r=iu();let o=new At((f,m)=>f-m),u=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(y=>{const _=n.get(y);if(_===null)return;let E=r.get(y)||zn.empty();E=m.applyToLocalView(_,E),r.set(y,E);const I=(o.get(m.batchId)||Be()).add(y);o=o.insert(m.batchId,I)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),_=y.key,E=y.value,I=kE();E.forEach(S=>{if(!u.has(S)){const P=zE(n.get(S),r.get(S));P!==null&&I.set(S,P),u=u.add(S)}}),f.push(this.documentOverlayCache.saveOverlays(e,_,I))}return re.waitFor(f)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,o){return function(f){return be.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):DE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-u.size):re.resolve(ca());let m=uu,y=u;return f.next(_=>re.forEach(_,(E,I)=>(m<I.largestBatchId&&(m=I.largestBatchId),u.get(E)?re.resolve():this.remoteDocumentCache.getEntry(e,E).next(S=>{y=y.insert(E,S)}))).next(()=>this.populateOverlays(e,_,u)).next(()=>this.computeViews(e,y,_,Be())).next(E=>({batchId:m,changes:VE(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(r=>{let o=Yl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const u=n.collectionGroup;let f=Yl();return this.indexManager.getCollectionParents(e,u).next(m=>re.forEach(m,y=>{const _=function(I,S){return new bu(S,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(n,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,r,o).next(E=>{E.forEach((I,S)=>{f=f.insert(I,S)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,o))).next(f=>{u.forEach((y,_)=>{const E=_.getKey();f.get(E)===null&&(f=f.insert(E,fn.newInvalidDocument(E)))});let m=Yl();return f.forEach((y,_)=>{const E=u.get(y);E!==void 0&&su(E.mutation,_,zn.empty(),gt.now()),Uh(n,_)&&(m=m.insert(y,_))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return re.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:qi(o.createTime)}}(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(o){return{name:o.name,query:pC(o.bundledQuery),readTime:qi(o.readTime)}}(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.overlays=new At(be.comparator),this.qr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ca();return re.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((o,u)=>{this.St(e,n,u)}),re.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.qr.delete(r)),re.resolve()}getOverlaysForCollection(e,n,r){const o=ca(),u=n.length+1,f=new be(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const y=m.getNext().value,_=y.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return re.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let u=new At((_,E)=>_-E);const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>r){let E=u.get(_.largestBatchId);E===null&&(E=ca(),u=u.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const m=ca(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((_,E)=>m.set(_,E)),!(m.size()>=o)););return re.resolve(m)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new HR(n,r));let u=this.qr.get(n);u===void 0&&(u=Be(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this.Qr=new Gt(Qt.$r),this.Ur=new Gt(Qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Qt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Qt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new be(new dt([])),r=new Qt(n,e),o=new Qt(n,e+1),u=[];return this.Ur.forEachInRange([r,o],f=>{this.Gr(f),u.push(f.key)}),u}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new be(new dt([])),r=new Qt(n,e),o=new Qt(n,e+1);let u=Be();return this.Ur.forEachInRange([r,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new Qt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Qt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return be.comparator(e.key,n.key)||Fe(e.Yr,n.Yr)}static Kr(e,n){return Fe(e.Yr,n.Yr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Gt(Qt.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new qR(u,n,r,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new Qt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(f)}lookupMutationBatch(e,n){return re.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),u=o<0?0:o;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?pp:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Qt(n,0),o=new Qt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],f=>{const m=this.Xr(f.Yr);u.push(m)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Gt(Fe);return n.forEach(o=>{const u=new Qt(o,0),f=new Qt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],m=>{r=r.add(m.Yr)})}),re.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let u=r;be.isDocumentKey(u)||(u=u.child(""));const f=new Qt(new be(u),0);let m=new Gt(Fe);return this.Zr.forEachWhile(y=>{const _=y.key.path;return!!r.isPrefixOf(_)&&(_.length===o&&(m=m.add(y.Yr)),!0)},f),re.resolve(this.ti(m))}ti(e){const n=[];return e.forEach(r=>{const o=this.Xr(r);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Je(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return re.forEach(n.mutations,o=>{const u=new Qt(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Qt(n,0),o=this.Zr.firstAfterOrEqual(r);return re.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.ri=e,this.docs=function(){return new At(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return re.resolve(r?r.document.mutableCopy():fn.newInvalidDocument(n))}getEntries(e,n){let r=Ns();return n.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():fn.newInvalidDocument(o))}),re.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let u=Ns();const f=n.path,m=new be(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:_,value:{document:E}}=y.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||sR(iR(E),r)<=0||(o.has(E.key)||Uh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return re.resolve(u)}getAllFromCollectionGroup(e,n,r,o){xe(9500)}ii(e,n){return re.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new DC(this)}getSize(e){return re.resolve(this.size)}}class DC extends wC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)}),re.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.persistence=e,this.si=new wa(n=>_p(n),vp),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Sp,this.targetCount=0,this.ai=Po.ur()}forEachTarget(e,n){return this.si.forEach((r,o)=>n(o)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),re.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Po(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.Pr(n),re.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,r){let o=0;const u=[];return this.si.forEach((f,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),re.waitFor(u).next(()=>o)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return re.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),re.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return re.resolve(r)}containsKey(e,n){return re.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,n){this.ui={},this.overlays={},this.ci=new Vh(0),this.li=!1,this.li=!0,this.hi=new RC,this.referenceDelegate=e(this),this.Pi=new OC(this),this.indexManager=new gC,this.remoteDocumentCache=function(o){return new NC(o)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new mC(n),this.Ii=new xC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new IC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new CC(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ye("MemoryPersistence","Starting transaction:",e);const o=new MC(this.ci.next());return this.referenceDelegate.Ei(),r(o).next(u=>this.referenceDelegate.di(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ai(e,n){return re.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class MC extends aR{constructor(e){super(),this.currentSequenceNumber=e}}class xp{constructor(e){this.persistence=e,this.Ri=new Sp,this.Vi=null}static mi(e){return new xp(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),re.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(o=>this.fi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.fi.add(u.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,r=>{const o=be.fromPath(r);return this.gi(e,o).next(u=>{u||n.removeEntry(o,Re.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class wh{constructor(e,n){this.persistence=e,this.pi=new wa(r=>uR(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=bC(this,n)}static mi(e,n){return new wh(e,n)}Ei(){}di(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(o=>r+o))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return re.forEach(this.pi,(r,o)=>this.br(e,r,o).next(u=>u?re.resolve():n(o)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,f=>this.br(e,f,n).next(m=>{m||(r++,u.removeEntry(f,Re.min()))})).next(()=>u.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ih(e.data.value)),n}br(e,n,r){return re.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return re.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=Be(),o=Be();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ip(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return uS()?8:oR(mn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const u={result:null};return this.ys(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ws(e,n,o,r).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new PC;return this.Ss(e,n,f).next(m=>{if(u.result=m,this.Vs)return this.bs(e,n,f,m.size)})}).next(()=>u.result)}bs(e,n,r,o){return r.documentReadCount<this.fs?(Eo()<=Ue.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",bo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(Eo()<=Ue.DEBUG&&ye("QueryEngine","Query:",bo(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(Eo()<=Ue.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",bo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gi(n))):re.resolve())}ys(e,n){if(_v(n))return re.resolve(null);let r=Gi(n);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Lm(n,null,"F"),r=Gi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const f=Be(...u);return this.ps.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,r).next(y=>{const _=this.Ds(n,m);return this.Cs(n,_,f,y.readTime)?this.ys(e,Lm(n,null,"F")):this.vs(e,_,n,y)}))})))}ws(e,n,r,o){return _v(n)||o.isEqual(Re.min())?re.resolve(null):this.ps.getDocuments(e,r).next(u=>{const f=this.Ds(n,u);return this.Cs(n,f,r,o)?re.resolve(null):(Eo()<=Ue.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bo(n)),this.vs(e,f,n,nR(o,uu)).next(m=>m))})}Ds(e,n){let r=new Gt(ME(e));return n.forEach((o,u)=>{Uh(e,u)&&(r=r.add(u))}),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,r){return Eo()<=Ue.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",bo(n)),this.ps.getDocumentsMatchingQuery(e,n,_r.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="LocalStore",kC=3e8;class LC{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new At(Fe),this.xs=new wa(u=>_p(u),vp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function jC(s,e,n,r){return new LC(s,e,n,r)}async function nb(s,e){const n=Ce(s);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(u=>{const f=[],m=[];let y=Be();for(const _ of o){f.push(_.batchId);for(const E of _.mutations)y=y.add(E.key)}for(const _ of u){m.push(_.batchId);for(const E of _.mutations)y=y.add(E.key)}return n.localDocuments.getDocuments(r,y).next(_=>({Ls:_,removedBatchIds:f,addedBatchIds:m}))})})}function UC(s,e){const n=Ce(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return function(m,y,_,E){const I=_.batch,S=I.keys();let P=re.resolve();return S.forEach(U=>{P=P.next(()=>E.getEntry(y,U)).next(X=>{const H=_.docVersions.get(U);Je(H!==null,48541),X.version.compareTo(H)<0&&(I.applyToRemoteDocument(X,_),X.isValidDocument()&&(X.setReadTime(_.commitVersion),E.addEntry(X)))})}),P.next(()=>m.mutationQueue.removeMutationBatch(y,I))}(n,r,e,u).next(()=>u.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let y=Be();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(y=y.add(m.batch.mutations[_].key));return y}(e))).next(()=>n.localDocuments.getDocuments(r,o))})}function ib(s){const e=Ce(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function FC(s,e){const n=Ce(s),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach((E,I)=>{const S=o.get(I);if(!S)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,I).next(()=>n.Pi.addMatchingKeys(u,E.addedDocuments,I)));let P=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(I)!==null?P=P.withResumeToken(an.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,r)),o=o.insert(I,P),function(X,H,ae){return X.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=kC?!0:ae.addedDocuments.size+ae.modifiedDocuments.size+ae.removedDocuments.size>0}(S,P,E)&&m.push(n.Pi.updateTargetData(u,P))});let y=Ns(),_=Be();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(BC(u,f,e.documentUpdates).next(E=>{y=E.ks,_=E.qs})),!r.isEqual(Re.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next(I=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(E)}return re.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,y,_)).next(()=>y)}).then(u=>(n.Ms=o,u))}function BC(s,e,n){let r=Be(),o=Be();return n.forEach(u=>r=r.add(u)),e.getEntries(s,r).next(u=>{let f=Ns();return n.forEach((m,y)=>{const _=u.get(m);y.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(Re.min())?(e.removeEntry(m,y.readTime),f=f.insert(m,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(y),f=f.insert(m,y)):ye(Rp,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",y.version)}),{ks:f,qs:o}})}function zC(s,e){const n=Ce(s);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=pp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function GC(s,e){const n=Ce(s);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.Pi.getTargetData(r,e).next(u=>u?(o=u,re.resolve(o)):n.Pi.allocateTargetId(r).next(f=>(o=new cr(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function zm(s,e,n){const r=Ce(s),o=r.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,f=>r.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!zo(f))throw f;ye(Rp,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function Dv(s,e,n){const r=Ce(s);let o=Re.min(),u=Be();return r.persistence.runTransaction("Execute query","readwrite",f=>function(y,_,E){const I=Ce(y),S=I.xs.get(E);return S!==void 0?re.resolve(I.Ms.get(S)):I.Pi.getTargetData(_,E)}(r,f,Gi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,m.targetId).next(y=>{u=y})}).next(()=>r.Fs.getDocumentsMatchingQuery(f,e,n?o:Re.min(),n?u:Be())).next(m=>(qC(r,RR(e),m),{documents:m,Qs:u})))}function qC(s,e,n){let r=s.Os.get(e)||Re.min();n.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),s.Os.set(e,r)}class Ov{constructor(){this.activeTargetIds=PR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HC{constructor(){this.Mo=new Ov,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ov,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="ConnectivityMonitor";class Pv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(Mv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(Mv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc=null;function Gm(){return Qc===null?Qc=function(){return 268435456+Math.round(2147483648*Math.random())}():Qc++,"0x"+Qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="RestConnection",$C={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===yh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,u){const f=Gm(),m=this.zo(e,n.toUriEncodedString());ye(dm,`Sending RPC '${e}' ${f}:`,m,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,u);const{host:_}=new URL(m),E=Lo(_);return this.Jo(e,m,y,r,E).then(I=>(ye(dm,`Received RPC '${e}' ${f}: `,I),I),I=>{throw No(dm,`RPC '${e}' ${f} failed with error: `,I,"url: ",m,"request:",r),I})}Ho(e,n,r,o,u,f){return this.Go(e,n,r,o,u)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}zo(e,n){const r=$C[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class YC extends KC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,u){const f=Gm();return new Promise((m,y)=>{const _=new aE;_.setWithCredentials(!0),_.listenOnce(oE.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case nh.NO_ERROR:const I=_.getResponseJson();ye(cn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(I)),m(I);break;case nh.TIMEOUT:ye(cn,`RPC '${e}' ${f} timed out`),y(new pe(ee.DEADLINE_EXCEEDED,"Request time out"));break;case nh.HTTP_ERROR:const S=_.getStatus();if(ye(cn,`RPC '${e}' ${f} failed with status:`,S,"response text:",_.getResponseText()),S>0){let P=_.getResponseJson();Array.isArray(P)&&(P=P[0]);const U=P?.error;if(U&&U.status&&U.message){const X=function(ae){const Q=ae.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(Q)>=0?Q:ee.UNKNOWN}(U.status);y(new pe(X,U.message))}else y(new pe(ee.UNKNOWN,"Server responded with status "+_.getStatus()))}else y(new pe(ee.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:f,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{ye(cn,`RPC '${e}' ${f} completed.`)}});const E=JSON.stringify(o);ye(cn,`RPC '${e}' ${f} sending request:`,o),_.send(n,"POST",E,r,15)})}T_(e,n,r){const o=Gm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=cE(),m=uE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,r),y.encodeInitMessageHeaders=!0;const E=u.join("");ye(cn,`Creating RPC '${e}' stream ${o}: ${E}`,y);const I=f.createWebChannel(E,y);this.I_(I);let S=!1,P=!1;const U=new QC({Yo:H=>{P?ye(cn,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(S||(ye(cn,`Opening RPC '${e}' stream ${o} transport.`),I.open(),S=!0),ye(cn,`RPC '${e}' stream ${o} sending:`,H),I.send(H))},Zo:()=>I.close()}),X=(H,ae,Q)=>{H.listen(ae,te=>{try{Q(te)}catch(Z){setTimeout(()=>{throw Z},0)}})};return X(I,Ql.EventType.OPEN,()=>{P||(ye(cn,`RPC '${e}' stream ${o} transport opened.`),U.o_())}),X(I,Ql.EventType.CLOSE,()=>{P||(P=!0,ye(cn,`RPC '${e}' stream ${o} transport closed`),U.a_(),this.E_(I))}),X(I,Ql.EventType.ERROR,H=>{P||(P=!0,No(cn,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),U.a_(new pe(ee.UNAVAILABLE,"The operation could not be completed")))}),X(I,Ql.EventType.MESSAGE,H=>{if(!P){const ae=H.data[0];Je(!!ae,16349);const Q=ae,te=Q?.error||Q[0]?.error;if(te){ye(cn,`RPC '${e}' stream ${o} received error:`,te);const Z=te.status;let ie=function(x){const C=Pt[x];if(C!==void 0)return qE(C)}(Z),le=te.message;ie===void 0&&(ie=ee.INTERNAL,le="Unknown error status: "+Z+" with message "+te.message),P=!0,U.a_(new pe(ie,le)),I.close()}else ye(cn,`RPC '${e}' stream ${o} received:`,ae),U.u_(ae)}}),X(m,lE.STAT_EVENT,H=>{H.stat===Nm.PROXY?ye(cn,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===Nm.NOPROXY&&ye(cn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{U.__()},0),U}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function mm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(s){return new eC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,n,r=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="PersistentStream";class rb{constructor(e,n,r,o,u,f,m,y){this.Mi=e,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sb(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(Cs(n.toString()),Cs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.D_===n&&this.G_(r,o)},r=>{e(()=>{const o=new pe(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{r(()=>this.z_(o))}),this.stream.onMessage(o=>{r(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ye(Vv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ye(Vv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XC extends rb{constructor(e,n,r,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=iC(this.serializer,e),r=function(u){if(!("targetChange"in u))return Re.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Re.min():f.readTime?qi(f.readTime):Re.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Bm(this.serializer),n.addTarget=function(u,f){let m;const y=f.target;if(m=Vm(y)?{documents:aC(u,y)}:{query:oC(u,y).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=$E(u,f.resumeToken);const _=jm(u,f.expectedCount);_!==null&&(m.expectedCount=_)}else if(f.snapshotVersion.compareTo(Re.min())>0){m.readTime=bh(u,f.snapshotVersion.toTimestamp());const _=jm(u,f.expectedCount);_!==null&&(m.expectedCount=_)}return m}(this.serializer,e);const r=uC(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Bm(this.serializer),n.removeTarget=e,this.q_(n)}}class ZC extends rb{constructor(e,n,r,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=rC(e.writeResults,e.commitTime),r=qi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Bm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sC(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{}class eN extends JC{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new pe(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Go(e,Um(n,r),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(ee.UNKNOWN,u.toString())})}Ho(e,n,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Ho(e,Um(n,r),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new pe(ee.UNKNOWN,f.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class tN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Cs(n),this.aa=!1):ye("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="RemoteStore";class nN{constructor(e,n,r,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo(f=>{r.enqueueAndForget(async()=>{Aa(this)&&(ye(ya,"Restarting streams for network reachability change."),await async function(y){const _=Ce(y);_.Ea.add(4),await Su(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Hh(_)}(this))})}),this.Ra=new tN(r,o)}}async function Hh(s){if(Aa(s))for(const e of s.da)await e(!0)}async function Su(s){for(const e of s.da)await e(!1)}function ab(s,e){const n=Ce(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Op(n)?Dp(n):Go(n).O_()&&Np(n,e))}function Cp(s,e){const n=Ce(s),r=Go(n);n.Ia.delete(e),r.O_()&&ob(n,e),n.Ia.size===0&&(r.O_()?r.L_():Aa(n)&&n.Ra.set("Unknown"))}function Np(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Go(s).Y_(e)}function ob(s,e){s.Va.Ue(e),Go(s).Z_(e)}function Dp(s){s.Va=new YR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Go(s).start(),s.Ra.ua()}function Op(s){return Aa(s)&&!Go(s).x_()&&s.Ia.size>0}function Aa(s){return Ce(s).Ea.size===0}function lb(s){s.Va=void 0}async function iN(s){s.Ra.set("Online")}async function sN(s){s.Ia.forEach((e,n)=>{Np(s,e)})}async function rN(s,e){lb(s),Op(s)?(s.Ra.ha(e),Dp(s)):s.Ra.set("Unknown")}async function aN(s,e,n){if(s.Ra.set("Online"),e instanceof WE&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))}(s,e)}catch(r){ye(ya,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ah(s,r)}else if(e instanceof ah?s.Va.Ze(e):e instanceof HE?s.Va.st(e):s.Va.tt(e),!n.isEqual(Re.min()))try{const r=await ib(s.localStore);n.compareTo(r)>=0&&await function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const E=u.Ia.get(_);E&&u.Ia.set(_,E.withResumeToken(y.resumeToken,f))}}),m.targetMismatches.forEach((y,_)=>{const E=u.Ia.get(y);if(!E)return;u.Ia.set(y,E.withResumeToken(an.EMPTY_BYTE_STRING,E.snapshotVersion)),ob(u,y);const I=new cr(E.target,y,_,E.sequenceNumber);Np(u,I)}),u.remoteSyncer.applyRemoteEvent(m)}(s,n)}catch(r){ye(ya,"Failed to raise snapshot:",r),await Ah(s,r)}}async function Ah(s,e,n){if(!zo(e))throw e;s.Ea.add(1),await Su(s),s.Ra.set("Offline"),n||(n=()=>ib(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{ye(ya,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Hh(s)})}function ub(s,e){return e().catch(n=>Ah(s,n,e))}async function Wh(s){const e=Ce(s),n=br(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:pp;for(;oN(e);)try{const o=await zC(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,lN(e,o)}catch(o){await Ah(e,o)}cb(e)&&hb(e)}function oN(s){return Aa(s)&&s.Ta.length<10}function lN(s,e){s.Ta.push(e);const n=br(s);n.O_()&&n.X_&&n.ea(e.mutations)}function cb(s){return Aa(s)&&!br(s).x_()&&s.Ta.length>0}function hb(s){br(s).start()}async function uN(s){br(s).ra()}async function cN(s){const e=br(s);for(const n of s.Ta)e.ea(n.mutations)}async function hN(s,e,n){const r=s.Ta.shift(),o=bp.from(r,e,n);await ub(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await Wh(s)}async function fN(s,e){e&&br(s).X_&&await async function(r,o){if(function(f){return $R(f)&&f!==ee.ABORTED}(o.code)){const u=r.Ta.shift();br(r).B_(),await ub(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Wh(r)}}(s,e),cb(s)&&hb(s)}async function kv(s,e){const n=Ce(s);n.asyncQueue.verifyOperationInProgress(),ye(ya,"RemoteStore received new credentials");const r=Aa(n);n.Ea.add(3),await Su(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Hh(n)}async function dN(s,e){const n=Ce(s);e?(n.Ea.delete(2),await Hh(n)):e||(n.Ea.add(2),await Su(n),n.Ra.set("Unknown"))}function Go(s){return s.ma||(s.ma=function(n,r,o){const u=Ce(n);return u.sa(),new XC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{Xo:iN.bind(null,s),t_:sN.bind(null,s),r_:rN.bind(null,s),H_:aN.bind(null,s)}),s.da.push(async e=>{e?(s.ma.B_(),Op(s)?Dp(s):s.Ra.set("Unknown")):(await s.ma.stop(),lb(s))})),s.ma}function br(s){return s.fa||(s.fa=function(n,r,o){const u=Ce(n);return u.sa(),new ZC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:uN.bind(null,s),r_:fN.bind(null,s),ta:cN.bind(null,s),na:hN.bind(null,s)}),s.da.push(async e=>{e?(s.fa.B_(),await Wh(s)):(await s.fa.stop(),s.Ta.length>0&&(ye(ya,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))})),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n,r,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,u){const f=Date.now()+r,m=new Mp(e,n,f,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pp(s,e){if(Cs("AsyncQueue",`${e}: ${s}`),zo(s))return new pe(ee.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||be.comparator(n.key,r.key):(n,r)=>be.comparator(n.key,r.key),this.keyedMap=Yl(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Co;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(){this.ga=new At(be.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Vo{constructor(e,n,r,o,u,f,m,y,_){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(e,n,r,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new Vo(e,n,Co.emptySet(n),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class pN{constructor(){this.queries=jv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Ce(n),u=o.queries;o.queries=jv(),u.forEach((f,m)=>{for(const y of m.Sa)y.onError(r)})})(this,new pe(ee.ABORTED,"Firestore shutting down"))}}function jv(){return new wa(s=>OE(s),jh)}async function fb(s,e){const n=Ce(s);let r=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(r=2):(u=new mN,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Pp(f,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Vp(n)}async function db(s,e){const n=Ce(s),r=e.query;let o=3;const u=n.queries.get(r);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gN(s,e){const n=Ce(s);let r=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Fa(o)&&(r=!0);f.wa=o}}r&&Vp(n)}function yN(s,e,n){const r=Ce(s),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);r.queries.delete(e)}function Vp(s){s.Ca.forEach(e=>{e.next()})}var qm,Uv;(Uv=qm||(qm={})).Ma="default",Uv.Cache="cache";class mb{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Vo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==qm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e){this.key=e}}class gb{constructor(e){this.key=e}}class _N{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=ME(e),this.tu=new Co(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Lv,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,I)=>{const S=o.get(E),P=Uh(this.query,I)?I:null,U=!!S&&this.mutatedKeys.has(S.key),X=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let H=!1;S&&P?S.data.isEqual(P.data)?U!==X&&(r.track({type:3,doc:P}),H=!0):this.su(S,P)||(r.track({type:2,doc:P}),H=!0,(y&&this.eu(P,y)>0||_&&this.eu(P,_)<0)&&(m=!0)):!S&&P?(r.track({type:0,doc:P}),H=!0):S&&!P&&(r.track({type:1,doc:S}),H=!0,(y||_)&&(m=!0)),H&&(P?(f=f.add(P),u=X?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:f,iu:r,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort((E,I)=>function(P,U){const X=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:H})}};return X(P)-X(U)}(E.type,I.type)||this.eu(E.doc,I.doc)),this.ou(r),o=o??!1;const m=n&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,_=y!==this.Za;return this.Za=y,f.length!==0||_?{snapshot:new Vo(this.query,e.tu,u,f,e.mutatedKeys,y===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Lv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new gb(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new pb(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Vo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const kp="SyncEngine";class vN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class TN{constructor(e){this.key=e,this.hu=!1}}class EN{constructor(e,n,r,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new wa(m=>OE(m),jh),this.Iu=new Map,this.Eu=new Set,this.du=new At(be.comparator),this.Au=new Map,this.Ru=new Sp,this.Vu={},this.mu=new Map,this.fu=Po.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bN(s,e,n=!0){const r=bb(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await yb(r,e,n,!0),o}async function wN(s,e){const n=bb(s);await yb(n,e,!0,!1)}async function yb(s,e,n,r){const o=await GC(s.localStore,Gi(e)),u=o.targetId,f=s.sharedClientState.addLocalQueryTarget(u,n);let m;return r&&(m=await AN(s,e,u,f==="current",o.resumeToken)),s.isPrimaryClient&&n&&ab(s.remoteStore,o),m}async function AN(s,e,n,r,o){s.pu=(I,S,P)=>async function(X,H,ae,Q){let te=H.view.ru(ae);te.Cs&&(te=await Dv(X.localStore,H.query,!1).then(({documents:O})=>H.view.ru(O,te)));const Z=Q&&Q.targetChanges.get(H.targetId),ie=Q&&Q.targetMismatches.get(H.targetId)!=null,le=H.view.applyChanges(te,X.isPrimaryClient,Z,ie);return Bv(X,H.targetId,le.au),le.snapshot}(s,I,S,P);const u=await Dv(s.localStore,e,!0),f=new _N(e,u.Qs),m=f.ru(u.documents),y=Au.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),_=f.applyChanges(m,s.isPrimaryClient,y);Bv(s,n,_.au);const E=new vN(e,n,f);return s.Tu.set(e,E),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),_.snapshot}async function SN(s,e,n){const r=Ce(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter(f=>!jh(f,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await zm(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Cp(r.remoteStore,o.targetId),Hm(r,o.targetId)}).catch(Bo)):(Hm(r,o.targetId),await zm(r.localStore,o.targetId,!0))}async function xN(s,e){const n=Ce(s),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Cp(n.remoteStore,r.targetId))}async function IN(s,e,n){const r=PN(s);try{const o=await function(f,m){const y=Ce(f),_=gt.now(),E=m.reduce((P,U)=>P.add(U.key),Be());let I,S;return y.persistence.runTransaction("Locally write mutations","readwrite",P=>{let U=Ns(),X=Be();return y.Ns.getEntries(P,E).next(H=>{U=H,U.forEach((ae,Q)=>{Q.isValidDocument()||(X=X.add(ae))})}).next(()=>y.localDocuments.getOverlayedDocuments(P,U)).next(H=>{I=H;const ae=[];for(const Q of m){const te=zR(Q,I.get(Q.key).overlayedDocument);te!=null&&ae.push(new Rr(Q.key,te,AE(te.value.mapValue),Dn.exists(!0)))}return y.mutationQueue.addMutationBatch(P,_,ae,m)}).next(H=>{S=H;const ae=H.applyToLocalDocumentSet(I,X);return y.documentOverlayCache.saveOverlays(P,H.batchId,ae)})}).then(()=>({batchId:S.batchId,changes:VE(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(f,m,y){let _=f.Vu[f.currentUser.toKey()];_||(_=new At(Fe)),_=_.insert(m,y),f.Vu[f.currentUser.toKey()]=_}(r,o.batchId,n),await xu(r,o.changes),await Wh(r.remoteStore)}catch(o){const u=Pp(o,"Failed to persist write");n.reject(u)}}async function _b(s,e){const n=Ce(s);try{const r=await FC(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.Au.get(u);f&&(Je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Je(f.hu,14607):o.removedDocuments.size>0&&(Je(f.hu,42227),f.hu=!1))}),await xu(n,r,e)}catch(r){await Bo(r)}}function Fv(s,e,n){const r=Ce(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach((u,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const y=Ce(f);y.onlineState=m;let _=!1;y.queries.forEach((E,I)=>{for(const S of I.Sa)S.va(m)&&(_=!0)}),_&&Vp(y)}(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function RN(s,e,n){const r=Ce(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),u=o&&o.key;if(u){let f=new At(be.comparator);f=f.insert(u,fn.newNoDocument(u,Re.min()));const m=Be().add(u),y=new Gh(Re.min(),new Map,new At(Fe),f,m);await _b(r,y),r.du=r.du.remove(u),r.Au.delete(e),Lp(r)}else await zm(r.localStore,e,!1).then(()=>Hm(r,e,n)).catch(Bo)}async function CN(s,e){const n=Ce(s),r=e.batch.batchId;try{const o=await UC(n.localStore,e);Tb(n,r,null),vb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xu(n,o)}catch(o){await Bo(o)}}async function NN(s,e,n){const r=Ce(s);try{const o=await function(f,m){const y=Ce(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return y.mutationQueue.lookupMutationBatch(_,m).next(I=>(Je(I!==null,37113),E=I.keys(),y.mutationQueue.removeMutationBatch(_,I))).next(()=>y.mutationQueue.performConsistencyCheck(_)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(_,E,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>y.localDocuments.getDocuments(_,E))})}(r.localStore,e);Tb(r,e,n),vb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xu(r,o)}catch(o){await Bo(o)}}function vb(s,e){(s.mu.get(e)||[]).forEach(n=>{n.resolve()}),s.mu.delete(e)}function Tb(s,e,n){const r=Ce(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function Hm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach(r=>{s.Ru.containsKey(r)||Eb(s,r)})}function Eb(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(Cp(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),Lp(s))}function Bv(s,e,n){for(const r of n)r instanceof pb?(s.Ru.addReference(r.key,e),DN(s,r)):r instanceof gb?(ye(kp,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||Eb(s,r.key)):xe(19791,{wu:r})}function DN(s,e){const n=e.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(ye(kp,"New document in limbo: "+n),s.Eu.add(r),Lp(s))}function Lp(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new be(dt.fromString(e)),r=s.fu.next();s.Au.set(r,new TN(n)),s.du=s.du.insert(n,r),ab(s.remoteStore,new cr(Gi(Tp(n.path)),r,"TargetPurposeLimboResolution",Vh.ce))}}async function xu(s,e,n){const r=Ce(s),o=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach((m,y)=>{f.push(r.pu(y,e,n).then(_=>{if((_||n)&&r.isPrimaryClient){const E=_?!_.fromCache:n?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(_){o.push(_);const E=Ip.As(y.targetId,_);u.push(E)}}))}),await Promise.all(f),r.Pu.H_(o),await async function(y,_){const E=Ce(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>re.forEach(_,S=>re.forEach(S.Es,P=>E.persistence.referenceDelegate.addReference(I,S.targetId,P)).next(()=>re.forEach(S.ds,P=>E.persistence.referenceDelegate.removeReference(I,S.targetId,P)))))}catch(I){if(!zo(I))throw I;ye(Rp,"Failed to update sequence numbers: "+I)}for(const I of _){const S=I.targetId;if(!I.fromCache){const P=E.Ms.get(S),U=P.snapshotVersion,X=P.withLastLimboFreeSnapshotVersion(U);E.Ms=E.Ms.insert(S,X)}}}(r.localStore,u))}async function ON(s,e){const n=Ce(s);if(!n.currentUser.isEqual(e)){ye(kp,"User change. New user:",e.toKey());const r=await nb(n.localStore,e);n.currentUser=e,function(u,f){u.mu.forEach(m=>{m.forEach(y=>{y.reject(new pe(ee.CANCELLED,f))})}),u.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xu(n,r.Ls)}}function MN(s,e){const n=Ce(s),r=n.Au.get(e);if(r&&r.hu)return Be().add(r.key);{let o=Be();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function bb(s){const e=Ce(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=_b.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RN.bind(null,e),e.Pu.H_=gN.bind(null,e.eventManager),e.Pu.yu=yN.bind(null,e.eventManager),e}function PN(s){const e=Ce(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NN.bind(null,e),e}class Sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return jC(this.persistence,new VC,e.initialUser,this.serializer)}Cu(e){return new tb(xp.mi,this.serializer)}Du(e){return new HC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sh.provider={build:()=>new Sh};class VN extends Sh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Je(this.persistence.referenceDelegate instanceof wh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new TC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new tb(r=>wh.mi(r,n),this.serializer)}}class Wm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Fv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ON.bind(null,this.syncEngine),await dN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new pN}()}createDatastore(e){const n=qh(e.databaseInfo.databaseId),r=function(u){return new YC(u)}(e.databaseInfo);return function(u,f,m,y){return new eN(u,f,m,y)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,o,u,f,m){return new nN(r,o,u,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>Fv(this.syncEngine,n,0),function(){return Pv.v()?new Pv:new WC}())}createSyncEngine(e,n){return function(o,u,f,m,y,_,E){const I=new EN(o,u,f,m,y,_);return E&&(I.gu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const r=Ce(n);ye(ya,"RemoteStore shutting down."),r.Ea.add(5),await Su(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Wm.provider={build:()=>new Wm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Cs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="FirestoreClient";class kN{constructor(e,n,r,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=hn.UNAUTHENTICATED,this.clientId=mp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async f=>{ye(wr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(r,f=>(ye(wr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Pp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function pm(s,e){s.asyncQueue.verifyOperationInProgress(),ye(wr,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener(async o=>{r.isEqual(o)||(await nb(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function zv(s,e){s.asyncQueue.verifyOperationInProgress();const n=await LN(s);ye(wr,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener(r=>kv(e.remoteStore,r)),s.setAppCheckTokenChangeListener((r,o)=>kv(e.remoteStore,o)),s._onlineComponents=e}async function LN(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ye(wr,"Using user provided OfflineComponentProvider");try{await pm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;No("Error using user provided cache. Falling back to memory cache: "+n),await pm(s,new Sh)}}else ye(wr,"Using default OfflineComponentProvider"),await pm(s,new VN(void 0));return s._offlineComponents}async function Ab(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ye(wr,"Using user provided OnlineComponentProvider"),await zv(s,s._uninitializedComponentsProvider._online)):(ye(wr,"Using default OnlineComponentProvider"),await zv(s,new Wm))),s._onlineComponents}function jN(s){return Ab(s).then(e=>e.syncEngine)}async function $m(s){const e=await Ab(s),n=e.eventManager;return n.onListen=bN.bind(null,e.syncEngine),n.onUnlisten=SN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=wN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xN.bind(null,e.syncEngine),n}function UN(s,e,n={}){const r=new pr;return s.asyncQueue.enqueueAndForget(async()=>function(u,f,m,y,_){const E=new wb({next:S=>{E.Nu(),f.enqueueAndForget(()=>db(u,I)),S.fromCache&&y.source==="server"?_.reject(new pe(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),I=new mb(m,E,{includeMetadataChanges:!0,qa:!0});return fb(u,I)}(await $m(s),s.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="firestore.googleapis.com",qv=!0;class Hv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xb,this.ssl=qv}else this.host=e.host,this.ssl=e.ssl??qv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_C)throw new pe(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sb(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $h{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HI;switch(r.type){case"firstParty":return new QI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gv.get(n);r&&(ye("ComponentProvider","Removing Datastore"),Gv.delete(n),r.terminate())}(this),Promise.resolve()}}function FN(s,e,n,r={}){s=yi(s,$h);const o=Lo(e),u=s._getSettings(),f={...u,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${n}`;o&&(gT(`https://${m}`),yT("Firestore",!0)),u.host!==xb&&u.host!==m&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:m,ssl:o,emulatorOptions:r};if(!yr(y,f)&&(s._setSettings(y),r.mockUserToken)){let _,E;if(typeof r.mockUserToken=="string")_=r.mockUserToken,E=hn.MOCK_USER;else{_=tS(r.mockUserToken,s._app?.options.projectId);const I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new pe(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new hn(I)}s._authCredentials=new WI(new fE(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Sa(this.firestore,e,this._query)}}class Lt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}toJSON(){return{type:Lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Eu(n,Lt._jsonSchema))return new Lt(e,r||null,new be(dt.fromString(n.referencePath)))}}Lt._jsonSchemaVersion="firestore/documentReference/1.0",Lt._jsonSchema={type:kt("string",Lt._jsonSchemaVersion),referencePath:kt("string")};class gr extends Sa{constructor(e,n,r){super(e,n,Tp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new be(e))}withConverter(e){return new gr(this.firestore,e,this._path)}}function dn(s,e,...n){if(s=wt(s),dE("collection","path",e),s instanceof $h){const r=dt.fromString(e,...n);return sv(r),new gr(s,null,r)}{if(!(s instanceof Lt||s instanceof gr))throw new pe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(dt.fromString(e,...n));return sv(r),new gr(s.firestore,null,r)}}function yt(s,e,...n){if(s=wt(s),arguments.length===1&&(e=mp.newId()),dE("doc","path",e),s instanceof $h){const r=dt.fromString(e,...n);return iv(r),new Lt(s,null,new be(r))}{if(!(s instanceof Lt||s instanceof gr))throw new pe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(dt.fromString(e,...n));return iv(r),new Lt(s.firestore,s instanceof gr?s.converter:null,new be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="AsyncQueue";class $v{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sb(this,"async_queue_retry"),this._c=()=>{const r=mm();r&&ye(Wv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=mm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=mm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new pr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zo(e))throw e;ye(Wv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Cs("INTERNAL UNHANDLED ERROR: ",Kv(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Mp.createAndSchedule(this,e,n,r,u=>this.hc(u));return this.tc.push(o),o}uc(){this.nc&&xe(47125,{Pc:Kv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Kv(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(s){return function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1}(s,["next","error","complete"])}class Ar extends $h{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new $v,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $v(e),this._firestoreClient=void 0,await e}}}function BN(s,e){const n=typeof s=="object"?s:sp(),r=typeof s=="string"?s:yh,o=Ea(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=JA("firestore");u&&FN(o,...u)}return o}function Kh(s){if(s._terminated)throw new pe(ee.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||zN(s),s._firestoreClient}function zN(s){const e=s._freezeSettings(),n=function(o,u,f,m){return new fR(o,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Sb(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new kN(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._byteString=e}static fromBase64String(e){try{return new li(an.fromBase64String(e))}catch(n){throw new pe(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new li(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:li._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,li._jsonSchema))return li.fromBase64String(e.bytes)}}li._jsonSchemaVersion="firestore/bytes/1.0",li._jsonSchema={type:kt("string",li._jsonSchemaVersion),bytes:kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hi._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,Hi._jsonSchema))return new Hi(e.latitude,e.longitude)}}Hi._jsonSchemaVersion="firestore/geoPoint/1.0",Hi._jsonSchema={type:kt("string",Hi._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,Wi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Wi(e.vectorValues);throw new pe(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wi._jsonSchemaVersion="firestore/vectorValue/1.0",Wi._jsonSchema={type:kt("string",Wi._jsonSchemaVersion),vectorValues:kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=/^__.*__$/;class qN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new wu(e,this.data,n,this.fieldTransforms)}}class Ib{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Rb(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:s})}}class jp{constructor(e,n,r,o,u,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new jp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Rb(this.Ac)&&GN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class HN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qh(e)}Cc(e,n,r,o=!1){return new jp({Ac:e,methodName:n,Dc:r,path:rn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yh(s){const e=s._freezeSettings(),n=qh(s._databaseId);return new HN(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Cb(s,e,n,r,o,u={}){const f=s.Cc(u.merge||u.mergeFields?2:0,e,n,o);Fp("Data must be an object, but it was:",f,r);const m=Ob(r,f);let y,_;if(u.merge)y=new zn(f.fieldMask),_=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const I of u.mergeFields){const S=Km(e,I,n);if(!f.contains(S))throw new pe(ee.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Pb(E,S)||E.push(S)}y=new zn(E),_=f.fieldTransforms.filter(I=>y.covers(I.field))}else y=null,_=f.fieldTransforms;return new qN(new Nn(m),y,_)}class Xh extends Qh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xh}}class Up extends Qh{_toFieldTransform(e){return new jR(e.path,new du)}isEqual(e){return e instanceof Up}}function Nb(s,e,n,r){const o=s.Cc(1,e,n);Fp("Data must be an object, but it was:",o,r);const u=[],f=Nn.empty();Ir(r,(y,_)=>{const E=Bp(e,y,n);_=wt(_);const I=o.yc(E);if(_ instanceof Xh)u.push(E);else{const S=Ru(_,I);S!=null&&(u.push(E),f.set(E,S))}});const m=new zn(u);return new Ib(f,m,o.fieldTransforms)}function Db(s,e,n,r,o,u){const f=s.Cc(1,e,n),m=[Km(e,r,n)],y=[o];if(u.length%2!=0)throw new pe(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(Km(e,u[S])),y.push(u[S+1]);const _=[],E=Nn.empty();for(let S=m.length-1;S>=0;--S)if(!Pb(_,m[S])){const P=m[S];let U=y[S];U=wt(U);const X=f.yc(P);if(U instanceof Xh)_.push(P);else{const H=Ru(U,X);H!=null&&(_.push(P),E.set(P,H))}}const I=new zn(_);return new Ib(E,I,f.fieldTransforms)}function WN(s,e,n,r=!1){return Ru(n,s.Cc(r?4:3,e))}function Ru(s,e){if(Mb(s=wt(s)))return Fp("Unsupported field value:",e,s),Ob(s,e);if(s instanceof Qh)return function(r,o){if(!Rb(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,o){const u=[];let f=0;for(const m of r){let y=Ru(m,o.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}}(s,e)}return function(r,o){if((r=wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VR(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=gt.fromDate(r);return{timestampValue:bh(o.serializer,u)}}if(r instanceof gt){const u=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bh(o.serializer,u)}}if(r instanceof Hi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof li)return{bytesValue:$E(o.serializer,r._byteString)};if(r instanceof Lt){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Ap(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Wi)return function(f,m){return{mapValue:{fields:{[bE]:{stringValue:wE},[_h]:{arrayValue:{values:f.toArray().map(_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return Ep(m.serializer,_)})}}}}}}(r,o);throw o.Sc(`Unsupported field value: ${Ph(r)}`)}(s,e)}function Ob(s,e){const n={};return gE(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ir(s,(r,o)=>{const u=Ru(o,e.mc(r));u!=null&&(n[r]=u)}),{mapValue:{fields:n}}}function Mb(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof gt||s instanceof Hi||s instanceof li||s instanceof Lt||s instanceof Qh||s instanceof Wi)}function Fp(s,e,n){if(!Mb(n)||!mE(n)){const r=Ph(n);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function Km(s,e,n){if((e=wt(e))instanceof Iu)return e._internalPath;if(typeof e=="string")return Bp(s,e);throw xh("Field path arguments must be of type string or ",s,!1,void 0,n)}const $N=new RegExp("[~\\*/\\[\\]]");function Bp(s,e,n){if(e.search($N)>=0)throw xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Iu(...e.split("."))._internalPath}catch{throw xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function xh(s,e,n,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${r}`),f&&(y+=` in document ${o}`),y+=")"),new pe(ee.INVALID_ARGUMENT,m+s+y)}function Pb(s,e){return s.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,n,r,o,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(kb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KN extends Vb{data(){return super.data()}}function kb(s,e){return typeof e=="string"?Bp(s,e):e instanceof Iu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new pe(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zp{}class QN extends zp{}function Yc(s,e,...n){let r=[];e instanceof zp&&r.push(e),r=r.concat(n),function(u){const f=u.filter(y=>y instanceof qp).length,m=u.filter(y=>y instanceof Gp).length;if(f>1||f>0&&m>0)throw new pe(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)s=o._apply(s);return s}class Gp extends QN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Gp(e,n,r)}_apply(e){const n=this._parse(e);return jb(e._query,n),new Sa(e.firestore,e.converter,km(e._query,n))}_parse(e){const n=Yh(e.firestore);return function(u,f,m,y,_,E,I){let S;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new pe(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Xv(I,E);const U=[];for(const X of I)U.push(Yv(y,u,X));S={arrayValue:{values:U}}}else S=Yv(y,u,I)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Xv(I,E),S=WN(m,f,I,E==="in"||E==="not-in");return Vt.create(_,E,S)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class qp extends zp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new qp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ti.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const y of m)jb(f,y),f=km(f,y)}(e._query,n),new Sa(e.firestore,e.converter,km(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Yv(s,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new pe(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DE(e)&&n.indexOf("/")!==-1)throw new pe(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(dt.fromString(n));if(!be.isDocumentKey(r))throw new pe(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fv(s,new be(r))}if(n instanceof Lt)return fv(s,n._key);throw new pe(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ph(n)}.`)}function Xv(s,e){if(!Array.isArray(s)||s.length===0)throw new pe(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jb(s,e){const n=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new pe(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class YN{convertValue(e,n="none"){switch(Er(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ir(e,(o,u)=>{r[o]=this.convertValue(u,n)}),r}convertVectorValue(e){const n=e.fields?.[_h].arrayValue?.values?.map(r=>Nt(r.doubleValue));return new Wi(n)}convertGeoPoint(e){return new Hi(Nt(e.latitude),Nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Lh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(cu(e));default:return null}}convertTimestamp(e){const n=vr(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=dt.fromString(e);Je(JE(r),9688,{name:e});const o=new hu(r.get(1),r.get(3)),u=new be(r.popFirst(5));return o.isEqual(n)||Cs(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(s,e,n){let r;return r=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,r}class Zl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fa extends Vb{constructor(e,n,r,o,u,f){super(e,n,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(kb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=fa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fa._jsonSchemaVersion="firestore/documentSnapshot/1.0",fa._jsonSchema={type:kt("string",fa._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class oh extends fa{data(e={}){return super.data(e)}}class da{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Zl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new oh(this._firestore,this._userDataWriter,r.key,r,new Zl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const y=new oh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const y=new oh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return m.type!==0&&(_=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:XN(m.type),doc:y,oldIndex:_,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=da._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach(u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:s})}}da._jsonSchemaVersion="firestore/querySnapshot/1.0",da._jsonSchema={type:kt("string",da._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};class Hp extends YN{constructor(e){super(),this.firestore=e}convertBytes(e){return new li(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,n)}}function ZN(s){s=yi(s,Sa);const e=yi(s.firestore,Ar),n=Kh(e),r=new Hp(e);return Lb(s._query),UN(n,s._query).then(o=>new da(e,r,s,o))}function JN(s,e,n,...r){s=yi(s,Lt);const o=yi(s.firestore,Ar),u=Yh(o);let f;return f=typeof(e=wt(e))=="string"||e instanceof Iu?Db(u,"updateDoc",s._key,e,n,r):Nb(u,"updateDoc",s._key,e),Zh(o,[f.toMutation(s._key,Dn.exists(!0))])}function e2(s){return Zh(yi(s.firestore,Ar),[new zh(s._key,Dn.none())])}function Fb(s,e){const n=yi(s.firestore,Ar),r=yt(s),o=Ub(s.converter,e);return Zh(n,[Cb(Yh(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,Dn.exists(!1))]).then(()=>r)}function Xc(s,...e){s=wt(s);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Qv(e[r])||(n=e[r++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Qv(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let u,f,m;if(s instanceof Lt)f=yi(s.firestore,Ar),m=Tp(s._key.path),u={next:y=>{e[r]&&e[r](t2(f,s,y))},error:e[r+1],complete:e[r+2]};else{const y=yi(s,Sa);f=yi(y.firestore,Ar),m=y._query;const _=new Hp(f);u={next:E=>{e[r]&&e[r](new da(f,_,y,E))},error:e[r+1],complete:e[r+2]},Lb(s._query)}return function(_,E,I,S){const P=new wb(S),U=new mb(E,P,I);return _.asyncQueue.enqueueAndForget(async()=>fb(await $m(_),U)),()=>{P.Nu(),_.asyncQueue.enqueueAndForget(async()=>db(await $m(_),U))}}(Kh(f),m,o,u)}function Zh(s,e){return function(r,o){const u=new pr;return r.asyncQueue.enqueueAndForget(async()=>IN(await jN(r),o,u)),u.promise}(Kh(s),e)}function t2(s,e,n){const r=n.docs.get(e._key),o=new Hp(s);return new fa(s,o,e._key,r,new Zl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Yh(e)}set(e,n,r){this._verifyNotCommitted();const o=gm(e,this._firestore),u=Ub(o.converter,n,r),f=Cb(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(f.toMutation(o._key,Dn.none())),this}update(e,n,r,...o){this._verifyNotCommitted();const u=gm(e,this._firestore);let f;return f=typeof(n=wt(n))=="string"||n instanceof Iu?Db(this._dataReader,"WriteBatch.update",u._key,n,r,o):Nb(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(f.toMutation(u._key,Dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=gm(e,this._firestore);return this._mutations=this._mutations.concat(new zh(n._key,Dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pe(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gm(s,e){if((s=wt(s)).firestore!==e)throw new pe(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function Fi(){return new Up("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(s){return Kh(s=yi(s,Ar)),new n2(s,e=>Zh(s,e))}(function(e,n=!0){(function(o){Fo=o})(jo),$i(new _i("firestore",(r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),m=new Ar(new $I(r.getProvider("auth-internal")),new YI(f,r.getProvider("app-check-internal")),function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new pe(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hu(_.options.projectId,E)}(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),ui(J_,ev,e),ui(J_,ev,"esm2020")})();const Bb="@firebase/installations",Wp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=1e4,Gb=`w:${Wp}`,qb="FIS_v2",i2="https://firebaseinstallations.googleapis.com/v1",s2=3600*1e3,r2="installations",a2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},_a=new Ta(r2,a2,o2);function Hb(s){return s instanceof Ei&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb({projectId:s}){return`${i2}/projects/${s}/installations`}function $b(s){return{token:s.token,requestStatus:2,expiresIn:u2(s.expiresIn),creationTime:Date.now()}}async function Kb(s,e){const r=(await e.json()).error;return _a.create("request-failed",{requestName:s,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Qb({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function l2(s,{refreshToken:e}){const n=Qb(s);return n.append("Authorization",c2(e)),n}async function Yb(s){const e=await s();return e.status>=500&&e.status<600?s():e}function u2(s){return Number(s.replace("s","000"))}function c2(s){return`${qb} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h2({appConfig:s,heartbeatServiceProvider:e},{fid:n}){const r=Wb(s),o=Qb(s),u=e.getImmediate({optional:!0});if(u){const _=await u.getHeartbeatsHeader();_&&o.append("x-firebase-client",_)}const f={fid:n,authVersion:qb,appId:s.appId,sdkVersion:Gb},m={method:"POST",headers:o,body:JSON.stringify(f)},y=await Yb(()=>fetch(r,m));if(y.ok){const _=await y.json();return{fid:_.fid||n,registrationStatus:2,refreshToken:_.refreshToken,authToken:$b(_.authToken)}}else throw await Kb("Create Installation",y)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(s){return new Promise(e=>{setTimeout(e,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=/^[cdef][\w-]{21}$/,Qm="";function m2(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const n=p2(s);return d2.test(n)?n:Qm}catch{return Qm}}function p2(s){return f2(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=new Map;function Jb(s,e){const n=Jh(s);ew(n,e),g2(n,e)}function ew(s,e){const n=Zb.get(s);if(n)for(const r of n)r(e)}function g2(s,e){const n=y2();n&&n.postMessage({key:s,fid:e}),_2()}let ha=null;function y2(){return!ha&&"BroadcastChannel"in self&&(ha=new BroadcastChannel("[Firebase] FID Change"),ha.onmessage=s=>{ew(s.data.key,s.data.fid)}),ha}function _2(){Zb.size===0&&ha&&(ha.close(),ha=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="firebase-installations-database",T2=1,va="firebase-installations-store";let ym=null;function $p(){return ym||(ym=ET(v2,T2,{upgrade:(s,e)=>{switch(e){case 0:s.createObjectStore(va)}}})),ym}async function Ih(s,e){const n=Jh(s),o=(await $p()).transaction(va,"readwrite"),u=o.objectStore(va),f=await u.get(n);return await u.put(e,n),await o.done,(!f||f.fid!==e.fid)&&Jb(s,e.fid),e}async function tw(s){const e=Jh(s),r=(await $p()).transaction(va,"readwrite");await r.objectStore(va).delete(e),await r.done}async function ef(s,e){const n=Jh(s),o=(await $p()).transaction(va,"readwrite"),u=o.objectStore(va),f=await u.get(n),m=e(f);return m===void 0?await u.delete(n):await u.put(m,n),await o.done,m&&(!f||f.fid!==m.fid)&&Jb(s,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kp(s){let e;const n=await ef(s.appConfig,r=>{const o=E2(r),u=b2(s,o);return e=u.registrationPromise,u.installationEntry});return n.fid===Qm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function E2(s){const e=s||{fid:m2(),registrationStatus:0};return nw(e)}function b2(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(_a.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=w2(s,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:A2(s)}:{installationEntry:e}}async function w2(s,e){try{const n=await h2(s,e);return Ih(s.appConfig,n)}catch(n){throw Hb(n)&&n.customData.serverCode===409?await tw(s.appConfig):await Ih(s.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function A2(s){let e=await Zv(s.appConfig);for(;e.registrationStatus===1;)await Xb(100),e=await Zv(s.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Kp(s);return r||n}return e}function Zv(s){return ef(s,e=>{if(!e)throw _a.create("installation-not-found");return nw(e)})}function nw(s){return S2(s)?{fid:s.fid,registrationStatus:0}:s}function S2(s){return s.registrationStatus===1&&s.registrationTime+zb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2({appConfig:s,heartbeatServiceProvider:e},n){const r=I2(s,n),o=l2(s,n),u=e.getImmediate({optional:!0});if(u){const _=await u.getHeartbeatsHeader();_&&o.append("x-firebase-client",_)}const f={installation:{sdkVersion:Gb,appId:s.appId}},m={method:"POST",headers:o,body:JSON.stringify(f)},y=await Yb(()=>fetch(r,m));if(y.ok){const _=await y.json();return $b(_)}else throw await Kb("Generate Auth Token",y)}function I2(s,{fid:e}){return`${Wb(s)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qp(s,e=!1){let n;const r=await ef(s.appConfig,u=>{if(!iw(u))throw _a.create("not-registered");const f=u.authToken;if(!e&&N2(f))return u;if(f.requestStatus===1)return n=R2(s,e),u;{if(!navigator.onLine)throw _a.create("app-offline");const m=O2(u);return n=C2(s,m),m}});return n?await n:r.authToken}async function R2(s,e){let n=await Jv(s.appConfig);for(;n.authToken.requestStatus===1;)await Xb(100),n=await Jv(s.appConfig);const r=n.authToken;return r.requestStatus===0?Qp(s,e):r}function Jv(s){return ef(s,e=>{if(!iw(e))throw _a.create("not-registered");const n=e.authToken;return M2(n)?{...e,authToken:{requestStatus:0}}:e})}async function C2(s,e){try{const n=await x2(s,e),r={...e,authToken:n};return await Ih(s.appConfig,r),n}catch(n){if(Hb(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await tw(s.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Ih(s.appConfig,r)}throw n}}function iw(s){return s!==void 0&&s.registrationStatus===2}function N2(s){return s.requestStatus===2&&!D2(s)}function D2(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+s2}function O2(s){const e={requestStatus:1,requestTime:Date.now()};return{...s,authToken:e}}function M2(s){return s.requestStatus===1&&s.requestTime+zb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(s){const e=s,{installationEntry:n,registrationPromise:r}=await Kp(e);return r?r.catch(console.error):Qp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V2(s,e=!1){const n=s;return await k2(n),(await Qp(n,e)).token}async function k2(s){const{registrationPromise:e}=await Kp(s);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(s){if(!s||!s.options)throw _m("App Configuration");if(!s.name)throw _m("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!s.options[n])throw _m(n);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function _m(s){return _a.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="installations",j2="installations-internal",U2=s=>{const e=s.getProvider("app").getImmediate(),n=L2(e),r=Ea(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},F2=s=>{const e=s.getProvider("app").getImmediate(),n=Ea(e,sw).getImmediate();return{getId:()=>P2(n),getToken:o=>V2(n,o)}};function B2(){$i(new _i(sw,U2,"PUBLIC")),$i(new _i(j2,F2,"PRIVATE"))}B2();ui(Bb,Wp);ui(Bb,Wp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh="analytics",z2="firebase_id",G2="origin",q2=60*1e3,H2="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Yp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On=new Nh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Gn=new Ta("analytics","Analytics",W2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(s){if(!s.startsWith(Yp)){const e=Gn.create("invalid-gtag-resource",{gtagURL:s});return On.warn(e.message),""}return s}function rw(s){return Promise.all(s.map(e=>e.catch(n=>n)))}function K2(s,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(s,e)),n}function Q2(s,e){const n=K2("firebase-js-sdk-policy",{createScriptURL:$2}),r=document.createElement("script"),o=`${Yp}?l=${s}&id=${e}`;r.src=n?n?.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function Y2(s){let e=[];return Array.isArray(window[s])?e=window[s]:window[s]=e,e}async function X2(s,e,n,r,o,u){const f=r[o];try{if(f)await e[f];else{const y=(await rw(n)).find(_=>_.measurementId===o);y&&await e[y.appId]}}catch(m){On.error(m)}s("config",o,u)}async function Z2(s,e,n,r,o){try{let u=[];if(o&&o.send_to){let f=o.send_to;Array.isArray(f)||(f=[f]);const m=await rw(n);for(const y of f){const _=m.find(I=>I.measurementId===y),E=_&&e[_.appId];if(E)u.push(E);else{u=[];break}}}u.length===0&&(u=Object.values(e)),await Promise.all(u),s("event",r,o||{})}catch(u){On.error(u)}}function J2(s,e,n,r){async function o(u,...f){try{if(u==="event"){const[m,y]=f;await Z2(s,e,n,m,y)}else if(u==="config"){const[m,y]=f;await X2(s,e,n,r,m,y)}else if(u==="consent"){const[m,y]=f;s("consent",m,y)}else if(u==="get"){const[m,y,_]=f;s("get",m,y,_)}else if(u==="set"){const[m]=f;s("set",m)}else s(u,...f)}catch(m){On.error(m)}}return o}function eD(s,e,n,r,o){let u=function(...f){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(u=window[o]),window[o]=J2(u,s,e,n),{gtagCore:u,wrappedGtag:window[o]}}function tD(s){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Yp)&&n.src.includes(s))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=30,iD=1e3;class sD{constructor(e={},n=iD){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const aw=new sD;function rD(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function aD(s){const{appId:e,apiKey:n}=s,r={method:"GET",headers:rD(n)},o=H2.replace("{app-id}",e),u=await fetch(o,r);if(u.status!==200&&u.status!==304){let f="";try{const m=await u.json();m.error?.message&&(f=m.error.message)}catch{}throw Gn.create("config-fetch-failed",{httpStatus:u.status,responseMessage:f})}return u.json()}async function oD(s,e=aw,n){const{appId:r,apiKey:o,measurementId:u}=s.options;if(!r)throw Gn.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:r};throw Gn.create("no-api-key")}const f=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new cD;return setTimeout(async()=>{m.abort()},q2),ow({appId:r,apiKey:o,measurementId:u},f,m,e)}async function ow(s,{throttleEndTimeMillis:e,backoffCount:n},r,o=aw){const{appId:u,measurementId:f}=s;try{await lD(r,e)}catch(m){if(f)return On.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:u,measurementId:f};throw m}try{const m=await aD(s);return o.deleteThrottleMetadata(u),m}catch(m){const y=m;if(!uD(y)){if(o.deleteThrottleMetadata(u),f)return On.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${y?.message}]`),{appId:u,measurementId:f};throw m}const _=Number(y?.customData?.httpStatus)===503?A_(n,o.intervalMillis,nD):A_(n,o.intervalMillis),E={throttleEndTimeMillis:Date.now()+_,backoffCount:n+1};return o.setThrottleMetadata(u,E),On.debug(`Calling attemptFetch again in ${_} millis`),ow(s,E,r,o)}}function lD(s,e){return new Promise((n,r)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(n,o);s.addEventListener(()=>{clearTimeout(u),r(Gn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function uD(s){if(!(s instanceof Ei)||!s.customData)return!1;const e=Number(s.customData.httpStatus);return e===429||e===500||e===503||e===504}class cD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function hD(s,e,n,r,o){if(o&&o.global){s("event",n,r);return}else{const u=await e,f={...r,send_to:u};s("event",n,f)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(){if(tp())try{await np()}catch(s){return On.warn(Gn.create("indexeddb-unavailable",{errorInfo:s?.toString()}).message),!1}else return On.warn(Gn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function dD(s,e,n,r,o,u,f){const m=oD(s);m.then(S=>{n[S.measurementId]=S.appId,s.options.measurementId&&S.measurementId!==s.options.measurementId&&On.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>On.error(S)),e.push(m);const y=fD().then(S=>{if(S)return r.getId()}),[_,E]=await Promise.all([m,y]);tD(u)||Q2(u,_.measurementId),o("js",new Date);const I=f?.config??{};return I[G2]="firebase",I.update=!0,E!=null&&(I[z2]=E),o("config",_.measurementId,I),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.app=e}_delete(){return delete ru[this.app.options.appId],Promise.resolve()}}let ru={},eT=[];const tT={};let vm="dataLayer",pD="gtag",nT,lw,iT=!1;function gD(){const s=[];if(ep()&&s.push("This is a browser extension environment."),_T()||s.push("Cookies are not available."),s.length>0){const e=s.map((r,o)=>`(${o+1}) ${r}`).join(" "),n=Gn.create("invalid-analytics-context",{errorInfo:e});On.warn(n.message)}}function yD(s,e,n){gD();const r=s.options.appId;if(!r)throw Gn.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)On.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Gn.create("no-api-key");if(ru[r]!=null)throw Gn.create("already-exists",{id:r});if(!iT){Y2(vm);const{wrappedGtag:u,gtagCore:f}=eD(ru,eT,tT,vm,pD);lw=u,nT=f,iT=!0}return ru[r]=dD(s,eT,tT,e,nT,vm,n),new mD(s)}function _D(s=sp()){s=wt(s);const e=Ea(s,Rh);return e.isInitialized()?e.getImmediate():vD(s)}function vD(s,e={}){const n=Ea(s,Rh);if(n.isInitialized()){const o=n.getImmediate();if(yr(e,n.getOptions()))return o;throw Gn.create("already-initialized")}return n.initialize({options:e})}async function TD(){if(ep()||!_T()||!tp())return!1;try{return await np()}catch{return!1}}function ED(s,e,n,r){s=wt(s),hD(lw,ru[s.app.options.appId],e,n,r).catch(o=>On.error(o))}const sT="@firebase/analytics",rT="0.10.18";function bD(){$i(new _i(Rh,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return yD(r,o,n)},"PUBLIC")),$i(new _i("analytics-internal",s,"PRIVATE")),ui(sT,rT),ui(sT,rT,"esm2020");function s(e){try{const n=e.getProvider(Rh).getImmediate();return{logEvent:(r,o,u)=>ED(n,r,o,u)}}catch(n){throw Gn.create("interop-component-reg-failed",{reason:n})}}}bD();const wD={apiKey:"AIzaSyDOrlhhOY8anp9gAlM5wlXsBfhYe-pjAA8",authDomain:"spirit-co-tracker.firebaseapp.com",projectId:"spirit-co-tracker",storageBucket:"spirit-co-tracker.firebasestorage.app",messagingSenderId:"587421865283",appId:"1:587421865283:web:b58af950daaa93ce450bf6",measurementId:"G-KQGZ3F3E97"},Xp=bT(wD),aT=GI(Xp),AD=BN(Xp);TD().then(s=>{s&&_D(Xp)});const SD=6.61,Ym=8.328,xD=3785.41,ID="Foggy Mountain Spirit Inventory",RD=[{name:"Salted Caramel Whiskey",description:"A delightful blend of sweet caramel and a hint of sea salt, perfectly balanced with smooth whiskey notes."},{name:"Bonfire Cinnamon Whiskey",description:"Ignite your senses with the warm, spicy kick of cinnamon in this bold and inviting whiskey."},{name:"Peach Whiskey",description:"Juicy, ripe peach flavors infused into classic whiskey for a refreshing and sweet experience."},{name:"Peanut Butter Whiskey",description:"A surprisingly delicious combination of creamy peanut butter and rich whiskey – a truly unique treat."},{name:"Coffee Whiskey",description:"The perfect pick-me-up, blending robust coffee aromas with the comforting warmth of whiskey."},{name:"Kettle Corn Whiskey",description:"Sweet, salty, and buttery notes reminiscent of your favorite fairground snack, in a spirited form."},{name:"Blackberry Whiskey",description:"Dark, luscious blackberry essence meets smooth whiskey for a sophisticated and fruity delight."},{name:"Latitude 45 Vodka",description:"Clean, crisp, and exceptionally smooth vodka, perfect for sipping chilled or as the base of your favorite cocktail."},{name:"Latitude 45 Rum",description:"A versatile rum with hints of tropical sweetness, ideal for classic rum cocktails or enjoying on its own."},{name:"Latitude 45 Gin",description:"Aromatic and botanical-rich gin, offering a complex yet refreshing profile for the discerning gin lover."},{name:"Northern Xposure",description:"An adventurous spirit that captures the essence of the north, with a bold and invigorating character."},{name:"Unspecified Spirit",description:"A spirit of undefined character, awaiting its unique identity."},{name:"Mash",description:"The foundational blend of grains and water, the starting point of our finest spirits."},{name:"Low Wines",description:"The initial product of distillation, a crucial intermediate step towards refined spirits."}],Zp={wooden_barrel:53,metal_drum:55,square_tank:275,tote:250,five_gallon_tote:5,still:100,fermenter:500},oT=[{name:"750 mL (Standard)",value:750},{name:"375 mL (Half)",value:375},{name:"1.75 L (Handle)",value:1750},{name:"1.0 L (Liter)",value:1e3},{name:"50 mL (Mini)",value:50}],qo="rgba(96, 165, 250, 0.8)",lT="#DA8A67",ws="#B87333",hr="#D3D3D3",Cn="#A9A9A9",CD=({fillSvgHeight:s=0})=>p.jsxs("svg",{viewBox:"0 0 100 120",className:"w-16 h-20 inline-block",children:[p.jsxs("defs",{children:[p.jsxs("radialGradient",{id:"barrelBodyGradient",cx:"50%",cy:"50%",r:"70%",fx:"30%",fy:"30%",children:[p.jsx("stop",{offset:"0%",style:{stopColor:"#B8860B",stopOpacity:1}}),p.jsx("stop",{offset:"100%",style:{stopColor:"#8B4513",stopOpacity:1}})]}),p.jsxs("linearGradient",{id:"hoopGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[p.jsx("stop",{offset:"0%",style:{stopColor:"#C0C0C0",stopOpacity:1}}),p.jsx("stop",{offset:"50%",style:{stopColor:"#A9A9A9",stopOpacity:1}}),p.jsx("stop",{offset:"100%",style:{stopColor:"#808080",stopOpacity:1}})]}),p.jsx("clipPath",{id:"barrelClip",children:p.jsx("ellipse",{cx:"50",cy:"60",rx:"45",ry:"58"})})]}),p.jsx("ellipse",{cx:"50",cy:"60",rx:"45",ry:"58",fill:"url(#barrelBodyGradient)"}),s>0&&p.jsx("rect",{x:"5",y:118-s-(58-Math.sqrt(1-(0/45)**2)*58),width:"90",height:s,fill:qo,clipPath:"url(#barrelClip)"}),[15,25,35,45,55,65,75,85].map(e=>p.jsx("path",{d:`M ${e} 15 Q ${e} 60 ${e} 105`,stroke:"rgba(0,0,0,0.1)",strokeWidth:"1",fill:"none"},e)),p.jsx("ellipse",{cx:"50",cy:"22",rx:"42",ry:"10",fill:"url(#hoopGradient)",stroke:"#543517",strokeWidth:"1"}),p.jsx("ellipse",{cx:"50",cy:"42",rx:"45",ry:"9",fill:"url(#hoopGradient)",stroke:"#543517",strokeWidth:"1"}),p.jsx("ellipse",{cx:"50",cy:"78",rx:"45",ry:"9",fill:"url(#hoopGradient)",stroke:"#543517",strokeWidth:"1"}),p.jsx("ellipse",{cx:"50",cy:"98",rx:"42",ry:"10",fill:"url(#hoopGradient)",stroke:"#543517",strokeWidth:"1"}),p.jsx("ellipse",{cx:"50",cy:"12",rx:"40",ry:"8",fill:"#A0522D",stroke:"#543517",strokeWidth:"1.5"}),p.jsx("ellipse",{cx:"50",cy:"108",rx:"40",ry:"8",fill:"#8B4513",stroke:"#543517",strokeWidth:"1.5"}),p.jsx("circle",{cx:"50",cy:"30",r:"3",fill:"#4A2E10"})]}),ND=({fillSvgHeight:s=0})=>p.jsxs("svg",{viewBox:"0 0 100 120",className:"w-16 h-20 inline-block",children:[p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"drumBodyGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[p.jsx("stop",{offset:"0%",style:{stopColor:hr}}),p.jsx("stop",{offset:"20%",style:{stopColor:Cn}}),p.jsx("stop",{offset:"50%",style:{stopColor:hr}}),p.jsx("stop",{offset:"80%",style:{stopColor:Cn}}),p.jsx("stop",{offset:"100%",style:{stopColor:hr}})]}),p.jsx("clipPath",{id:"drumClip",children:p.jsx("rect",{x:"10",y:"10",width:"80",height:"100",rx:"8",ry:"8"})})]}),p.jsx("rect",{x:"10",y:"10",width:"80",height:"100",rx:"8",ry:"8",fill:"url(#drumBodyGradient)"}),s>0&&p.jsx("rect",{x:"10",y:110-s,width:"80",height:s,fill:qo,clipPath:"url(#drumClip)",rx:"8",ry:"8"}),p.jsx("rect",{x:"8",y:"30",width:"84",height:"8",rx:"4",fill:Cn,stroke:"#707070",strokeWidth:"0.5"}),p.jsx("rect",{x:"8",y:"55",width:"84",height:"8",rx:"4",fill:Cn,stroke:"#707070",strokeWidth:"0.5"}),p.jsx("rect",{x:"8",y:"80",width:"84",height:"8",rx:"4",fill:Cn,stroke:"#707070",strokeWidth:"0.5"}),p.jsx("ellipse",{cx:"50",cy:"11",rx:"42",ry:"6",fill:hr,stroke:"#707070",strokeWidth:"1"}),p.jsx("ellipse",{cx:"50",cy:"109",rx:"42",ry:"6",fill:Cn,stroke:"#707070",strokeWidth:"1"}),p.jsx("circle",{cx:"35",cy:"11",r:"5",fill:"#777777"}),p.jsx("circle",{cx:"35",cy:"10.5",r:"4.5",fill:"#888888"}),p.jsx("circle",{cx:"65",cy:"11",r:"5",fill:"#777777"}),p.jsx("circle",{cx:"65",cy:"10.5",r:"4.5",fill:"#888888"})]}),DD=({fillSvgHeight:s=0})=>p.jsxs("svg",{viewBox:"0 0 120 120",className:"w-20 h-20 inline-block",children:[p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"cageGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:hr}),p.jsx("stop",{offset:"100%",stopColor:Cn})]}),p.jsx("clipPath",{id:"tankClip",children:p.jsx("rect",{x:"15",y:"15",width:"90",height:"90",rx:"3"})})]}),p.jsx("rect",{x:"5",y:"5",width:"110",height:"110",fill:"none",stroke:"url(#cageGradient)",strokeWidth:"5",rx:"5"}),[35,65,95].map(e=>p.jsx("line",{x1:"5",y1:e,x2:"115",y2:e,stroke:"url(#cageGradient)",strokeWidth:"4"},`h-${e}`)),[35,65,95].map(e=>p.jsx("line",{x1:e,y1:"5",x2:e,y2:"115",stroke:"url(#cageGradient)",strokeWidth:"4"},`v-${e}`)),p.jsx("rect",{x:"15",y:"15",width:"90",height:"90",fill:"rgba(220, 230, 240, 0.85)",rx:"3"}),s>0&&p.jsx("rect",{x:"15",y:105-s,width:"90",height:s,fill:qo,clipPath:"url(#tankClip)",rx:"3"}),p.jsx("circle",{cx:"60",cy:"20",r:"12",fill:"#606060"}),p.jsx("circle",{cx:"60",cy:"19.5",r:"10",fill:"#787878"}),p.jsx("rect",{x:"50",y:"102",width:"20",height:"15",fill:"#606060",rx:"2"}),p.jsx("rect",{x:"52",y:"107",width:"16",height:"5",fill:"#787878",rx:"1"})]}),OD=({fillSvgHeight:s=0})=>p.jsxs("svg",{viewBox:"0 0 100 120",className:"w-16 h-20 inline-block",children:[p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"toteCageGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:hr}),p.jsx("stop",{offset:"100%",stopColor:Cn})]}),p.jsx("clipPath",{id:"toteClip",children:p.jsx("rect",{x:"10",y:"10",width:"80",height:"100",rx:"3"})})]}),p.jsx("rect",{x:"5",y:"5",width:"90",height:"110",fill:"none",stroke:"url(#toteCageGradient)",strokeWidth:"3.5",rx:"5"}),p.jsx("line",{x1:"5",y1:"30",x2:"95",y2:"30",stroke:"url(#toteCageGradient)",strokeWidth:"3"}),p.jsx("line",{x1:"5",y1:"60",x2:"95",y2:"60",stroke:"url(#toteCageGradient)",strokeWidth:"3"}),p.jsx("line",{x1:"5",y1:"90",x2:"95",y2:"90",stroke:"url(#toteCageGradient)",strokeWidth:"3"}),p.jsx("line",{x1:"30",y1:"5",x2:"30",y2:"115",stroke:"url(#toteCageGradient)",strokeWidth:"3"}),p.jsx("line",{x1:"70",y1:"5",x2:"70",y2:"115",stroke:"url(#toteCageGradient)",strokeWidth:"3"}),p.jsx("rect",{x:"10",y:"10",width:"80",height:"100",fill:"rgba(230, 230, 250, 0.9)",rx:"3"}),s>0&&p.jsx("rect",{x:"10",y:110-s,width:"80",height:s,fill:qo,clipPath:"url(#toteClip)",rx:"3"}),p.jsx("circle",{cx:"50",cy:"15",r:"10",fill:"#505050"}),p.jsx("circle",{cx:"50",cy:"14.5",r:"8",fill:"#686868"}),p.jsx("rect",{x:"42",y:"108",width:"16",height:"10",fill:"#505050",rx:"1.5"})]}),MD=({fillSvgHeight:s=0})=>p.jsxs("svg",{viewBox:"0 0 60 80",className:"w-10 h-14 inline-block",children:[p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"smallToteBodyGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[p.jsx("stop",{offset:"0%",style:{stopColor:"rgba(200, 210, 220, 0.9)"}}),p.jsx("stop",{offset:"50%",style:{stopColor:"rgba(220, 230, 240, 0.9)"}}),p.jsx("stop",{offset:"100%",style:{stopColor:"rgba(200, 210, 220, 0.9)"}})]}),p.jsx("clipPath",{id:"smallToteClipUnique",children:p.jsx("rect",{x:"5",y:"10",width:"50",height:"65",rx:"2"})})]}),p.jsx("rect",{x:"5",y:"10",width:"50",height:"65",rx:"2",fill:"url(#smallToteBodyGradient)",stroke:"#777",strokeWidth:"1.5"}),s>0&&p.jsx("rect",{x:"5",y:75-s,width:"50",height:s,fill:qo,clipPath:"url(#smallToteClipUnique)",rx:"2"}),p.jsx("rect",{x:"22",y:"3",width:"16",height:"7",rx:"1",fill:"#585858"}),p.jsx("path",{d:"M 18 10 Q 30 5 42 10",stroke:"#606060",strokeWidth:"1.5",fill:"none"})]}),PD=({fillSvgHeight:s=0})=>p.jsxs("svg",{viewBox:"0 0 100 120",className:"w-16 h-20 inline-block",children:[p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"copperPotGradientStill",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[p.jsx("stop",{offset:"0%",style:{stopColor:lT,stopOpacity:1}}),p.jsx("stop",{offset:"100%",style:{stopColor:ws,stopOpacity:1}})]}),p.jsxs("linearGradient",{id:"copperPipeGradientStill",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[p.jsx("stop",{offset:"0%",style:{stopColor:ws,stopOpacity:1}}),p.jsx("stop",{offset:"50%",style:{stopColor:lT,stopOpacity:1}}),p.jsx("stop",{offset:"100%",style:{stopColor:ws,stopOpacity:1}})]}),p.jsx("clipPath",{id:"stillPotClip",children:p.jsx("ellipse",{cx:"50",cy:"85",rx:"40",ry:"30"})})]}),p.jsx("ellipse",{cx:"50",cy:"85",rx:"40",ry:"30",fill:"url(#copperPotGradientStill)",stroke:ws,strokeWidth:"1.5"}),s>0&&p.jsx("rect",{x:"10",y:115-s,width:"80",height:s,fill:qo,clipPath:"url(#stillPotClip)"}),p.jsx("path",{d:"M50,55 C 30,55 20,40 20,25 C 20,10 35,0 50,0 C 65,0 80,10 80,25 C 80,40 70,55 50,55 Z",fill:"url(#copperPotGradientStill)",stroke:ws,strokeWidth:"1.5"}),p.jsx("path",{d:"M80,25 C 90,25 95,35 95,45 L 95,65 C 95,75 90,80 80,80",stroke:"url(#copperPipeGradientStill)",strokeWidth:"8",fill:"none",strokeLinecap:"round"}),p.jsx("path",{d:"M95,65 Q 85,70 80,60",stroke:"url(#copperPipeGradientStill)",strokeWidth:"5",fill:"none",strokeLinecap:"round"}),p.jsx("circle",{cx:"45",cy:"58",r:"1.5",fill:ws}),p.jsx("circle",{cx:"55",cy:"58",r:"1.5",fill:ws}),p.jsx("circle",{cx:"35",cy:"70",r:"1.5",fill:ws}),p.jsx("circle",{cx:"65",cy:"70",r:"1.5",fill:ws})]}),VD=({fillPercentage:s=0})=>{const e=90*(Math.min(100,Math.max(0,s))/100);return p.jsxs("svg",{viewBox:"0 0 100 120",className:"w-16 h-20 inline-block",children:[p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"fermenterBodyGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[p.jsx("stop",{offset:"0%",style:{stopColor:hr}}),p.jsx("stop",{offset:"50%",style:{stopColor:Cn}}),p.jsx("stop",{offset:"100%",style:{stopColor:hr}})]}),p.jsx("clipPath",{id:"fermenterClip",children:p.jsx("path",{d:"M 10 10 H 90 V 100 L 50 115 L 10 100 V 10 Z"})})]}),p.jsx("path",{d:"M 10 10 H 90 V 100 L 50 115 L 10 100 V 10 Z",fill:"url(#fermenterBodyGradient)",stroke:Cn,strokeWidth:"2"}),e>0&&p.jsx("rect",{x:"10",y:100-e,width:"80",height:e+15,fill:"rgba(210, 180, 140, 0.8)",clipPath:"url(#fermenterClip)"}),p.jsx("rect",{x:"8",y:"8",width:"84",height:"10",fill:Cn,rx:"2"}),p.jsx("path",{d:"M 20 115 V 120",stroke:Cn,strokeWidth:"4"}),p.jsx("path",{d:"M 80 115 V 120",stroke:Cn,strokeWidth:"4"}),p.jsx("path",{d:"M 50 115 V 120",stroke:Cn,strokeWidth:"4"})]})},kD=({type:s,fillPercentage:e=0})=>{const n=(u,f)=>u*Math.min(100,Math.max(0,f))/100;let r=80;if(s==="wooden_barrel"&&(r=85),s==="metal_drum"&&(r=95),s==="square_tank"&&(r=90),s==="tote"&&(r=100),s==="five_gallon_tote"&&(r=65),s==="still"&&(r=50),s==="fermenter")return p.jsx(VD,{fillPercentage:e});const o=n(r,e);return s==="wooden_barrel"?p.jsx(CD,{fillSvgHeight:o}):s==="metal_drum"?p.jsx(ND,{fillSvgHeight:o}):s==="square_tank"?p.jsx(DD,{fillSvgHeight:o}):s==="tote"?p.jsx(OD,{fillSvgHeight:o}):s==="five_gallon_tote"?p.jsx(MD,{fillSvgHeight:o}):s==="still"?p.jsx(PD,{fillSvgHeight:o}):p.jsx("div",{className:"w-16 h-20 bg-gray-300 rounded flex items-center justify-center text-xs text-gray-600",children:"No Icon"})},xa=s=>{if((isNaN(s)||s<0)&&(s=0),s===0)return Ym;const e=s/200,n=1-e;return e*SD+n*Ym},En=(s,e,n)=>{const r=parseFloat(s)||0,o=parseFloat(e)||0,u=parseFloat(n)||0;let f=0;o>r?f=o-r:f=0;const m=xa(u);let y=0;f>0&&m>0&&(y=f/m);const _=y*(u/100);return{netWeightLbs:parseFloat(f.toFixed(2)),wineGallons:parseFloat(y.toFixed(3)),proofGallons:parseFloat(_.toFixed(3)),spiritDensity:parseFloat(m.toFixed(3)),grossWeightLbs:parseFloat(o.toFixed(2))}},Xm=(s,e,n)=>{const r=parseFloat(s)||0,o=parseFloat(e)||0,u=parseFloat(n)||0,f=xa(o),m=r*f,y=m+u,_=r*(o/100);return{netWeightLbs:parseFloat(m.toFixed(2)),wineGallons:parseFloat(r.toFixed(3)),proofGallons:parseFloat(_.toFixed(3)),spiritDensity:parseFloat(f.toFixed(3)),grossWeightLbs:parseFloat(y.toFixed(2))}},Zm=(s,e,n)=>{const r=parseFloat(s)||0,o=parseFloat(e)||0,u=parseFloat(n)||0;let f=0;o>0&&r>0?f=r/(o/100):f=0;const m=xa(o),y=f*m,_=y+u;return{netWeightLbs:parseFloat(y.toFixed(2)),wineGallons:parseFloat(f.toFixed(3)),proofGallons:parseFloat(r.toFixed(3)),spiritDensity:parseFloat(m.toFixed(3)),grossWeightLbs:parseFloat(_.toFixed(2))}},ko=async(s,e,n,r)=>{if(!s||!e||!n){console.error("DB, UserID, or AppID missing for logging.");return}const o=`artifacts/${n}/users/${e}/transactionLog`;try{await Fb(dn(s,o),{...r,timestamp:Fi()}),console.log("Transaction logged:",r.type)}catch(u){console.error("Error logging transaction:",u,r)}},Jp=(s,e)=>[e,...s].map(r=>r.map(o=>{const f=(o==null?"":String(o)).replace(/"/g,'""');return f.search(/("|,|\n)/g)>=0?`"${f}"`:f}).join(",")).join(`
`),eg=(s,e)=>{const n=new Blob([s],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");if(r.download!==void 0){const o=URL.createObjectURL(n);r.setAttribute("href",o),r.setAttribute("download",e),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}};function LD(){const[s,e]=oe.useState(null),[n,r]=oe.useState(null),[o,u]=oe.useState(null),[f,m]=oe.useState(!1),[y,_]=oe.useState(!1),[E,I]=oe.useState("login"),[S,P]=oe.useState(""),[U,X]=oe.useState(""),[H,ae]=oe.useState(""),[Q,te]=oe.useState(null),[Z,ie]=oe.useState([]),[le,O]=oe.useState([]),[x,C]=oe.useState([]),[D,M]=oe.useState([]),[V,A]=oe.useState(!0),[Ne,ve]=oe.useState(!0),[z,K]=oe.useState(!0),[he,de]=oe.useState(!0),[R,W]=oe.useState(""),[ce,se]=oe.useState(!1),[me,ge]=oe.useState(null),[_e,Qe]=oe.useState("add"),[Ve,ut]=oe.useState(!1),[ct,Tt]=oe.useState(null),[pn,on]=oe.useState(!1),[qn,bi]=oe.useState(null),[Ia,gn]=oe.useState(!1),[Ra,Ds]=oe.useState(null),[Os,wi]=oe.useState(!1),[Ho,Qi]=oe.useState(!1),[Nr,Dr]=oe.useState(!1),[mt,$e]=oe.useState(null),[yn,jt]=oe.useState(!1),[Or,Ca]=oe.useState(null),[Yi,Ai]=oe.useState(!1),[Xi,bn]=oe.useState(!1),[Si,Zi]=oe.useState(!0),[Ji,Mr]=oe.useState("inventory"),[Pr,Mn]=oe.useState(!1),[ci,es]=oe.useState(null),[Hn,Ms]=oe.useState("fermentation"),[Wn,Ps]=oe.useState("name_asc"),Xe="1:587421865283:web:b58af950daaa93ce450bf6";oe.useEffect(()=>{e(AD),r(aT);const ue=Dx(aT,De=>{De?(console.log("User is signed in:",De.uid),u(De.uid),te(De.email)):(console.log("No user is signed in."),u(null),te(null),_(!0)),m(!0)});return()=>ue()},[]);const Na=async ue=>{ue.preventDefault(),ae("");try{E==="login"?await Rx(n,S,U):E==="signup"&&await Ix(n,S,U),P(""),X("")}catch(De){console.error("Authentication error:",De);let ke="Authentication failed.";De.code==="auth/user-not-found"?ke="No user found with this email.":De.code==="auth/wrong-password"?ke="Incorrect password.":De.code==="auth/email-already-in-use"?ke="Email is already in use.":De.code==="auth/invalid-email"?ke="Invalid email address.":De.code==="auth/weak-password"&&(ke="Password is too weak."),ae(ke)}},ht=async()=>{try{await Ox(n),u(null),_(!0)}catch(ue){console.error("Logout error:",ue),W("Logout failed.")}};oe.useEffect(()=>{if(!f||!s||!o){f&&(!s||!o)&&A(!1);return}A(!0);const ue=`artifacts/${Xe}/users/${o}/spiritInventory`,De=Yc(dn(s,ue)),ke=Xc(De,ze=>{const et=[];ze.forEach(it=>et.push({id:it.id,...it.data()})),ie(et),A(!1),W("")},ze=>{console.error("Inv fetch error:",ze),W("Inv fetch failed."),A(!1)});return()=>ke()},[f,s,o,Xe]),oe.useEffect(()=>{if(!f||!s||!o){f&&(!s||!o)&&ve(!1);return}ve(!0);const ue=`artifacts/${Xe}/users/${o}/spiritProducts`,De=Yc(dn(s,ue)),ke=Xc(De,async ze=>{let et=[];if(ze.forEach(it=>{et.push({id:it.id,...it.data()})}),et.length===0&&ze.empty){const it=dn(s,ue),Zt=await ZN(it);if(Zt.empty){console.log("No products found, attempting to seed default products...");const pt=Cr(s);RD.forEach(An=>{const Oa=yt(dn(s,ue));pt.set(Oa,{name:An.name,description:An.description||""})});try{await pt.commit()}catch(An){console.error("Error seeding default products:",An),W("Failed to seed initial products."),ve(!1)}}else et=[],Zt.forEach(pt=>et.push({id:pt.id,...pt.data()})),et.sort((pt,An)=>(pt.name||"").localeCompare(An.name||"")),O(et),ve(!1)}else et.sort((it,Zt)=>(it.name||"").localeCompare(Zt.name||"")),O(et),ve(!1)},ze=>{console.error("Product fetch error:",ze),W("Failed to fetch products."),ve(!1)});return()=>ke()},[f,s,o,Xe]),oe.useEffect(()=>{if(!f||!s||!o){f&&(!s||!o)&&K(!1);return}K(!0);const ue=`artifacts/${Xe}/users/${o}/transactionLog`,De=Yc(dn(s,ue)),ke=Xc(De,ze=>{const et=[];ze.forEach(it=>et.push({id:it.id,...it.data()})),et.sort((it,Zt)=>(Zt.timestamp?.toDate?.()||0)-(it.timestamp?.toDate?.()||0)),C(et),K(!1)},ze=>{console.error("Log fetch err:",ze),W("Log fetch failed."),K(!1)});return()=>ke()},[f,s,o,Xe]),oe.useEffect(()=>{if(!f||!s||!o){f&&(!s||!o)&&de(!1);return}de(!0);const ue=`artifacts/${Xe}/users/${o}/productionBatches`,De=Yc(dn(s,ue)),ke=Xc(De,ze=>{const et=[];ze.forEach(it=>et.push({id:it.id,...it.data()})),M(et),de(!1)},ze=>{console.error("Production fetch error:",ze),W("Production fetch failed."),de(!1)});return()=>ke()},[f,s,o,Xe]);const _t=oe.useMemo(()=>{let ue=[...Z];switch(Wn){case"name_asc":ue.sort((De,ke)=>(De.name||"").localeCompare(ke.name||""));break;case"name_desc":ue.sort((De,ke)=>(ke.name||"").localeCompare(De.name||""));break;case"product_asc":ue.sort((De,ke)=>{const ze=De.status==="filled"?De.currentFill?.productType||"zzzz_empty_product":"zzzz_empty_container",et=ke.status==="filled"?ke.currentFill?.productType||"zzzz_empty_product":"zzzz_empty_container";return ze.localeCompare(et)});break;case"product_desc":ue.sort((De,ke)=>{const ze=De.status==="filled"?De.currentFill?.productType||"!!!!_empty_product":"!!!!_empty_container";return(ke.status==="filled"?ke.currentFill?.productType||"!!!!_empty_product":"!!!!_empty_container").localeCompare(ze)});break}return ue},[Z,Wn]),St=()=>{ge(null),Qe("add"),se(!0)},wn=ue=>{ge(ue),Qe("edit"),se(!0)},Vr=ue=>{ge({...ue,currentFill:{...ue.currentFill||{},productType:ue.currentFill?.productType||(le.length>0?le[0].name:""),grossWeightLbs:"",proof:"",wineGallonsInput:"",proofGallonsInput:"",fillDate:new Date().toISOString().split("T")[0]}}),Qe("refill"),se(!0)},Wo=ue=>{bi(ue),on(!0)},xi=ue=>{Ds(ue),gn(!0)},Da=ue=>{$e(ue),Dr(!0)},ts=ue=>{Ca(ue),jt(!0)},$n=(ue,De)=>{Tt({item:ue,type:De}),ut(!0)},hi=()=>wi(!0),Kn=()=>Qi(!0),Qn=()=>Ai(!0),Yt=()=>bn(!0),Et=ue=>{es(null),Ms(ue),Mn(!0)},kr=ue=>{es(ue),Ms(ue.batchType),Mn(!0)},Vs=async()=>{if(!s||!o||!ct)return;const{item:ue,type:De}=ct;let ke,ze;try{if(De==="container")ke=yt(s,`artifacts/${Xe}/users/${o}/spiritInventory`,ue.id),ze={type:ue.status==="filled"?"DELETE_FILLED_CONTAINER":"DELETE_EMPTY_CONTAINER",containerId:ue.id,containerName:ue.name,productType:ue.currentFill?.productType||null,proof:ue.currentFill?.proof||0,netWeightLbsChange:-(ue.currentFill?.netWeightLbs||0),proofGallonsChange:-(ue.currentFill?.proofGallons||0),notes:"Container deleted."};else if(De==="product"){if(Z.some(it=>it.currentFill?.productType===ue.name)){W(`"${ue.name}" is in use by a container and cannot be deleted.`),ut(!1),Tt(null);return}ke=yt(s,`artifacts/${Xe}/users/${o}/spiritProducts`,ue.id),ze={type:"DELETE_PRODUCT",productName:ue.name,notes:"Product definition deleted."}}else De==="productionBatch"&&(ke=yt(s,`artifacts/${Xe}/users/${o}/productionBatches`,ue.id),ze={type:"DELETE_PRODUCTION_BATCH",batchId:ue.id,batchName:ue.name,batchType:ue.batchType,notes:"Production batch deleted."});ke&&await e2(ke),ze&&await ko(s,o,Xe,ze),W("")}catch(et){console.error("Deletion error:",et),W("Deletion failed.")}ut(!1),Tt(null)},Xt=V||Ne||z||he;return p.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100 p-4 font-sans",children:[p.jsxs("header",{className:"mb-6 text-center",children:[p.jsx("h1",{className:"text-4xl font-bold text-blue-400",children:ID}),Q&&p.jsxs("p",{className:"text-sm text-gray-400",children:["Welcome, ",Q,"!"]}),o&&p.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["UID: ",o," (App: ",Xe,")"]})]}),p.jsxs("div",{className:"mb-6 p-4 bg-gray-800 rounded-lg shadow-lg",children:[p.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[p.jsxs("button",{onClick:()=>Zi(!Si),className:"bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md flex items-center justify-between",children:[p.jsx("span",{children:"Distillery Dashboard"}),p.jsx("svg",{className:`w-5 h-5 ml-2 transition-transform duration-300 ${Si?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),p.jsx("button",{onClick:()=>Mr(Ji==="inventory"?"production":"inventory"),className:"bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md",children:Ji==="inventory"?"Show Production Tracking":"Show Spirit Inventory"})]}),Si&&p.jsx(jD,{inventory:Z})]}),R&&p.jsx("div",{className:"bg-red-700 p-3 rounded mb-4 text-center",children:R}),Ji==="inventory"?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"mb-6 flex flex-wrap justify-center items-center gap-4",children:[p.jsx("button",{onClick:St,className:"bg-blue-600 hover:bg-blue-700 py-2 px-4 rounded-lg shadow-md",children:"Add Container"}),p.jsx("button",{onClick:hi,className:"bg-teal-600 hover:bg-teal-700 py-2 px-4 rounded-lg shadow-md",children:"Manage Products"}),p.jsx("button",{onClick:Kn,className:"bg-indigo-600 hover:bg-indigo-700 py-2 px-4 rounded-lg shadow-md",children:"View Log"}),p.jsx("div",{className:"relative inline-block text-left",children:p.jsxs(UD,{label:"Import/Export/Reports",children:[p.jsx(Tm,{onClick:Qn,children:"Import Containers CSV"}),p.jsx(Tm,{onClick:()=>eg(Jp(_t.map(ue=>[ue.name,ue.type,ue.status,ue.currentFill?.productType||"N/A",ue.tareWeightLbs||0,ue.currentFill?.grossWeightLbs||0,ue.currentFill?.netWeightLbs||0,ue.currentFill?.proof||0,ue.currentFill?.wineGallons||0,ue.currentFill?.proofGallons||0,ue.currentFill?.fillDate||"N/A",ue.currentFill?.emptiedDate||"N/A"]),["Container Name","Type","Status","Product Type","Tare (lbs)","Gross (lbs)","Net (lbs)","Proof","Wine Gal","Proof Gal","Fill Date","Emptied Date"]),`inventory_${new Date().toISOString().split("T")[0]}.csv`),children:"Export Inventory CSV"}),p.jsx(Tm,{onClick:Yt,children:"TTB Report Summarizer"})]})}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx("label",{htmlFor:"sortCriteria",className:"text-sm text-gray-300",children:"Sort by:"}),p.jsxs("select",{id:"sortCriteria",value:Wn,onChange:ue=>Ps(ue.target.value),className:"bg-gray-700 text-gray-200 p-2 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",children:[p.jsx("option",{value:"name_asc",children:"Name (A-Z)"}),p.jsx("option",{value:"name_desc",children:"Name (Z-A)"}),p.jsx("option",{value:"product_asc",children:"Product (A-Z)"}),p.jsx("option",{value:"product_desc",children:"Product (Z-A)"})]})]})]}),Xt&&f&&o&&p.jsx("div",{className:"text-xl p-8 text-center",children:"Loading data..."}),!Xt&&_t.length===0&&f&&o&&p.jsx("div",{className:"text-gray-400 text-lg p-8 text-center",children:"No containers. Add one!"}),!Xt&&_t.length>0&&p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-8",children:_t.map(ue=>p.jsx(FD,{container:ue,onEditInfo:wn,onRefill:Vr,onTransfer:Wo,onSample:xi,onProofDown:Da,onBottle:ts,onDelete:De=>$n(Z.find(ke=>ke.id===De),"container")},ue.id))})]}):p.jsx(XD,{batches:D,isLoading:he,onAddBatch:Et,onEditBatch:kr,onDeleteBatch:ue=>$n(ue,"productionBatch")}),f&&!o&&y&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:E==="login"?"Login":"Sign Up"}),H&&p.jsx("div",{className:"bg-red-700 p-2 rounded mb-4 text-center",children:H}),p.jsxs("form",{onSubmit:Na,children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"authEmail",className:"block text-sm font-medium mb-1",children:"Email"}),p.jsx("input",{type:"email",id:"authEmail",value:S,onChange:ue=>P(ue.target.value),required:!0,className:"w-full bg-gray-700 p-2 rounded",placeholder:"your@email.com"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"authPassword",className:"block text-sm font-medium mb-1",children:"Password"}),p.jsx("input",{type:"password",id:"authPassword",value:U,onChange:ue=>X(ue.target.value),required:!0,className:"w-full bg-gray-700 p-2 rounded",placeholder:"Password"})]}),p.jsxs("div",{className:"flex flex-col space-y-3",children:[p.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 py-2 px-4 rounded-lg shadow-md",children:E==="login"?"Login":"Sign Up"}),p.jsx("button",{type:"button",onClick:()=>I(E==="login"?"signup":"login"),className:"text-sm text-blue-400 hover:text-blue-300",children:E==="login"?"Don't have an account? Sign Up":"Already have an account? Login"})]})]})]})}),f&&o&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"flex justify-end mb-4",children:p.jsx("button",{onClick:ht,className:"bg-red-600 hover:bg-red-700 py-1 px-3 rounded text-sm",children:"Logout"})}),Xt&&p.jsx("div",{className:"flex justify-center items-center h-full",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}),!Xt&&p.jsx(p.Fragment,{children:R&&p.jsx("div",{className:"bg-red-700 p-3 rounded mb-4 text-center",children:R})})]}),ce&&s&&o&&p.jsx(BD,{db:s,userId:o,appId:Xe,container:me,mode:_e,products:le,inventory:Z,onClose:()=>{se(!1),ge(null)},setErrorApp:W}),Pr&&s&&o&&p.jsx(ZD,{db:s,userId:o,appId:Xe,batch:ci,type:Hn,fermentations:D.filter(ue=>ue.batchType==="fermentation"),products:le,onClose:()=>{Mn(!1),es(null)},setErrorApp:W}),pn&&s&&o&&qn&&p.jsx(zD,{db:s,userId:o,appId:Xe,sourceContainer:qn,allContainers:Z,products:le,onClose:()=>{on(!1),bi(null)},setErrorApp:W}),Ia&&s&&o&&Ra&&p.jsx(GD,{db:s,userId:o,appId:Xe,container:Ra,onClose:()=>{gn(!1),Ds(null)},setErrorApp:W}),Nr&&s&&o&&mt&&p.jsx(qD,{db:s,userId:o,appId:Xe,container:mt,onClose:()=>{Dr(!1),$e(null)},setErrorApp:W}),yn&&s&&o&&Or&&p.jsx(HD,{db:s,userId:o,appId:Xe,container:Or,onClose:()=>{jt(!1),Ca(null)},setErrorApp:W}),Os&&s&&o&&p.jsx(WD,{db:s,userId:o,appId:Xe,currentProducts:le,inventory:Z,onDeletePrompt:ue=>$n(ue,"product"),onClose:()=>wi(!1),setErrorApp:W}),Ho&&p.jsx($D,{transactionLog:x,isLoadingLog:z,onClose:()=>Qi(!1)}),Yi&&s&&o&&p.jsx(QD,{db:s,userId:o,appId:Xe,existingContainers:Z,products:le,onClose:()=>Ai(!1),setErrorApp:W}),Xi&&p.jsx(YD,{transactionLog:x,onClose:()=>bn(!1)}),Ve&&p.jsx(KD,{message:ct.type==="product"?`Delete product "${ct.item.name}"? This cannot be undone.`:ct.type==="container"?`Delete container "${ct.item.name}"? This will also delete its contents from inventory and cannot be undone.`:ct.type==="productionBatch"?`Delete batch "${ct.item.name}"? This cannot be undone.`:"Are you sure you want to delete this item?",onConfirm:Vs,onCancel:()=>{ut(!1),Tt(null)}})]})}const jD=({inventory:s})=>{const e=oe.useMemo(()=>{let n=0,r=0,o=0;const u={};s.forEach(m=>{if(m.status==="filled"&&m.currentFill){o++;const y=m.currentFill.proofGallons||0,_=m.currentFill.wineGallons||0,E=m.currentFill.productType||"Unspecified";n+=y,r+=_,u[E]||(u[E]=0),u[E]+=y}});const f=Object.entries(u).sort(([,m],[,y])=>y-m);return{totalProofGallons:n,totalWineGallons:r,filledCount:o,emptyCount:s.length-o,sortedProducts:f}},[s]);return p.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg mt-4 border border-blue-500/30",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg text-center",children:[p.jsx("p",{className:"text-sm text-blue-300",children:"Total Proof Gallons"}),p.jsx("p",{className:"text-3xl font-bold",children:e.totalProofGallons.toFixed(3)})]}),p.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg text-center",children:[p.jsx("p",{className:"text-sm text-blue-300",children:"Total Wine Gallons"}),p.jsx("p",{className:"text-3xl font-bold",children:e.totalWineGallons.toFixed(3)})]}),p.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg text-center",children:[p.jsx("p",{className:"text-sm text-blue-300",children:"Filled Containers"}),p.jsx("p",{className:"text-3xl font-bold",children:e.filledCount})]}),p.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg text-center",children:[p.jsx("p",{className:"text-sm text-blue-300",children:"Empty Containers"}),p.jsx("p",{className:"text-3xl font-bold",children:e.emptyCount})]})]}),p.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Inventory by Product (PG)"}),p.jsx("div",{className:"bg-gray-700 p-4 rounded-lg",children:e.sortedProducts.length>0?p.jsx("ul",{className:"space-y-2",children:e.sortedProducts.map(([n,r])=>p.jsxs("li",{className:"flex justify-between items-center text-sm",children:[p.jsx("span",{className:"text-gray-300",children:n}),p.jsxs("span",{className:"font-mono text-blue-300",children:[r.toFixed(3)," PG"]})]},n))}):p.jsx("p",{className:"text-sm text-gray-500",children:"No filled containers to summarize."})})]})]})},UD=({label:s,children:e})=>{const[n,r]=oe.useState(!1),o=LA.useRef(null);return oe.useEffect(()=>{const u=f=>{o.current&&!o.current.contains(f.target)&&r(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[o]),p.jsxs("div",{className:"relative",ref:o,children:[p.jsxs("button",{onClick:()=>r(!n),className:"bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md flex items-center",children:[s,p.jsx("svg",{className:`w-4 h-4 ml-2 transition-transform duration-200 ${n?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),n&&p.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-gray-700 ring-1 ring-black ring-opacity-5 z-50",children:p.jsx("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:e})})]})},Tm=({children:s,onClick:e})=>p.jsx("a",{href:"#",onClick:n=>{n.preventDefault(),e()},className:"block px-4 py-2 text-sm text-gray-200 hover:bg-gray-600",role:"menuitem",children:s}),FD=({container:s,onEditInfo:e,onRefill:n,onTransfer:r,onSample:o,onProofDown:u,onBottle:f,onDelete:m})=>{const{name:y,type:_,status:E,currentFill:I,tareWeightLbs:S}=s,{fillDate:P="N/A",grossWeightLbs:U=0,proof:X=0,netWeightLbs:H=0,wineGallons:ae=0,proofGallons:Q=0,emptiedDate:te=null,productType:Z="Unspecified"}=I||{},ie=Zp[_]||0;let le=0;_==="still"?le=E==="filled"&&H>0?100:0:le=ie>0&&E==="filled"&&ae>0?ae/ie*100:0;const O=Math.min(100,Math.max(0,le)).toFixed(0);return p.jsxs("div",{className:"bg-gray-800 shadow-xl rounded-lg p-6 flex flex-col justify-between border-2 border-gray-700 hover:border-blue-500",children:[p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsx("div",{className:"mb-4",children:p.jsx(kD,{type:_,fillPercentage:le})}),p.jsxs("div",{className:"text-center mb-3 w-full",children:[p.jsx("h3",{className:"text-2xl font-semibold text-blue-300 truncate",title:y,children:y}),p.jsx("p",{className:`text-sm font-semibold mt-1 px-2 py-0.5 rounded-full inline-block ${E==="filled"?"bg-green-700 text-green-100":"bg-yellow-700 text-yellow-100"}`,children:E==="filled"?_==="still"?"In Use":"Filled":"Empty"}),E==="filled"&&_!=="still"&&p.jsxs("span",{className:"ml-2 text-sm text-blue-300 font-semibold",children:[O,"% Full"]}),E==="filled"&&Z!=="Unspecified Spirit"&&Z&&p.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["(",Z,")"]})]})]}),p.jsxs("div",{className:"space-y-1 text-sm text-gray-300 mt-auto",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Type:"})," ",p.jsx("span",{className:"capitalize",children:_?.replace(/_/g," ")})," ",_!=="still"?`(Approx. ${ie} gal)`:""]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Tare Wt:"})," ",S||0," lbs"]}),E==="filled"&&p.jsxs(p.Fragment,{children:[p.jsxs("p",{children:[p.jsxs("strong",{children:[_==="still"?"Batch Date":"Fill Date",":"]})," ",P]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Gross Wt:"})," ",U," lbs"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Proof:"})," ",X]}),p.jsx("hr",{className:"my-1 border-gray-700"}),p.jsxs("p",{children:[p.jsx("strong",{children:"Net Product:"})," ",H," lbs"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Wine Gallons:"})," ",ae.toFixed(3)," gal"]}),p.jsxs("p",{className:"text-lg font-bold text-blue-400",children:[p.jsx("strong",{children:"Proof Gallons:"})," ",Q.toFixed(3)," PG"]})]}),E==="empty"&&te&&p.jsxs("p",{children:[p.jsx("strong",{children:"Last Emptied:"})," ",te]}),E==="empty"&&!te&&p.jsx("p",{children:"This container is currently empty."})]}),p.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 justify-end pt-3 border-t border-gray-700",children:[p.jsx("button",{onClick:()=>e(s),className:"bg-gray-600 hover:bg-gray-500 text-xs py-2 px-3 rounded-md",children:"Edit Info"}),E==="filled"?p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>f(s),className:"bg-sky-600 hover:bg-sky-500 text-xs py-2 px-3 rounded-md",children:"Bottle"}),p.jsx("button",{onClick:()=>r(s),className:"bg-purple-600 hover:bg-purple-500 text-xs py-2 px-3 rounded-md",children:"Transfer"}),p.jsx("button",{onClick:()=>u(s),className:"bg-cyan-600 hover:bg-cyan-500 text-xs py-2 px-3 rounded-md",children:"Proof Down"}),p.jsx("button",{onClick:()=>o(s),className:"bg-yellow-600 hover:bg-yellow-500 text-xs py-2 px-3 rounded-md",children:"Sample/Adjust"})]}):p.jsx("button",{onClick:()=>n(s),className:"bg-green-600 hover:bg-green-500 text-xs py-2 px-3 rounded-md",children:_==="still"?"New Batch":"Refill"}),p.jsx("button",{onClick:()=>m(s.id),className:"bg-red-700 hover:bg-red-600 text-xs py-2 px-3 rounded-md",children:"Delete"})]})]})},BD=({db:s,userId:e,appId:n,container:r,mode:o,products:u,inventory:f,onClose:m,setErrorApp:y})=>{const _=o==="edit",E=o==="refill",I=()=>u.length>0?u[0].name:"Unspecified Spirit",S={name:"",type:"wooden_barrel",tareWeightLbs:"",productType:I(),fillDate:new Date().toISOString().split("T")[0],grossWeightLbs:"",proof:""},[P,U]=oe.useState(S),[X,H]=oe.useState({netWeightLbs:0,wineGallons:0,proofGallons:0,spiritDensity:0,grossWeightLbs:0}),[ae,Q]=oe.useState(""),[te,Z]=oe.useState(o==="add"&&!r),[ie,le]=oe.useState("weight"),[O,x]=oe.useState(""),[C,D]=oe.useState("");oe.useEffect(()=>{let K=I();if(r){K=r.currentFill?.productType||I();let he=r.currentFill?.grossWeightLbs?.toString()||"",de=r.currentFill?.proof?.toString()||"",R=r.currentFill?.fillDate||new Date().toISOString().split("T")[0],W=r.currentFill?.wineGallons?.toFixed(3)||"",ce=r.currentFill?.proofGallons?.toFixed(3)||"";E&&(he="",de="",W="",ce="",R=new Date().toISOString().split("T")[0]),Z(!1),U({name:r.name||"",type:r.type||"wooden_barrel",tareWeightLbs:r.tareWeightLbs?.toString()||"",productType:K,fillDate:R,grossWeightLbs:he,proof:de}),x(W),D(ce),le("weight")}else Z(!0),U({...S,productType:K}),x(""),D("")},[r,o,E,u]),oe.useEffect(()=>{const K=parseFloat(P.tareWeightLbs)||0,he=parseFloat(P.proof)||0;let de={netWeightLbs:0,wineGallons:0,proofGallons:0,spiritDensity:xa(he),grossWeightLbs:K};if(te||o==="edit"&&r?.status==="empty"&&!P.grossWeightLbs&&!O&&!C&&!P.proof){H(de),ie==="weight"?U(R=>({...R,grossWeightLbs:K.toString()})):ie==="wineGallons"?x("0.000"):ie==="proofGallons"&&D("0.000");return}if(ie==="weight"){const R=parseFloat(P.grossWeightLbs)||K;de=En(K,R,he),x(de.wineGallons.toFixed(3)),D(de.proofGallons.toFixed(3))}else if(ie==="wineGallons"){const R=parseFloat(O)||0;de=Xm(R,he,K),U(W=>({...W,grossWeightLbs:de.grossWeightLbs.toFixed(2)})),D(de.proofGallons.toFixed(3))}else if(ie==="proofGallons"){const R=parseFloat(C)||0;de=Zm(R,he,K),U(W=>({...W,grossWeightLbs:de.grossWeightLbs.toFixed(2)})),x(de.wineGallons.toFixed(3))}H(de)},[P.tareWeightLbs,P.grossWeightLbs,P.proof,O,C,ie,te,o,r?.status]);const M=K=>{const{name:he,value:de}=K.target;he==="wineGallonsInput"?x(de):he==="proofGallonsInput"?D(de):U(R=>({...R,[he]:de})),Q("")},V=K=>{le(K)},A=()=>{if(!P.name.trim())return"Name is required.";const K=parseFloat(P.tareWeightLbs);if(isNaN(K)||K<=0)return"Valid tare weight (>0) is required.";if(!te||E||_&&(P.grossWeightLbs||O||C||P.proof||r?.status==="empty"&&P.productType&&P.productType!==(u.length>0?u[0].name:"Unspecified Spirit"))){if(!P.productType)return"Product type required to fill.";if(!P.fillDate)return"Fill date required to fill.";const de=parseFloat(P.proof);if(isNaN(de)||de<0||de>200)return"Proof (0-200) required to fill.";if(ie==="weight"){const R=parseFloat(P.grossWeightLbs);if(isNaN(R)||R<=0)return"Gross weight (>0) required when filling by weight.";if(R<K)return"Gross weight must be >= tare weight.";if(R>K&&de===0)return"Proof must be > 0 if net product weight is positive (using weight method)."}else if(ie==="wineGallons"){const R=parseFloat(O);if(isNaN(R)||R<0)return"Valid Wine Gallons (>=0) required.";if(R>0&&de===0)return"Proof must be > 0 if Wine Gallons > 0."}else if(ie==="proofGallons"){const R=parseFloat(C);if(isNaN(R)||R<0)return"Valid Proof Gallons (>=0) required.";if(R>0&&de===0)return"Proof must be > 0 if Proof Gallons > 0."}}return""},Ne=async K=>{K.preventDefault();const he=A();if(he){Q(he);return}Q("");const de=Cr(s),R=parseFloat(P.tareWeightLbs);let W=P.productType,ce=P.fillDate,se=parseFloat(P.proof)||0,me,ge,_e="",Qe=0,Ve=0;const ut=r?.currentFill||{},ct=!P.grossWeightLbs&&!O&&!C&&!P.proof;te||o==="edit"&&r?.status==="empty"&&ct?(ge="empty",me=En(R,R,0),W=null,ce=null,se=0,_e=o==="add"?"CREATE_EMPTY_CONTAINER":"EDIT_EMPTY_DATA_CORRECTION"):(ie==="weight"?me=En(R,parseFloat(P.grossWeightLbs)||R,se):ie==="wineGallons"?me=Xm(parseFloat(O)||0,se,R):me=Zm(parseFloat(C)||0,se,R),me.netWeightLbs>.001?(ge="filled",W||(W=I()),ce||(ce=new Date().toISOString().split("T")[0])):(ge="empty",me=En(R,R,0),W=ut.productType||null,ce=null,se=0),o==="add"?(P.type==="still"&&ge==="filled"?_e="PRODUCTION":_e=ge==="filled"?"CREATE_FILLED_CONTAINER":"CREATE_EMPTY_CONTAINER",Qe=me.netWeightLbs,Ve=me.proofGallons):o==="refill"?(P.type==="still"&&ge==="filled"?_e="PRODUCTION":_e="REFILL_CONTAINER",Qe=me.netWeightLbs,Ve=me.proofGallons):(Qe=me.netWeightLbs-(ut.netWeightLbs||0),Ve=me.proofGallons-(ut.proofGallons||0),r.status==="empty"&&ge==="filled"?P.type==="still"?_e="PRODUCTION":_e="EDIT_FILL_FROM_EMPTY":r.status==="filled"&&ge==="empty"?_e="EDIT_EMPTY_FROM_FILLED":ge==="filled"?_e="EDIT_FILL_DATA_CORRECTION":_e="EDIT_EMPTY_DATA_CORRECTION"));const Tt={name:P.name.trim(),type:P.type,tareWeightLbs:R,status:ge,currentFill:{productType:ge==="filled"?W:ut.productType&&ge==="empty"?ut.productType:null,fillDate:ge==="filled"?ce:null,grossWeightLbs:me.grossWeightLbs,proof:se,netWeightLbs:me.netWeightLbs,wineGallons:me.wineGallons,proofGallons:me.proofGallons,spiritDensity:me.spiritDensity,emptiedDate:ge==="empty"?r?.status==="filled"?new Date().toISOString().split("T")[0]:ut.emptiedDate||new Date().toISOString().split("T")[0]:null}};ge==="filled"&&(Tt.currentFill.emptiedDate=null);try{const pn=`artifacts/${n}/users/${e}/spiritInventory`;let on;_||E?(on=yt(s,pn,r.id),de.update(on,Tt)):(on=yt(dn(s,pn)),de.set(on,Tt));const qn={type:_e,containerId:on.id,containerName:Tt.name,productType:Tt.currentFill.productType,proof:Tt.currentFill.proof,netWeightLbsChange:Qe,proofGallonsChange:Ve,notes:`${o} via ${ie} method. ${te?"New empty.":ge==="empty"&&_e!=="CREATE_EMPTY_CONTAINER"?"Container emptied.":""}`},bi=dn(s,`artifacts/${n}/users/${e}/transactionLog`);de.set(yt(bi),{...qn,timestamp:Fi()}),await de.commit(),y(""),m()}catch(pn){console.error("Save error:",pn),Q("Save failed: "+pn.message),y("Save failed.")}},ve=o==="add"?"Add Container":o==="refill"?`Refill: ${r?.name}`:`Edit: ${r?.name}`,z=!te||o==="refill"||_&&(r?.status==="filled"||P.grossWeightLbs||O||C||P.proof);return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[p.jsx("h2",{className:"text-2xl mb-6 text-blue-300",children:ve}),ae&&p.jsx("div",{className:"bg-red-600 p-3 rounded mb-4 text-sm",children:ae}),p.jsxs("form",{onSubmit:Ne,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300",children:"Container Name/ID"}),p.jsx("input",{id:"name",type:"text",name:"name",value:P.name,onChange:M,required:!0,className:"mt-1 w-full bg-gray-700 p-2 rounded"}),p.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-300 mt-2",children:"Container Type"}),p.jsxs("select",{id:"type",name:"type",value:P.type,onChange:M,className:"mt-1 w-full bg-gray-700 p-2 rounded",children:[p.jsx("option",{value:"wooden_barrel",children:"Wooden Barrel"}),p.jsx("option",{value:"metal_drum",children:"Metal Drum"}),p.jsx("option",{value:"square_tank",children:"Square Tank (IBC)"}),p.jsx("option",{value:"tote",children:"Tote (250gal)"}),p.jsx("option",{value:"five_gallon_tote",children:"5 Gallon Tote"}),p.jsx("option",{value:"still",children:"Still"})]}),p.jsx("label",{htmlFor:"tareWeightLbs",className:"block text-sm font-medium text-gray-300 mt-2",children:"Tare Weight (lbs)"}),p.jsx("input",{id:"tareWeightLbs",type:"number",name:"tareWeightLbs",value:P.tareWeightLbs,onChange:M,required:!0,step:"0.01",min:"0.1",readOnly:E||_&&r?.status==="filled",className:"mt-1 w-full bg-gray-700 p-2 rounded read-only:bg-gray-600"}),(E||_&&r?.status==="filled")&&p.jsx("p",{className:"text-xs text-gray-500",children:"Tare locked for filled/refill."})]}),o==="add"&&p.jsxs("div",{className:"flex items-center mt-3",children:[p.jsx("input",{type:"checkbox",id:"addAsEmpty",checked:te,onChange:K=>Z(K.target.checked),className:"h-4 w-4 text-blue-600 border-gray-500 rounded focus:ring-blue-500"}),p.jsx("label",{htmlFor:"addAsEmpty",className:"ml-2 block text-sm text-gray-300",children:"Add as new empty container"})]}),z&&p.jsxs(p.Fragment,{children:[p.jsx("hr",{className:"my-3 border-gray-700"}),p.jsx("p",{className:"text-lg text-blue-400",children:"Fill Details:"}),p.jsxs("div",{className:"my-2",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Fill Input Method:"}),p.jsx("div",{className:"flex space-x-4",children:["weight","wineGallons","proofGallons"].map(K=>p.jsxs("label",{className:"flex items-center space-x-1 text-sm text-gray-200",children:[p.jsx("input",{type:"radio",name:"fillInputMethod",value:K,checked:ie===K,onChange:()=>V(K),className:"form-radio h-4 w-4 text-blue-500"}),p.jsx("span",{children:K==="weight"?"Weight":K==="wineGallons"?"Wine Gal":"Proof Gal"})]},K))})]}),p.jsx("label",{htmlFor:"productType",className:"block text-sm font-medium text-gray-300",children:"Product Type"}),p.jsxs("select",{id:"productType",name:"productType",value:P.productType,onChange:M,className:"mt-1 w-full bg-gray-700 p-2 rounded",required:!te||o==="refill",children:[p.jsx("option",{value:"",children:"-- Select Product --"}),u.map(K=>p.jsx("option",{value:K.name,children:K.name},K.id))]}),p.jsx("label",{htmlFor:"fillDate",className:"block text-sm font-medium text-gray-300 mt-2",children:"Date of Fill"}),p.jsx("input",{id:"fillDate",type:"date",name:"fillDate",value:P.fillDate,onChange:M,className:"mt-1 w-full bg-gray-700 p-2 rounded"}),p.jsx("label",{htmlFor:"proof",className:"block text-sm font-medium text-gray-300 mt-2",children:"Proof (0-200)"}),p.jsx("input",{id:"proof",type:"number",name:"proof",value:P.proof,onChange:M,step:"0.1",min:"0",max:"200",className:"mt-1 w-full bg-gray-700 p-2 rounded"}),ie==="weight"&&p.jsxs("div",{children:[p.jsx("label",{htmlFor:"grossWeightLbs",className:"block text-sm font-medium text-gray-300 mt-2",children:"Gross Weight (lbs)"}),p.jsx("input",{id:"grossWeightLbs",type:"number",name:"grossWeightLbs",value:P.grossWeightLbs,onChange:M,step:"0.01",min:"0",className:"mt-1 w-full bg-gray-700 p-2 rounded"})]}),ie==="wineGallons"&&p.jsxs("div",{children:[p.jsx("label",{htmlFor:"wineGallonsInput",className:"block text-sm font-medium text-gray-300 mt-2",children:"Wine Gallons"}),p.jsx("input",{id:"wineGallonsInput",type:"number",name:"wineGallonsInput",value:O,onChange:M,step:"0.001",min:"0",className:"mt-1 w-full bg-gray-700 p-2 rounded"})]}),ie==="proofGallons"&&p.jsxs("div",{children:[p.jsx("label",{htmlFor:"proofGallonsInput",className:"block text-sm font-medium text-gray-300 mt-2",children:"Proof Gallons"}),p.jsx("input",{id:"proofGallonsInput",type:"number",name:"proofGallonsInput",value:C,onChange:M,step:"0.001",min:"0",className:"mt-1 w-full bg-gray-700 p-2 rounded"})]})]}),p.jsxs("div",{className:"bg-gray-750 p-3 rounded mt-1 border border-gray-600",children:[p.jsx("h4",{className:"text-md font-semibold mb-1",children:"Calculated:"}),!te&&(!te||o==="refill"||_&&r?.status==="filled")&&p.jsxs(p.Fragment,{children:[p.jsxs("p",{className:"text-sm",children:["Gross Wt: ",X.grossWeightLbs.toFixed(2)," lbs"]}),p.jsxs("p",{className:"text-sm",children:["Net Wt: ",X.netWeightLbs.toFixed(2)," lbs"]}),p.jsxs("p",{className:"text-sm",children:["Density: ~",X.spiritDensity?.toFixed(3)," lbs/gal"]}),p.jsxs("p",{className:"text-sm",children:["Wine Gal: ",X.wineGallons.toFixed(3)," gal"]}),p.jsxs("p",{className:"text-md font-bold",children:["Proof Gal: ",X.proofGallons.toFixed(3)," PG"]})]}),te&&p.jsx("p",{className:"text-sm",children:"Container will be added empty."})]}),p.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[p.jsx("button",{type:"button",onClick:m,className:"bg-gray-600 py-2 px-4 rounded",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-blue-600 py-2 px-4 rounded",children:o==="add"?"Add":"Save"})]})]})]})})},zD=({db:s,userId:e,appId:n,sourceContainer:r,allContainers:o,onClose:u,setErrorApp:f})=>{const[m,y]=oe.useState(""),[_,E]=oe.useState(!1),[I,S]=oe.useState(!1),[P,U]=oe.useState(""),X=o.filter(Z=>Z.id!==r.id&&Z.status==="empty"),H=r.currentFill?.netWeightLbs||0,ae=r.currentFill?.proof||0,Q=r.currentFill?.productType||"Unspecified Spirit";oe.useEffect(()=>{I&&E(H.toString())},[I,H]);const te=async()=>{U("");const Z=parseFloat(_);if(!m){U("Select destination.");return}if(isNaN(Z)||Z<=0){U("Valid transfer weight required.");return}if(Z>H+.001){U(`Cannot transfer > ${H.toFixed(2)} lbs.`);return}const ie=o.find(le=>le.id===m);if(!ie||ie.status!=="empty"){U("Invalid destination.");return}try{const le=Cr(s),O=yt(s,`artifacts/${n}/users/${e}/spiritInventory`,r.id),x=yt(s,`artifacts/${n}/users/${e}/spiritInventory`,m),C=xa(ae),M=(C>0?Z/C:0)*(ae/100),V=(parseFloat(r.currentFill.grossWeightLbs)||parseFloat(r.tareWeightLbs)||0)-Z,A=En(parseFloat(r.tareWeightLbs)||0,V,ae);let Ne="filled",ve=null,z=ae;A.netWeightLbs<=.001&&(Ne="empty",ve=new Date().toISOString().split("T")[0],z=0,Object.assign(A,En(parseFloat(r.tareWeightLbs)||0,parseFloat(r.tareWeightLbs)||0,0))),le.update(O,{status:Ne,"currentFill.grossWeightLbs":A.grossWeightLbs,"currentFill.proof":z,"currentFill.netWeightLbs":A.netWeightLbs,"currentFill.wineGallons":A.wineGallons,"currentFill.proofGallons":A.proofGallons,"currentFill.emptiedDate":ve,"currentFill.spiritDensity":A.spiritDensity}),ko(s,e,n,{type:"TRANSFER_OUT",containerId:r.id,containerName:r.name,productType:Q,proof:ae,netWeightLbsChange:-Z,proofGallonsChange:-M,destinationContainerId:m,destinationContainerName:ie.name,notes:`To ${ie.name}`});const K=(parseFloat(ie.tareWeightLbs)||0)+Z,he=En(parseFloat(ie.tareWeightLbs)||0,K,ae);le.update(x,{status:"filled","currentFill.productType":Q,"currentFill.fillDate":new Date().toISOString().split("T")[0],"currentFill.grossWeightLbs":he.grossWeightLbs,"currentFill.proof":ae,"currentFill.netWeightLbs":he.netWeightLbs,"currentFill.wineGallons":he.wineGallons,"currentFill.proofGallons":he.proofGallons,"currentFill.spiritDensity":he.spiritDensity,"currentFill.emptiedDate":null}),ko(s,e,n,{type:"TRANSFER_IN",containerId:m,containerName:ie.name,productType:Q,proof:ae,netWeightLbsChange:Z,proofGallonsChange:M,sourceContainerId:r.id,sourceContainerName:r.name,notes:`From ${r.name}`}),await le.commit(),f(""),u()}catch(le){console.error("Transfer error: ",le),U("Transfer failed: "+le.message),f("Transfer failed.")}};return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-md",children:[p.jsxs("h2",{className:"text-xl font-semibold mb-4 text-blue-300",children:["Transfer From: ",r.name]}),p.jsxs("p",{className:"text-sm text-gray-400 mb-1",children:["(",Q,") Available: ",H.toFixed(2)," lbs at ",ae," proof."]}),P&&p.jsx("div",{className:"bg-red-600 p-2 rounded mb-3 text-sm",children:P}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("select",{value:m,onChange:Z=>y(Z.target.value),className:"w-full bg-gray-700 p-2 rounded mt-1",children:[p.jsx("option",{value:"",children:"-- Select Empty Destination --"}),X.map(Z=>p.jsxs("option",{value:Z.id,children:[Z.name," (Tare: ",Z.tareWeightLbs," lbs)"]},Z.id))]}),p.jsx("input",{type:"number",value:_,onChange:Z=>{E(Z.target.value),I&&S(!1)},disabled:I,step:"0.01",min:"0.01",placeholder:"Net Lbs to Transfer",className:"w-full bg-gray-700 p-2 rounded mt-1 disabled:bg-gray-600"}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{type:"checkbox",id:"transferAll",checked:I,onChange:Z=>S(Z.target.checked),className:"mr-2 h-4 w-4 text-blue-500 border-gray-600 rounded focus:ring-blue-500"}),p.jsx("label",{htmlFor:"transferAll",className:"text-sm text-gray-300",children:"Transfer All"})]}),p.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[p.jsx("button",{type:"button",onClick:u,className:"bg-gray-600 py-2 px-4 rounded",children:"Cancel"}),p.jsx("button",{onClick:te,className:"bg-purple-600 py-2 px-4 rounded",children:"Confirm Transfer"})]})]})]})})},GD=({db:s,userId:e,appId:n,container:r,onClose:o,setErrorApp:u})=>{const[f,m]=oe.useState(""),[y,_]=oe.useState("weight"),[E,I]=oe.useState(""),{currentFill:S={}}=r,{netWeightLbs:P=0,proof:U=0,wineGallons:X=0,proofGallons:H=0,productType:ae="N/A"}=S,Q=S.spiritDensity||xa(U),te=async()=>{I("");let Z=0;const ie=parseFloat(f);if(isNaN(ie)||ie<=0){I("Valid removal amount (>0) required.");return}if(y==="weight")Z=ie;else if(y==="wineGallons"){if(Q===0&&ie>0){I("Cannot calculate weight from WG: spirit density is zero.");return}Z=ie*Q}else if(y==="proofGallons"){if(U===0&&ie>0){I("Cannot remove by PG if proof is 0.");return}if(Q===0&&ie>0){I("Cannot calculate weight from PG: spirit density is zero.");return}Z=(U>0?ie/(U/100):0)*Q}if(Z>P+.001){I(`Cannot remove > ${P.toFixed(2)} lbs (or its volumetric equivalent).`);return}const le=Cr(s),O=yt(s,`artifacts/${n}/users/${e}/spiritInventory`,r.id),x=(S.grossWeightLbs||r.tareWeightLbs||0)-Z,C=En(r.tareWeightLbs||0,x,U),M=(Q>0?Z/Q:0)*(U/100);le.update(O,{"currentFill.grossWeightLbs":C.grossWeightLbs,"currentFill.netWeightLbs":C.netWeightLbs,"currentFill.wineGallons":C.wineGallons,"currentFill.proofGallons":C.proofGallons});const V={type:"SAMPLE_ADJUST",containerId:r.id,containerName:r.name,productType:ae,proof:U,netWeightLbsChange:-Z,proofGallonsChange:-M,notes:`Sample or tax adjustment via ${y}.`},A=dn(s,`artifacts/${n}/users/${e}/transactionLog`);le.set(yt(A),{...V,timestamp:Fi()});try{await le.commit(),u(""),o()}catch(Ne){console.error("Adjust error:",Ne),I("Adjust failed: "+Ne.message),u("Adjust failed.")}};return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-md",children:[p.jsxs("h2",{className:"text-xl mb-4 text-yellow-300",children:["Sample/Adjust: ",r.name]}),p.jsxs("p",{className:"text-sm text-gray-400 mb-1",children:["(",ae,") Available: ",P.toFixed(2)," lbs / ",X.toFixed(3)," WG"]}),E&&p.jsx("div",{className:"bg-red-600 p-2 rounded mb-3 text-sm",children:E}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Removal Method:"}),p.jsx("div",{className:"flex space-x-3",children:["weight","wineGallons","proofGallons"].map(Z=>p.jsxs("label",{className:"flex items-center space-x-1 text-sm text-gray-200",children:[p.jsx("input",{type:"radio",name:"removalInputMethod",value:Z,checked:y===Z,onChange:()=>_(Z),className:"form-radio h-4 w-4 text-yellow-500 border-gray-600 focus:ring-yellow-500"}),p.jsx("span",{children:Z==="weight"?"Weight (lbs)":Z==="wineGallons"?"Wine Gal":"Proof Gal"})]},Z))})]}),p.jsx("input",{type:"number",value:f,onChange:Z=>m(Z.target.value),step:"0.001",min:"0",placeholder:"Amount to remove",className:"w-full bg-gray-700 p-2 rounded mt-1"}),p.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[p.jsx("button",{type:"button",onClick:o,className:"bg-gray-600 py-2 px-4 rounded",children:"Cancel"}),p.jsx("button",{onClick:te,className:"bg-yellow-600 py-2 px-4 rounded",children:"Confirm Removal"})]})]})]})})},qD=({db:s,userId:e,appId:n,container:r,onClose:o,setErrorApp:u})=>{const[f,m]=oe.useState(""),[y,_]=oe.useState(""),{currentFill:E={},tareWeightLbs:I=0}=r,{proof:S=0,proofGallons:P=0,wineGallons:U=0,productType:X="N/A"}=E,H=oe.useMemo(()=>{const Q=parseFloat(f);if(isNaN(Q)||Q<=0||Q>=S)return{waterToAddGallons:0,waterToAddLbs:0,finalWineGallons:U,finalGrossWeight:0,finalSpiritDensity:0,isValid:!1};const te=P/(Q/100),Z=te-U,ie=Z*Ym,le=(E.netWeightLbs||0)+ie,O=(I||0)+le,x=xa(Q);return{waterToAddGallons:Z,waterToAddLbs:ie,finalWineGallons:te,finalGrossWeight:O,finalSpiritDensity:x,isValid:!0}},[f,S,P,U,E.netWeightLbs,I]),ae=async()=>{_("");const Q=parseFloat(f);if(!H.isValid){_(`Invalid target proof. Must be > 0 and less than the current proof of ${S}.`);return}const te=Zp[r.type]||0;if(te>0&&H.finalWineGallons>te){_(`Resulting volume (${H.finalWineGallons.toFixed(2)} gal) exceeds container capacity (${te} gal).`);return}const Z=Cr(s),ie=yt(s,`artifacts/${n}/users/${e}/spiritInventory`,r.id),le={"currentFill.proof":Q,"currentFill.wineGallons":H.finalWineGallons,"currentFill.grossWeightLbs":H.finalGrossWeight,"currentFill.netWeightLbs":(E.netWeightLbs||0)+H.waterToAddLbs,"currentFill.spiritDensity":H.finalSpiritDensity};Z.update(ie,le);const O={type:"PROOF_DOWN",containerId:r.id,containerName:r.name,productType:X,proof:Q,netWeightLbsChange:H.waterToAddLbs,proofGallonsChange:0,notes:`Proofed down from ${S} to ${Q}. Added ${H.waterToAddGallons.toFixed(3)} gal of water.`},x=dn(s,`artifacts/${n}/users/${e}/transactionLog`);Z.set(yt(x),{...O,timestamp:Fi()});try{await Z.commit(),u(""),o()}catch(C){console.error("Proof down error:",C),_("Failed to save changes: "+C.message),u("Proof down failed.")}};return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-md",children:[p.jsxs("h2",{className:"text-xl mb-4 font-semibold text-cyan-300",children:["Proof Down: ",r.name]}),y&&p.jsx("div",{className:"bg-red-600 p-2 rounded mb-3 text-sm",children:y}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"text-sm text-gray-400",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Product:"})," ",X]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Current State:"})," ",U.toFixed(3)," WG @ ",S," Proof (",P.toFixed(3)," PG)"]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"targetProof",className:"block text-sm font-medium text-gray-300",children:"New Target Proof"}),p.jsx("input",{type:"number",id:"targetProof",value:f,onChange:Q=>m(Q.target.value),placeholder:`Enter proof < ${S}`,className:"w-full bg-gray-700 p-2 rounded mt-1",step:"0.1",min:"0",max:S>0?S-.1:0})]}),H.isValid&&p.jsxs("div",{className:"bg-gray-700 p-3 rounded border border-gray-600 text-sm",children:[p.jsx("h4",{className:"font-semibold text-gray-300 mb-2",children:"Resulting Change:"}),p.jsxs("p",{children:[p.jsx("strong",{children:"Add Water:"})," ",p.jsxs("span",{className:"text-cyan-300",children:[H.waterToAddGallons.toFixed(3)," gal"]})," (",H.waterToAddLbs.toFixed(2)," lbs)"]}),p.jsx("hr",{className:"my-2 border-gray-600"}),p.jsxs("p",{children:[p.jsx("strong",{children:"Final WG:"})," ",H.finalWineGallons.toFixed(3)," gal"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Final Gross Wt:"})," ",H.finalGrossWeight.toFixed(2)," lbs"]}),p.jsxs("p",{className:"font-bold",children:[p.jsx("strong",{children:"Final Proof Gallons:"})," ",P.toFixed(3)," PG (Unchanged)"]})]}),p.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[p.jsx("button",{type:"button",onClick:o,className:"bg-gray-600 py-2 px-4 rounded",children:"Cancel"}),p.jsx("button",{onClick:ae,disabled:!H.isValid,className:"bg-cyan-600 py-2 px-4 rounded disabled:bg-cyan-800 disabled:cursor-not-allowed",children:"Confirm Proof Down"})]})]})]})})},HD=({db:s,userId:e,appId:n,container:r,onClose:o,setErrorApp:u})=>{const[f,m]=oe.useState(""),[y,_]=oe.useState(oT[0].value),[E,I]=oe.useState(""),[S,P]=oe.useState("keep"),[U,X]=oe.useState(""),[H,ae]=oe.useState("loss"),{currentFill:Q={},tareWeightLbs:te=0}=r,{proof:Z=0,wineGallons:ie=0,proofGallons:le=0,netWeightLbs:O=0,spiritDensity:x=0,productType:C="N/A"}=Q,D=oe.useMemo(()=>{const A=parseInt(f,10),Ne=parseInt(y,10);if(isNaN(A)||isNaN(Ne)||A<0||Ne<=0)return{wgBottled:0,pgBottled:0,lbsBottled:0,finalWg:ie,isGain:!1,isValid:!1};const ve=A*Ne/xD,z=ve*(Z/100),K=ve*x,he=ve>ie+.001,de=ie-ve;return{wgBottled:ve,pgBottled:z,lbsBottled:K,finalWg:de,isGain:he,isValid:A>0}},[f,y,ie,Z,x]),M=oe.useMemo(()=>{const A=parseFloat(U);return isNaN(A)||A<=0?{pg:0}:{pg:A*(Z/100)}},[U,Z]);oe.useEffect(()=>{D.isGain?P("gain"):S==="gain"&&P("keep")},[D.isGain,S]);const V=async()=>{if(I(""),!D.isValid){I("Please enter a valid number of bottles.");return}const A=Cr(s),Ne=yt(s,`artifacts/${n}/users/${e}/spiritInventory`,r.id),ve=dn(s,`artifacts/${n}/users/${e}/transactionLog`);if(D.isGain){const z={type:"BOTTLE_EMPTY",containerId:r.id,containerName:r.name,productType:C,proof:Z,netWeightLbsChange:-O,proofGallonsChange:-le,notes:`Bottled ${f} x ${y}mL. Container emptied with gain.`};A.set(yt(ve),{...z,timestamp:Fi()});const K=-D.finalWg,he=K*(Z/100),de=K*x,R={type:"BOTTLING_GAIN",containerId:r.id,containerName:r.name,productType:C,proof:Z,netWeightLbsChange:de,proofGallonsChange:he,notes:`Gain of ${K.toFixed(3)} WG recorded during bottling.`};A.set(yt(ve),{...R,timestamp:Fi()});const W=En(te,te,0),ce={status:"empty",currentFill:{...Q,...W,fillDate:null,proof:0,productType:C,emptiedDate:new Date().toISOString().split("T")[0]}};A.update(Ne,ce)}else{const z={type:"BOTTLE_PARTIAL",containerId:r.id,containerName:r.name,productType:C,proof:Z,netWeightLbsChange:-D.lbsBottled,proofGallonsChange:-D.pgBottled,notes:`Bottled ${f} x ${y}mL units.`};if(A.set(yt(ve),{...z,timestamp:Fi()}),S==="keep"){const K=(Q.grossWeightLbs||te)-D.lbsBottled,he=En(te,K,Z);A.update(Ne,{currentFill:{...Q,...he}})}else{if(S==="loss"){const de={type:"BOTTLING_LOSS",containerId:r.id,containerName:r.name,productType:C,proof:Z,netWeightLbsChange:-(O-D.lbsBottled),proofGallonsChange:-(le-D.pgBottled),notes:`Remainder of ${D.finalWg.toFixed(3)} WG written off as loss.`};A.set(yt(ve),{...de,timestamp:Fi()})}else if(S==="adjust"){const de=parseFloat(U);if(isNaN(de)||de<0){I("Please enter a valid, positive number for the adjustment.");return}const W=de*(H==="loss"?-1:1),ce=W*(Z/100),se=W*x,me={type:H==="loss"?"BOTTLING_LOSS":"BOTTLING_GAIN",containerId:r.id,containerName:r.name,productType:C,proof:Z,netWeightLbsChange:se,proofGallonsChange:ce,notes:`Manual bottling ${H}: ${de.toFixed(3)} WG.`};A.set(yt(ve),{...me,timestamp:Fi()})}const K=En(te,te,0),he={status:"empty",currentFill:{...Q,...K,fillDate:null,proof:0,productType:C,emptiedDate:new Date().toISOString().split("T")[0]}};A.update(Ne,he)}}try{await A.commit(),u(""),o()}catch(z){console.error("Bottling error:",z),I("Failed to save changes: "+z.message),u("Bottling failed.")}};return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[p.jsxs("h2",{className:"text-xl mb-4 font-semibold text-sky-300",children:["Bottle From: ",r.name]}),E&&p.jsx("div",{className:"bg-red-600 p-3 rounded mb-4 text-sm",children:E}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("p",{className:"text-sm text-gray-400",children:[p.jsx("strong",{children:"Available:"})," ",ie.toFixed(3)," WG @ ",Z," Proof"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 border border-gray-700 rounded-lg",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"bottleSize",className:"block text-sm font-medium text-gray-300",children:"Bottle Size"}),p.jsx("select",{id:"bottleSize",value:y,onChange:A=>_(A.target.value),className:"w-full bg-gray-700 p-2 rounded mt-1",children:oT.map(A=>p.jsx("option",{value:A.value,children:A.name},A.value))})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"numBottles",className:"block text-sm font-medium text-gray-300",children:"Number of Bottles"}),p.jsx("input",{type:"number",id:"numBottles",value:f,onChange:A=>m(A.target.value),placeholder:"e.g., 120",className:"w-full bg-gray-700 p-2 rounded mt-1",step:"1",min:"0"})]})]}),D.isValid&&p.jsxs("div",{className:"bg-gray-700 p-3 rounded text-sm",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Bottled Volume:"})," ",D.wgBottled.toFixed(3)," WG / ",D.pgBottled.toFixed(3)," PG"]}),D.isGain?p.jsxs("p",{className:"font-semibold text-green-400",children:["Calculated Gain: ",(-D.finalWg).toFixed(3)," WG / ",(-D.finalWg*(Z/100)).toFixed(3)," PG"]}):p.jsxs("p",{children:[p.jsx("strong",{children:"Expected Remainder:"})," ",p.jsxs("span",{className:"font-semibold text-sky-300",children:[D.finalWg.toFixed(3)," WG / ",(D.finalWg*(Z/100)).toFixed(3)," PG"]})]})]}),p.jsxs("div",{className:"p-4 border border-gray-700 rounded-lg",children:[p.jsx("h4",{className:"text-md font-semibold text-gray-300 mb-2",children:"Finalize Container"}),D.isGain?p.jsxs("p",{className:"text-sm text-green-400 bg-green-900/50 p-2 rounded",children:["Container will be emptied and a gain of ",(-D.finalWg).toFixed(3)," WG will be recorded."]}):p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"flex items-center space-x-2",children:[p.jsx("input",{type:"radio",name:"remainderAction",value:"keep",checked:S==="keep",onChange:A=>P(A.target.value),className:"form-radio text-sky-500"}),p.jsx("span",{children:"Keep remainder in container"})]}),p.jsxs("label",{className:"flex items-center space-x-2",children:[p.jsx("input",{type:"radio",name:"remainderAction",value:"loss",checked:S==="loss",onChange:A=>P(A.target.value),className:"form-radio text-sky-500"}),p.jsx("span",{children:"Empty and record remainder as loss"})]}),p.jsxs("label",{className:"flex items-center space-x-2",children:[p.jsx("input",{type:"radio",name:"remainderAction",value:"adjust",checked:S==="adjust",onChange:A=>P(A.target.value),className:"form-radio text-sky-500"}),p.jsx("span",{children:"Empty and manually record Loss/Gain"})]})]}),S==="adjust"&&!D.isGain&&p.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600 grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"adjustmentType",className:"block text-xs font-medium text-gray-400",children:"Adjustment Type"}),p.jsxs("select",{id:"adjustmentType",value:H,onChange:A=>ae(A.target.value),className:"w-full bg-gray-600 p-2 rounded mt-1 text-sm",children:[p.jsx("option",{value:"loss",children:"Bottling Loss"}),p.jsx("option",{value:"gain",children:"Bottling Gain"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"adjustmentAmount",className:"block text-xs font-medium text-gray-400",children:"Amount (Wine Gallons)"}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx("input",{type:"number",id:"adjustmentAmount",value:U,onChange:A=>X(A.target.value),className:"w-full bg-gray-600 p-2 rounded mt-1 text-sm",step:"0.001",min:"0"}),p.jsxs("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:["(",M.pg.toFixed(3)," PG)"]})]})]})]})]}),p.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[p.jsx("button",{type:"button",onClick:o,className:"bg-gray-600 py-2 px-4 rounded",children:"Cancel"}),p.jsx("button",{onClick:V,disabled:!D.isValid,className:"bg-sky-600 py-2 px-4 rounded disabled:bg-sky-800 disabled:cursor-not-allowed",children:"Confirm Bottling"})]})]})]})})},WD=({db:s,userId:e,appId:n,currentProducts:r,inventory:o,onDeletePrompt:u,onClose:f,setErrorApp:m})=>{const[y,_]=oe.useState(""),[E,I]=oe.useState(""),[S,P]=oe.useState(null),[U,X]=oe.useState(""),[H,ae]=oe.useState(!1),Q=le=>{P(le),_(le.name),I(le.description||"")},te=()=>{P(null),_(""),I(""),X("")},Z=async()=>{if(!y.trim()){X("Please enter a product name first to generate a description.");return}X(""),ae(!0);try{const le=`Generate a captivating and concise (1-2 sentences) marketable product description for a spirit named "${y.trim()}". Focus on its unique appeal and potential tasting experience. Examples: "A delightful blend of sweet caramel and a hint of sea salt, perfectly balanced with smooth whiskey notes." or "Clean, crisp, and exceptionally smooth vodka, perfect for sipping chilled or as the base of your favorite cocktail."`;let O=[];O.push({role:"user",parts:[{text:le}]});const M=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:O})});if(!M.ok){const A=await M.json();throw console.error("Gemini API Error:",A),new Error(`API request failed with status ${M.status}: ${A?.error?.message||M.statusText}`)}const V=await M.json();if(V.candidates&&V.candidates.length>0&&V.candidates[0].content&&V.candidates[0].content.parts&&V.candidates[0].content.parts.length>0){const A=V.candidates[0].content.parts[0].text;I(A.trim())}else throw console.error("Unexpected Gemini API response structure:",V),new Error("Failed to parse description from API response.")}catch(le){console.error("Error generating description:",le),X("Failed to generate description: "+le.message+". Ensure API key is correctly configured if testing locally.")}finally{ae(!1)}},ie=async()=>{if(!y.trim()){X("Product name cannot be empty.");return}const le=`artifacts/${n}/users/${e}/spiritProducts`;if(!S&&r.some(x=>x.name.toLowerCase()===y.trim().toLowerCase())){X(`Product "${y.trim()}" already exists.`);return}if(S&&S.name.toLowerCase()!==y.trim().toLowerCase()&&r.some(x=>x.name.toLowerCase()===y.trim().toLowerCase())){X(`Another product with the name "${y.trim()}" already exists.`);return}X("");const O={name:y.trim(),description:E.trim()};try{if(S){const x=yt(s,le,S.id);await JN(x,O),ko(s,e,n,{type:"UPDATE_PRODUCT",productId:S.id,productName:O.name,notes:"Product details updated."})}else await Fb(dn(s,le),O),ko(s,e,n,{type:"ADD_PRODUCT",productName:O.name,notes:"New product added."});te(),m("")}catch(x){console.error("Save product error:",x),X("Failed to save product."),m("Failed to save product.")}};return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col",children:[p.jsx("h2",{className:"text-2xl font-semibold mb-6 text-blue-300",children:S?"Edit Product":"Manage Spirit Products"}),U&&p.jsx("div",{className:"bg-red-600 text-white p-3 rounded mb-4 text-sm",children:U}),p.jsxs("div",{className:"space-y-4 mb-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"newProductName",className:"block text-sm font-medium text-gray-300",children:"Product Name"}),p.jsx("input",{type:"text",id:"newProductName",value:y,onChange:le=>_(le.target.value),placeholder:"Enter Product Name",className:"mt-1 w-full bg-gray-700 border-gray-600 text-gray-200 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"newProductDescription",className:"block text-sm font-medium text-gray-300",children:"Description"}),p.jsx("textarea",{id:"newProductDescription",value:E,onChange:le=>I(le.target.value),placeholder:"Enter or generate product description",rows:"3",className:"mt-1 w-full bg-gray-700 border-gray-600 text-gray-200 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500"}),p.jsx("button",{type:"button",onClick:Z,disabled:H||!y.trim(),className:"mt-2 text-sm bg-purple-600 hover:bg-purple-700 text-white font-semibold py-1 px-3 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:H?"Generating...":"✨ Generate Description"})]}),p.jsxs("div",{className:"flex justify-end space-x-2",children:[S&&p.jsx("button",{type:"button",onClick:te,className:"bg-gray-600 hover:bg-gray-500 text-white font-semibold py-2 px-4 rounded-md",children:"Cancel Edit"}),p.jsx("button",{onClick:ie,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-md",children:S?"Save Changes":"Add Product"})]})]}),p.jsx("hr",{className:"my-4 border-gray-700"}),p.jsxs("div",{className:"flex-grow overflow-y-auto pr-2",children:[p.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"Existing Products:"}),r.length===0&&p.jsx("p",{className:"text-gray-500",children:"No products defined yet."}),p.jsx("ul",{className:"space-y-3",children:r.map(le=>p.jsxs("li",{className:"flex items-start justify-between gap-4 bg-gray-700 p-3 rounded-md",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-gray-100 font-semibold",children:le.name}),p.jsx("p",{className:"text-xs text-gray-400 mt-1",children:le.description||"No description."})]}),p.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-2 items-end",children:[p.jsx("button",{onClick:()=>Q(le),className:"text-blue-400 hover:text-blue-300 text-xs font-semibold uppercase",children:"Edit"}),p.jsx("button",{onClick:()=>u(le),className:"text-red-500 hover:text-red-400 text-xs font-semibold uppercase",children:"Delete"})]})]},le.id))})]}),p.jsx("div",{className:"mt-6 flex justify-end",children:p.jsx("button",{type:"button",onClick:f,className:"bg-gray-600 hover:bg-gray-500 text-white font-semibold py-2 px-4 rounded-md",children:"Close"})})]})})},$D=({transactionLog:s,isLoadingLog:e,onClose:n})=>{const r=()=>{const o=["Timestamp","Type","Container Name","Container ID","Product Type","Proof","Net Wt Change (lbs)","PG Change","Source Container","Dest. Container","Notes"],u=s.map(m=>[m.timestamp?.toDate?m.timestamp.toDate().toLocaleString():"N/A",m.type||"N/A",m.containerName||"N/A",m.containerId||"N/A",m.productType||"N/A",m.proof||0,m.netWeightLbsChange?.toFixed(2)||0,m.proofGallonsChange?.toFixed(3)||0,m.sourceContainerName||(m.type==="TRANSFER_IN"?m.sourceContainerId:"N/A"),m.destinationContainerName||(m.type==="TRANSFER_OUT"?m.destinationContainerId:"N/A"),m.notes||""]),f=Jp(u,o);eg(f,`transaction_log_${new Date().toISOString().split("T")[0]}.csv`)};return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:"text-2xl font-semibold text-blue-300",children:"Transaction Log"}),p.jsx("button",{onClick:r,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-md shadow-md text-sm",children:"Export Log CSV"})]}),e&&p.jsx("p",{className:"text-center text-gray-400",children:"Loading log..."}),!e&&s.length===0&&p.jsx("p",{className:"text-center text-gray-400",children:"No transactions recorded yet."}),!e&&s.length>0&&p.jsx("div",{className:"overflow-x-auto flex-grow rounded-md border border-gray-700",children:p.jsxs("table",{className:"min-w-full divide-y divide-gray-700 text-sm",children:[p.jsx("thead",{className:"bg-gray-750 sticky top-0 z-10",children:p.jsx("tr",{children:["Date","Type","Container","Product","Proof","Net Wt Δ","PG Δ","Notes/Xfer"].map(o=>p.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-300 tracking-wider whitespace-nowrap bg-gray-750",children:o},o))})}),p.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:s.map(o=>p.jsxs("tr",{className:"hover:bg-gray-700",children:[p.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-400",children:o.timestamp?.toDate?o.timestamp.toDate().toLocaleString():"N/A"}),p.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-300",children:o.type||"N/A"}),p.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-300",title:o.containerId,children:o.containerName||"N/A"}),p.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-300",children:o.productType||"N/A"}),p.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-300",children:o.proof||0}),p.jsx("td",{className:`px-4 py-2 whitespace-nowrap ${o.netWeightLbsChange>0?"text-green-400":o.netWeightLbsChange<0?"text-red-400":"text-gray-300"}`,children:o.netWeightLbsChange?.toFixed(2)||0}),p.jsx("td",{className:`px-4 py-2 whitespace-nowrap ${o.proofGallonsChange>0?"text-green-400":o.proofGallonsChange<0?"text-red-400":"text-gray-300"}`,children:o.proofGallonsChange?.toFixed(3)||0}),p.jsxs("td",{className:"px-4 py-2 text-gray-400 text-xs max-w-xs truncate",title:o.type==="TRANSFER_OUT"&&`To: ${o.destinationContainerName||o.destinationContainerId}`||o.type==="TRANSFER_IN"&&`From: ${o.sourceContainerName||o.sourceContainerId}`||o.notes||"",children:[o.type==="TRANSFER_OUT"&&`To: ${o.destinationContainerName||o.destinationContainerId}`,o.type==="TRANSFER_IN"&&`From: ${o.sourceContainerName||o.sourceContainerId}`,o.notes&&p.jsxs("span",{children:[" ",o.notes]})]})]},o.id))})]})}),p.jsx("div",{className:"mt-6 flex justify-end",children:p.jsx("button",{onClick:n,className:"bg-gray-600 hover:bg-gray-500 text-white font-semibold py-2 px-4 rounded-md",children:"Close"})})]})})},KD=({message:s,onConfirm:e,onCancel:n})=>p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-md",children:[p.jsx("h3",{className:"text-lg font-semibold text-yellow-300 mb-4",children:"Confirm Action"}),p.jsx("p",{className:"text-gray-300 mb-6",children:s}),p.jsxs("div",{className:"flex justify-end space-x-3",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-gray-600 py-2 px-4 rounded",children:"Cancel"}),p.jsx("button",{type:"button",onClick:e,className:"bg-red-600 py-2 px-4 rounded",children:"Confirm"})]})]})}),QD=({db:s,userId:e,appId:n,existingContainers:r,products:o,onClose:u,setErrorApp:f})=>{const[m,y]=oe.useState(null),[_,E]=oe.useState([]),[I,S]=oe.useState(""),P=Q=>{const te=Q.target.files[0];te&&(te.type==="text/csv"||te.name.endsWith(".csv"))?(y(te),S(""),U(te)):(S("Please select a valid .csv file."),y(null),E([]))},U=Q=>{const te=new FileReader;te.onload=Z=>{const le=Z.target.result.replace(/^\uFEFF/,"").split(/\r?\n/).filter(V=>V.trim()!=="");if(le.length<2){S("CSV must have a header and at least one data row.");return}const O=V=>{const A=/(".*?"|[^",]+)(?=\s*,|\s*$)/g,Ne=[];let ve;for(;(ve=A.exec(V))!==null;){let z=ve[1].trim();z.startsWith('"')&&z.endsWith('"')&&(z=z.slice(1,-1).replace(/""/g,'"')),Ne.push(z)}return Ne},x=le[0].toLowerCase(),C=O(x),D=["container name","type","tare"];if(!D.every(V=>C.includes(V))){S(`CSV header must contain: ${D.join(", ")}.`);return}const M=le.slice(1).map((V,A)=>{if(V.trim()==="")return null;const Ne=O(V),ve={};C.forEach((se,me)=>{ve[se.replace(/\s+/g,"_")]=Ne[me]||""});let z=[];const K=ve.container_name||"",he=ve.type?.trim().toLowerCase()||"",de=he.replace(/\s+/g,"_"),R=parseFloat(ve.tare),W=ve.status?.toLowerCase()||"empty";K?r.some(se=>se.name.toLowerCase()===K.toLowerCase())&&z.push("Name exists."):z.push("Name missing."),de?Object.keys(Zp).includes(de)||z.push(`Invalid type: "${he}".`):z.push("Type missing."),(isNaN(R)||R<=0)&&z.push("Invalid tare.");let ce={name:K,type:de,tareWeightLbs:R,status:W,errors:z,raw:ve};if(W==="filled"){const se=ve.product_type||"",me=ve.fill_date||"",ge=parseFloat(ve.proof),_e=parseFloat(ve.gross),Qe=parseFloat(ve.net),Ve=parseFloat(ve.wine_gallons),ut=parseFloat(ve.proof_gallons);(!se||!o.some(Tt=>Tt.name===se))&&z.push("Invalid Product Type."),(!me||isNaN(new Date(me)))&&z.push("Invalid Fill Date."),(isNaN(ge)||ge<0||ge>200)&&z.push("Invalid Proof.");let ct;!isNaN(_e)&&_e>R?ct=En(R,_e,ge):!isNaN(Qe)&&Qe>0?ct=En(R,R+Qe,ge):!isNaN(Ve)&&Ve>0?ct=Xm(Ve,ge,R):!isNaN(ut)&&ut>0?ct=Zm(ut,ge,R):(z.push("No valid fill data (gross, net, wg, or pg)."),ct=En(R,R,0)),ce.currentFill={productType:se,fillDate:me,proof:ge,...ct}}else ce.currentFill={...En(R,R,0),emptiedDate:ve.empty_date||new Date().toISOString().split("T")[0]};return ce}).filter(Boolean);E(M)},te.readAsText(Q)},X=async()=>{const Q=_.filter(ie=>ie.errors.length===0);if(Q.length===0){S("No valid containers to import.");return}const te=Cr(s),Z=`artifacts/${n}/users/${e}/spiritInventory`;Q.forEach(ie=>{const le=yt(dn(s,Z)),{errors:O,raw:x,...C}=ie;te.set(le,C)}),ko(s,e,n,{type:"CREATE_BULK_CONTAINERS",notes:`Imported ${Q.length} containers via CSV.`});try{await te.commit(),f(""),u()}catch(ie){console.error("Import error:",ie),S("Import failed: "+ie.message),f("Import failed.")}},H=_.filter(Q=>Q.errors.length===0).length,ae=_.length-H;return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[p.jsx("h2",{className:"text-2xl mb-4 font-semibold text-blue-300",children:"Import Containers from CSV"}),I&&p.jsx("div",{className:"bg-red-600 p-3 rounded mb-4 text-sm",children:I}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("p",{className:"text-sm text-gray-400",children:["CSV must include headers: ",p.jsx("strong",{children:"container name, type, tare"}),". Optional headers for filled containers: ",p.jsx("strong",{children:"status, product type, proof, fill date, gross, net, wine gallons, proof gallons, empty date"}),"."]}),p.jsx("input",{type:"file",accept:".csv",onChange:P,className:"block w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700"}),_.length>0&&p.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[p.jsxs("h3",{className:"text-lg font-semibold mb-2",children:[H," valid rows, ",ae," errors"]}),p.jsx("div",{className:"max-h-64 overflow-y-auto bg-gray-900 p-2 rounded",children:p.jsxs("table",{className:"w-full text-xs text-left",children:[p.jsx("thead",{className:"sticky top-0 bg-gray-900",children:p.jsx("tr",{children:["Name","Status","Product","PG","Errors"].map(Q=>p.jsx("th",{className:"p-2",children:Q},Q))})}),p.jsx("tbody",{children:_.map((Q,te)=>p.jsxs("tr",{className:Q.errors.length>0?"bg-red-900/50":"bg-gray-800",children:[p.jsx("td",{className:"p-2",children:Q.name}),p.jsx("td",{className:"p-2",children:Q.status}),p.jsx("td",{className:"p-2",children:Q.currentFill?.productType||"N/A"}),p.jsx("td",{className:"p-2",children:Q.currentFill?.proofGallons?.toFixed(2)||"N/A"}),p.jsx("td",{className:"p-2 text-red-400",title:Q.errors.join(", "),children:Q.errors.join(", ")})]},te))})]})})]})]}),p.jsxs("div",{className:"flex justify-end space-x-3 pt-4 mt-auto",children:[p.jsx("button",{type:"button",onClick:u,className:"bg-gray-600 py-2 px-4 rounded",children:"Cancel"}),p.jsxs("button",{onClick:X,disabled:H===0,className:"bg-blue-600 py-2 px-4 rounded disabled:bg-gray-500 disabled:cursor-not-allowed",children:["Import ",H," Containers"]})]})]})})},YD=({transactionLog:s,onClose:e})=>{const[n,r]=oe.useState(""),[o,u]=oe.useState(""),[f,m]=oe.useState(null),y=()=>{if(!n||!o){m(null);return}const S=new Date(n),P=new Date(o);P.setHours(23,59,59,999);const U=s.filter(H=>{const ae=H.timestamp?.toDate();return ae&&ae>=S&&ae<=P}),X={production:{spiritsProduced:0},processing:{transferredFromStorage:0,bottlingDump:0,bottlingGain:0,bottlingLoss:0,operationalLoss:0,transferredToStorage:0},storage:{transferredIn:0,transferredOut:0,storageLosses:0}};U.forEach(H=>{const ae=H.proofGallonsChange||0;switch(H.type){case"PRODUCTION":case"DISTILLATION_FINISH":X.production.spiritsProduced+=ae;break;case"TRANSFER_OUT":X.processing.transferredToStorage+=Math.abs(ae),X.storage.transferredOut+=Math.abs(ae);break;case"TRANSFER_IN":X.processing.transferredFromStorage+=ae,X.storage.transferredIn+=ae;break;case"BOTTLE_PARTIAL":case"BOTTLE_EMPTY":X.processing.bottlingDump+=Math.abs(ae);break;case"BOTTLING_GAIN":X.processing.bottlingGain+=ae;break;case"BOTTLING_LOSS":X.processing.bottlingLoss+=Math.abs(ae);break;case"SAMPLE_ADJUST":X.processing.operationalLoss+=Math.abs(ae),X.storage.storageLosses+=Math.abs(ae);break}}),m(X)},_=()=>{if(!f)return;const S=["TTB Form","Part","Line","Description","Proof Gallons (PG)"],P=[["Production Report (TTB F 5110.40)","Part I","2","Spirits produced by distillation",f.production.spiritsProduced.toFixed(3)],["Processing Report (TTB F 5110.28)","Part I","3","Spirits received from storage",f.processing.transferredFromStorage.toFixed(3)],["Processing Report (TTB F 5110.28)","Part II","20","Spirits dumped for bottling",f.processing.bottlingDump.toFixed(3)],["Processing Report (TTB F 5110.28)","Part II","26","Bottling gains",f.processing.bottlingGain.toFixed(3)],["Processing Report (TTB F 5110.28)","Part II","27","Bottling losses",f.processing.bottlingLoss.toFixed(3)],["Processing Report (TTB F 5110.28)","Part II","28","Losses from dumping, mingling, etc.",f.processing.operationalLoss.toFixed(3)],["Storage Report (TTB F 5110.11)","Part I","2","Spirits transferred in",f.storage.transferredIn.toFixed(3)],["Storage Report (TTB F 5110.11)","Part II","17","Spirits transferred out",f.storage.transferredOut.toFixed(3)],["Storage Report (TTB F 5110.11)","Part II","18","Losses (e.g., from samples, aging)",f.storage.storageLosses.toFixed(3)]],U=Jp(P,S);eg(U,`ttb_correlated_summary_${n}_to_${o}.csv`)},E=({title:S,children:P})=>p.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg border border-gray-700",children:[p.jsx("h3",{className:"text-xl font-semibold text-blue-300 mb-3",children:S}),p.jsx("div",{className:"space-y-2",children:P})]}),I=({form:S,part:P,line:U,description:X,value:H})=>p.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center text-sm hover:bg-gray-700/50 p-1 rounded",children:[p.jsx("div",{className:"col-span-7 text-gray-300",children:X}),p.jsxs("div",{className:"col-span-3 text-gray-400 text-xs text-right",title:`${S} - Part ${P}, Line ${U}`,children:[S,", L ",U]}),p.jsx("div",{className:"col-span-2 text-right font-mono text-blue-300",children:H.toFixed(3)})]});return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-gray-850 p-6 rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[p.jsx("h2",{className:"text-2xl mb-4 font-semibold text-blue-300",children:"TTB Monthly Report Correlator"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 items-end",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-300",children:"Start Date"}),p.jsx("input",{type:"date",id:"startDate",value:n,onChange:S=>r(S.target.value),className:"mt-1 w-full bg-gray-700 p-2 rounded"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-300",children:"End Date"}),p.jsx("input",{type:"date",id:"endDate",value:o,onChange:S=>u(S.target.value),className:"mt-1 w-full bg-gray-700 p-2 rounded"})]}),p.jsx("button",{onClick:y,disabled:!n||!o,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md h-10 disabled:bg-gray-500 disabled:cursor-not-allowed",children:"Generate Report"})]}),p.jsx("div",{className:"flex-grow overflow-y-auto space-y-4 pr-2",children:f?p.jsxs(p.Fragment,{children:[p.jsx(E,{title:"Production Operations (TTB F 5110.40)",children:p.jsx(I,{form:"F5110.40",part:"I",line:"2",description:"Spirits produced by distillation",value:f.production.spiritsProduced})}),p.jsxs(E,{title:"Processing Operations (TTB F 5110.28)",children:[p.jsx(I,{form:"F5110.28",part:"I",line:"3",description:"Spirits received from storage",value:f.processing.transferredFromStorage}),p.jsx("hr",{className:"border-gray-600 my-2"}),p.jsx(I,{form:"F5110.28",part:"II",line:"20",description:"Spirits dumped for bottling",value:f.processing.bottlingDump}),p.jsx(I,{form:"F5110.28",part:"II",line:"26",description:"Bottling gains",value:f.processing.bottlingGain}),p.jsx(I,{form:"F5110.28",part:"II",line:"27",description:"Bottling losses",value:f.processing.bottlingLoss}),p.jsx(I,{form:"F5110.28",part:"II",line:"28",description:"Operational losses (samples, etc.)",value:f.processing.operationalLoss})]}),p.jsxs(E,{title:"Storage Operations (TTB F 5110.11)",children:[p.jsx(I,{form:"F5110.11",part:"I",line:"2",description:"Spirits transferred in",value:f.storage.transferredIn}),p.jsx("hr",{className:"border-gray-600 my-2"}),p.jsx(I,{form:"F5110.11",part:"II",line:"17",description:"Spirits transferred out (to Processing)",value:f.storage.transferredOut}),p.jsx(I,{form:"F5110.11",part:"II",line:"18",description:"Storage losses (aging, samples)",value:f.storage.storageLosses})]})]}):p.jsx("div",{className:"text-center text-gray-500 pt-10",children:"Please select a date range to generate the report."})}),p.jsxs("div",{className:"flex justify-between items-center pt-4 mt-auto border-t border-gray-700",children:[p.jsx("button",{type:"button",onClick:e,className:"bg-gray-600 hover:bg-gray-500 text-white font-semibold py-2 px-4 rounded-md",children:"Close"}),f&&p.jsx("button",{onClick:_,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-md text-sm",children:"Export Correlated CSV"})]})]})})},XD=({batches:s,isLoading:e,onAddBatch:n,onEditBatch:r,onDeleteBatch:o})=>{const u=oe.useMemo(()=>s.filter(m=>m.batchType==="fermentation").sort((m,y)=>new Date(y.startDate)-new Date(m.startDate)),[s]),f=oe.useMemo(()=>s.filter(m=>m.batchType==="distillation").sort((m,y)=>new Date(y.date)-new Date(m.date)),[s]);return p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[p.jsx("button",{onClick:()=>n("fermentation"),className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-5 rounded-lg shadow-md",children:"New Fermentation"}),p.jsx("button",{onClick:()=>n("distillation"),className:"bg-orange-600 hover:bg-orange-700 text-white font-semibold py-2 px-5 rounded-lg shadow-md",children:"New Distillation"})]}),e&&p.jsx("div",{className:"text-center p-8",children:"Loading Production Batches..."}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[p.jsx(uT,{title:"Fermentations",batches:u,onEdit:r,onDelete:o}),p.jsx(uT,{title:"Distillations",batches:f,onEdit:r,onDelete:o})]})]})},uT=({title:s,batches:e,onEdit:n,onDelete:r})=>p.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl",children:[p.jsx("h2",{className:"text-2xl font-bold text-blue-300 mb-4",children:s}),e.length===0?p.jsxs("p",{className:"text-gray-500",children:["No ",s.toLowerCase()," recorded."]}):p.jsx("div",{className:"space-y-4",children:e.map(o=>p.jsxs("div",{className:"bg-gray-750 p-4 rounded-lg border border-gray-600",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-lg text-gray-200",children:o.name}),p.jsx("p",{className:"text-sm text-gray-400",children:o.batchType==="fermentation"?`Started: ${o.startDate}`:`Date: ${o.date}`})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:()=>n(o),className:"text-xs text-blue-400 hover:underline",children:"EDIT"}),p.jsx("button",{onClick:()=>r(o),className:"text-xs text-red-500 hover:underline",children:"DELETE"})]})]}),p.jsxs("div",{className:"text-sm mt-3 space-y-1 text-gray-300",children:[o.batchType==="fermentation"?p.jsxs(p.Fragment,{children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Volume:"})," ",o.startVolume," gal"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Gravity:"})," ",o.og," OG → ",o.fg," FG"]})]}):p.jsxs(p.Fragment,{children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Source:"})," ",o.sourceBatchName||"N/A"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Output:"})," ",o.volumeOut," gal @ ",o.proofOut," proof (",o.proofGallonsOut?.toFixed(3)," PG)"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Product:"})," ",o.productType]})]}),o.notes&&p.jsx("p",{className:"text-xs text-gray-400 pt-1 border-t border-gray-700 mt-2",children:p.jsxs("em",{children:["Notes: ",o.notes]})})]})]},o.id))})]}),ZD=({db:s,userId:e,appId:n,batch:r,type:o,fermentations:u,products:f,onClose:m,setErrorApp:y})=>{const _=!!r,[E,I]=oe.useState({}),[S,P]=oe.useState("");oe.useEffect(()=>{I(o==="fermentation"?{name:r?.name||"",startDate:r?.startDate||new Date().toISOString().split("T")[0],startVolume:r?.startVolume||"",og:r?.og||"",fg:r?.fg||"",ingredients:r?.ingredients||"",notes:r?.notes||""}:{name:r?.name||"",date:r?.date||new Date().toISOString().split("T")[0],sourceBatchId:r?.sourceBatchId||"",volumeIn:r?.volumeIn||"",volumeOut:r?.volumeOut||"",proofOut:r?.proofOut||"",productType:r?.productType||"Low Wines",notes:r?.notes||""})},[r,o]);const U=ae=>I(Q=>({...Q,[ae.target.name]:ae.target.value})),X=async ae=>{ae.preventDefault(),P("");const Q={...E,batchType:o};try{const te=Cr(s),Z=`artifacts/${n}/users/${e}/productionBatches`;let ie;if(_?(ie=yt(s,Z,r.id),te.update(ie,Q)):(ie=yt(dn(s,Z)),te.set(ie,Q)),o==="distillation"&&Q.volumeOut>0&&Q.proofOut>0){const le=parseFloat(Q.volumeOut)*(parseFloat(Q.proofOut)/100),O={type:"DISTILLATION_FINISH",batchId:ie.id,batchName:Q.name,productType:Q.productType,proof:parseFloat(Q.proofOut),proofGallonsChange:le,notes:`Produced ${le.toFixed(3)} PG of ${Q.productType}.`},x=dn(s,`artifacts/${n}/users/${e}/transactionLog`);te.set(yt(x),{...O,timestamp:Fi()})}await te.commit(),y(""),m()}catch(te){console.error("Save production error:",te),P("Save failed: "+te.message),y("Save failed.")}},H=`${_?"Edit":"New"} ${o.charAt(0).toUpperCase()+o.slice(1)}`;return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[p.jsx("h2",{className:"text-2xl mb-6 text-blue-300",children:H}),S&&p.jsx("div",{className:"bg-red-600 p-3 rounded mb-4 text-sm",children:S}),p.jsxs("form",{onSubmit:X,className:"space-y-4",children:[p.jsx("input",{name:"name",value:E.name||"",onChange:U,placeholder:"Batch Name/ID",required:!0,className:"w-full bg-gray-700 p-2 rounded"}),o==="fermentation"?p.jsxs(p.Fragment,{children:[p.jsx("input",{name:"startDate",type:"date",value:E.startDate||"",onChange:U,className:"w-full bg-gray-700 p-2 rounded"}),p.jsx("input",{name:"startVolume",type:"number",value:E.startVolume||"",onChange:U,placeholder:"Starting Volume (gal)",className:"w-full bg-gray-700 p-2 rounded"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx("input",{name:"og",type:"number",step:"0.001",value:E.og||"",onChange:U,placeholder:"Original Gravity",className:"w-full bg-gray-700 p-2 rounded"}),p.jsx("input",{name:"fg",type:"number",step:"0.001",value:E.fg||"",onChange:U,placeholder:"Final Gravity",className:"w-full bg-gray-700 p-2 rounded"})]}),p.jsx("textarea",{name:"ingredients",value:E.ingredients||"",onChange:U,placeholder:"Ingredients...",rows:"3",className:"w-full bg-gray-700 p-2 rounded"})]}):p.jsxs(p.Fragment,{children:[p.jsx("input",{name:"date",type:"date",value:E.date||"",onChange:U,className:"w-full bg-gray-700 p-2 rounded"}),p.jsxs("select",{name:"sourceBatchId",value:E.sourceBatchId||"",onChange:U,className:"w-full bg-gray-700 p-2 rounded",children:[p.jsx("option",{value:"",children:"-- Select Source Fermentation --"}),u.map(ae=>p.jsxs("option",{value:ae.id,children:[ae.name," (",ae.startDate,")"]},ae.id))]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx("input",{name:"volumeIn",type:"number",value:E.volumeIn||"",onChange:U,placeholder:"Volume In (gal)",className:"w-full bg-gray-700 p-2 rounded"}),p.jsx("input",{name:"volumeOut",type:"number",value:E.volumeOut||"",onChange:U,placeholder:"Volume Out (gal)",className:"w-full bg-gray-700 p-2 rounded"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx("input",{name:"proofOut",type:"number",step:"0.1",value:E.proofOut||"",onChange:U,placeholder:"Output Proof",className:"w-full bg-gray-700 p-2 rounded"}),p.jsx("select",{name:"productType",value:E.productType||"",onChange:U,className:"w-full bg-gray-700 p-2 rounded",children:f.map(ae=>p.jsx("option",{value:ae.name,children:ae.name},ae.id))})]})]}),p.jsx("textarea",{name:"notes",value:E.notes||"",onChange:U,placeholder:"Notes...",rows:"2",className:"w-full bg-gray-700 p-2 rounded"}),p.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[p.jsx("button",{type:"button",onClick:m,className:"bg-gray-600 py-2 px-4 rounded",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-blue-600 py-2 px-4 rounded",children:"Save Batch"})]})]})]})})};qA.createRoot(document.getElementById("root")).render(p.jsx(oe.StrictMode,{children:p.jsx(LD,{})}));
